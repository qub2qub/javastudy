<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0077) -->
<html xmlns="http://www.w3.org/1999/xhtml" class="cye-disabled cye-lm"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Hibernate Annotations</title>

<link rel="stylesheet" href="./Annotations_RefGuide_files/hibernate-single.css" type="text/css">

 <style type="text/css">
    pre {
        font-family: "Trebuchet MS",Tahoma,Arial;
        font-size: 18px;
        font-weight: bold;
        border: 1px solid #960000;
        background-color: #000;
        padding: 5px;
        color: #808080;
    }
    </style> 
</head>

<body style="
    background-color: #c0c0c0;
    color: #000;
    font-size: 20px;
">
<div class="book" lang="en"><div class="titlepage"><div><p id="title"><a href="http://www.hibernate.org/" class="site_href"><strong>Hibernate.org</strong></a><a href="http://hibernate.org/Documentation/DocumentationOverview" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d0e2">Hibernate Annotations</a></h1></div><div><h2 class="subtitle"><a id="d0e2">Reference Guide</a></h2></div><div><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors"><a id="d0e2">by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Emmanuel</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Bernard</span></a></div><div class="editors"><div class="others"></div></div><div><p class="releaseinfo"><a id="d0e2">3.5.6-Final</a></p></div><div><p class="copyright"><a id="d0e2">Copyright Â© 2004 Red Hat Inc. and the various authors</a></p></div><div><p class="pubdate"><a id="d0e2">September 15, 2010</a></p></div></div><hr></div><div class="toc"><dl><dt><a id="d0e2"><span class="preface"></span></a><a href="#preface">Preface</a></dt><dt><span class="chapter"><a href="#d0e55">1. Setting up an annotations project</a></span></dt><dd><dl><dt><span class="section"><a href="#setup-requirements">1.1. Requirements</a></span></dt><dt><span class="section"><a href="#setup-configuration">1.2. Configuration</a></span></dt><dt><span class="section"><a href="#ann-setup-properties">1.3. Properties</a></span></dt><dt><span class="section"><a href="#d0e246">1.4. Logging</a></span></dt></dl></dd><dt><span class="chapter"><a href="#entity">2. Mapping Entities</a></span></dt><dd><dl><dt><span class="section"><a href="#entity-overview">2.1. Intro</a></span></dt><dt><span class="section"><a href="#entity-mapping">2.2. Mapping with JPA (Java Persistence Annotations)</a></span></dt><dd><dl><dt><span class="section"><a href="#entity-mapping-entity">2.2.1. Marking a POJO as persistent entity</a></span></dt><dt><span class="section"><a href="#entity-mapping-property">2.2.2. Mapping simple properties</a></span></dt><dt><span class="section"><a href="#entity-mapping-identifier">2.2.3. Mapping identifier properties</a></span></dt><dt><span class="section"><a href="#d0e1168">2.2.4. Mapping inheritance</a></span></dt><dt><span class="section"><a href="#entity-mapping-association">2.2.5. Mapping entity associations/relationships</a></span></dt><dt><span class="section"><a href="#d0e2177">2.2.6. Mapping composite primary keys and foreign keys to composite
      primary keys</a></span></dt><dt><span class="section"><a href="#d0e2235">2.2.7. Mapping secondary tables</a></span></dt><dt><span class="section"><a href="#d0e2298">2.2.8. Caching entities</a></span></dt></dl></dd><dt><span class="section"><a href="#entity-mapping-query">2.3. Mapping Queries</a></span></dt><dd><dl><dt><span class="section"><a href="#entity-mapping-query-hql">2.3.1. Mapping JP-QL/HQL queries</a></span></dt><dt><span class="section"><a href="#entity-mapping-query-native">2.3.2. Mapping native queries</a></span></dt></dl></dd><dt><span class="section"><a href="#entity-hibspec">2.4. Hibernate Annotation Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#entity-hibspec-entity">2.4.1. Entity</a></span></dt><dt><span class="section"><a href="#entity-hibspec-identifier">2.4.2. Identifier</a></span></dt><dt><span class="section"><a href="#entity-hibspec-property">2.4.3. Property</a></span></dt><dt><span class="section"><a href="#entity-hibspec-inheritance">2.4.4. Inheritance</a></span></dt><dt><span class="section"><a href="#entity-hibspec-singleassoc">2.4.5. Single Association related annotations</a></span></dt><dt><span class="section"><a href="#entity-hibspec-collection">2.4.6. Collection related annotations</a></span></dt><dt><span class="section"><a href="#entity-hibspec-cascade">2.4.7. Cascade</a></span></dt><dt><span class="section"><a href="#entity-hibspec-filters">2.4.8. Filters</a></span></dt><dt><span class="section"><a href="#entity-hibspec-query">2.4.9. Queries</a></span></dt><dt><span class="section"><a href="#entity-hibspec-customsql">2.4.10. Custom SQL for CRUD operations</a></span></dt><dt><span class="section"><a href="#d0e3498">2.4.11. Tuplizer</a></span></dt><dt><span class="section"><a href="#d0e3524">2.4.12. Fetch profiles</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#xml-overriding">3. Overriding metadata through XML</a></span></dt><dd><dl><dt><span class="section"><a href="#xml-overriding-principles">3.1. Principles</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3578">3.1.1. Global level metadata</a></span></dt><dt><span class="section"><a href="#xml-overriding-principles-entity">3.1.2. Entity level metadata</a></span></dt><dt><span class="section"><a href="#d0e3768">3.1.3. Property level metadata</a></span></dt><dt><span class="section"><a href="#d0e3813">3.1.4. Association level metadata</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#additionalmodules">4. Additional modules</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3875">4.1. Bean Validation</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3895">4.1.1. Adding Bean Validation</a></span></dt><dt><span class="section"><a href="#d0e3900">4.1.2. Configuration</a></span></dt><dt><span class="section"><a href="#d0e4011">4.1.3. Catching violations</a></span></dt><dt><span class="section"><a href="#d0e4044">4.1.4. Database schema</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4084">4.2. Hibernate Validator 3</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4090">4.2.1. Description</a></span></dt><dt><span class="section"><a href="#d0e4110">4.2.2. Integration with Hibernate Annotations</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4142">4.3. Hibernate Search</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4145">4.3.1. Description</a></span></dt><dt><span class="section"><a href="#d0e4156">4.3.2. Integration with Hibernate Annotations</a></span></dt></dl></dd></dl></dd></dl></div><div class="preface" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="preface">Preface</a></h2></div></div></div><p><a id="preface">Hibernate, like all other object/relational mapping tools, requires
    metadata that governs the transformation of data from one representation
    to the other. Hibernate Annotations provides annotation-based mapping metadata.
    </a></p><p><a id="preface">The JPA specification recognizes the interest and the success of
    the transparent object/relational mapping paradigm. It standardizes the
    basic APIs and the metadata needed for any object/relational persistence
    mechanism.
    <span class="emphasis"><em>Hibernate EntityManager</em></span> implements the
    programming interfaces and lifecycle rules as defined by the JPA
    persistence specification and together with <span class="emphasis"><em>Hibernate
    Annotations</em></span> offers a complete (and standalone) JPA persistence
    solution on top of the mature Hibernate Core. You may use a combination of
    all three together, annotations without JPA programming interfaces and
    lifecycle, or even pure native Hibernate Core, depending on the business and
    technical needs of your project. At all time you can fall back to
    Hibernate native APIs, or if required, even to native JDBC and SQL.</a></p><p><a id="preface">This release of <span class="emphasis"><em>Hibernate Annotations</em></span> is based
    on the final release of the JPA 2 specification (aka </a><a class="ulink" href="http://jcp.org/en/jsr/detail?id=317">JSR-317</a>) and
    supports all its features (including the optional ones). Hibernate
    specific features and extensions are also available through
    unstandardized, Hibernate specific annotations.</p><p>If you are moving from previous Hibernate Annotations versions,
    please have a look at <a class="ulink" href="http://www.hibernate.org/398.html">Java
    Persistence migration guide</a>.</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e55">Chapter&nbsp;1.&nbsp;Setting up an annotations project</a></h2></div></div></div><div class="toc"><dl><dt><a id="d0e55"><span class="section"></span></a><a href="#setup-requirements">1.1. Requirements</a></dt><dt><span class="section"><a href="#setup-configuration">1.2. Configuration</a></span></dt><dt><span class="section"><a href="#ann-setup-properties">1.3. Properties</a></span></dt><dt><span class="section"><a href="#d0e246">1.4. Logging</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="setup-requirements">1.1.&nbsp;Requirements</a></h2></div></div></div><div class="itemizedlist"><ul><li><p><a id="setup-requirements">Make sure you have JDK 5.0 or above installed.</a></p></li><li><p><a id="setup-requirements">Download and unpack the Hibernate Core distribution from the
        Hibernate website. Hibernate 3.5 and onward contains Hibernate
        Annotations.</a></p></li><li><p><a id="setup-requirements">Alternatively add the following dependency in your dependency
        manager (like Maven or Ivy). Here is an example</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><a id="setup-requirements">
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">project</span><span class="xml_plain">&nbsp;...</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;...</span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernate-annotations</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">${hibernate-core-version}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">project</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</a></pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="setup-configuration">1.2.&nbsp;Configuration</a></h2></div></div></div><p><a id="setup-configuration">First, set up your classpath (after you have created a new project
    in your favorite IDE): </a></p><div class="itemizedlist"><ul><li><p><a id="setup-configuration">Copy <code class="filename">hibernate3.jar</code> and the required 3rd
          party libraries available in
          <code class="filename">lib/required</code>.</a></p></li><li><p><a id="setup-configuration">Copy
          <code class="filename">lib/jpa/hibernate-jpa-2.0-api-1.0.0.Final.jar</code>
          to your classpath as well.</a></p></li></ul></div><p><a id="setup-configuration">Alternatively, import your pom.xml in your favorite IDE and let the
    dependencies be resolved automatically,</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="setup-configuration">What is hibernate-jpa-2.0-api-x.y.z.jar</a></h2><p><a id="setup-configuration">This is the JAR containing the JPA 2.0 API, it is fully compliant
      with the spec and passed the TCK signature test. You typically don't
      need it when you deploy your application in a Java EE 6 application
      server (like JBoss AS 6 for example).</a></p></div><p><a id="setup-configuration">We recommend you use </a><a class="ulink" href="http://validator.hibernate.org/">Hibernate Validator</a> and the
    Bean Validation specification capabilities as its integration with Java
    Persistence 2 has been standardized. Download Hibernate Validator 4 or
    above from the Hibernate website and add
    <code class="filename">hibernate-validator.jar</code> and
    <code class="filename">validation-api.jar</code> in your classpath. Alternatively
    add the following dependency in your <code class="filename">pom.xml</code>.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">project</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;...</span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernate-validator</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">${hibernate-validator-version}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;...</span><br>
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">project</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</pre><p>If you wish to use <a class="ulink" href="http://search.hibernate.org/">Hibernate Search</a>, download it
    from the Hibernate website and add
    <code class="filename">hibernate-search.jar</code> and its dependencies in your
    classpath. Alternatively add the following dependency in your
    <code class="filename">pom.xml</code>.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">project</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;...</span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">org.hibernate</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">groupId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">hibernate-search</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">artifactId</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">${hibernate-search-version}</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">version</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependency</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">dependencies</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;...</span><br>
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">project</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</pre><p>We recommend you use the JPA 2 APIs to bootstrap Hibernate (see the
    Hibernate EntityManager documentation for more information). If you use
    Hibernate Core and its native APIs read on.</p><p>If you boot Hibernate yourself, make sure to use the
    <code class="classname">AnnotationConfiguration</code> class instead of the
    <code class="classname">Configuration</code> class. Here is an example using the
    (legacy) <code class="classname">HibernateUtil</code> approach:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;hello</span><!-- <br/> --><span class="java_separator">;</span>

<!--  --><br><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_operator">*</span><span class="java_separator">;</span>
<!--  --><br><span class="java_keyword">import</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">cfg</span><span class="java_separator">.</span><span class="java_operator">*</span><span class="java_separator">;</span>
<!--  --><br><span class="java_keyword">import</span><span class="java_plain">&nbsp;test</span><span class="java_separator">.</span><span class="java_operator">*</span><span class="java_separator">;</span>
<!--  --><br><span class="java_keyword">import</span><span class="java_plain">&nbsp;test</span><span class="java_separator">.</span><span class="java_plain">animals</span><span class="java_separator">.</span><span class="java_type">Dog</span><span class="java_separator">;</span>

<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">HibernateUtil</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>

<!--  --><br><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_keyword">final</span><span class="java_plain">&nbsp;</span><span class="java_type">SessionFactory</span><span class="java_plain">&nbsp;sessionFactory</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sessionFactory&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span>AnnotationConfiguration()
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">configure</span><span class="java_separator">().</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Throwable</span><span class="java_plain">&nbsp;ex</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Log</span><span class="java_plain">&nbsp;exception</span><span class="java_operator">!</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throw</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ExceptionInInitializerError</span><span class="java_separator">(</span><span class="java_plain">ex</span><span class="java_separator">);</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_type">Session</span><span class="java_plain">&nbsp;getSession</span><span class="java_separator">()</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">HibernateException</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;sessionFactory</span><span class="java_separator">.</span><span class="java_plain">openSession</span><span class="java_separator">();</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>Interesting here is the use of
    <code class="classname">AnnotationConfiguration</code>. The packages and annotated
    classes are declared in your regular XML configuration file (usually
    <code class="filename">hibernate.cfg.xml</code>). Here is the equivalent of the
    above declaration:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_plain">!</span><span class="xml_attribute_name">DOCTYPE</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">hibernate-configuration</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">PUBLIC</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">"-//Hibernate/Hibernate&nbsp;Configuration&nbsp;DTD&nbsp;3.0//EN"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_value">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">hibernate-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">session-factory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">package</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"test.animals"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"test.Flight"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"test.Sky"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"test.Person"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">class</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"test.animals.Dog"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">mapping</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">resource</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"test/animals/orm.xml"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">session-factory</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">hibernate-configuration</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</pre><p>Note that you can mix the legacy hbm.xml use and the annotation
    approach. The resource element can be either an hbm file or an EJB3 XML
    deployment descriptor. The distinction is transparent for your
    configuration process.</p><p>Alternatively, you can define the annotated classes and packages
    using the programmatic API</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">sessionFactory&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span>AnnotationConfiguration()
                    .addPackage("test.animals") //the fully qualified package name
                    .addAnnotatedClass(Flight.class)
                    .addAnnotatedClass(Sky.class)
                    .addAnnotatedClass(Person.class)
                    .addAnnotatedClass(Dog.class)
                    .addResource("test/animals/orm.xml")
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">configure</span><span class="java_separator">()</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">buildSessionFactory</span><span class="java_separator">();</span></pre><p>There is no other difference in the way you use Hibernate APIs with
    annotations, except for this startup routine change or in the
    configuration file. You can use your favorite configuration method for
    other properties ( <code class="filename">hibernate.properties</code>,
    <code class="filename">hibernate.cfg.xml</code>, programmatic APIs, etc).</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>You can mix annotated persistent classes and classic
      <code class="filename">hbm.cfg.xml</code> declarations with the same
      <code class="classname">SessionFactory</code>. You can however not declare a
      class several times (whether annotated or through hbm.xml). You cannot
      mix configuration strategies (hbm vs annotations) in an entity hierarchy
      either.</p></div><p>To ease the migration process from hbm files to annotations, the
    configuration mechanism detects the mapping duplication between
    annotations and hbm files. HBM files are then prioritized over annotated
    metadata on a class to class basis. You can change the priority using
    <code class="literal">hibernate.mapping.precedence</code> property. The default is
    <code class="literal">hbm, class</code>, changing it to <code class="literal">class,
    hbm</code> will prioritize the annotated classes over hbm files when a
    conflict occurs.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ann-setup-properties">1.3.&nbsp;Properties</a></h2></div></div></div><p><a id="ann-setup-properties">On top of the Hibernate Core properties, Hibernate Annotations
    reacts to the following one.</a></p><div class="table"><a id="d0e200"><p class="title"><b>Table&nbsp;1.1.&nbsp;Hibernate Annotations specific properties</b></p><div class="table-contents"><table summary="Hibernate Annotations specific properties" border="1"><colgroup><col><col></colgroup><thead><tr><th align="center">Property</th><th align="center">Function</th></tr></thead><tbody><tr><td><code class="literal">hibernate.cache.default_cache_concurrency_strategy</code></td><td><p>Setting used to give the name of the default
              <code class="classname">org.hibernate.annotations.CacheConcurrencyStrategy</code>
              to use when either <code class="classname">@Cacheable</code>
              <code class="classname">@Cache</code>} is used.
              <code class="classname">@Cache(strategy="..")</code> is used to override
              this default.</p></td></tr><tr><td><code class="literal">hibernate.id.new_generator_mappings</code></td><td><p>true or false. Setting which indicates whether or
              not the new <code class="classname">IdentifierGenerator</code>
              implementations are used for AUTO, TABLE and SEQUENCE. Default
              to false to keep backward compatibility.</p></td></tr></tbody></table></div></a></div><p><a id="d0e200"><br class="table-break"></a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e200">Note</a></h2><p><a id="d0e200">We recommend all new projects to use
        <code class="code">hibernate.id.new_generator_mappings=true</code> as the new
        generators are more efficient and closer to the JPA 2 specification
        semantic. However they are not backward compatible with existing
        databases (if a sequence or a table is used for id generation).</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e246">1.4.&nbsp;Logging</a></h2></div></div></div><p><a id="d0e246">Hibernate Annotations utilizes </a><a class="ulink" href="http://www.slf4j.org/">Simple Logging Facade for Java</a> (SLF4J)
    in order to log various system events. SLF4J can direct your logging
    output to several logging frameworks (NOP, Simple, log4j version 1.2, JDK
    1.4 logging, JCL or logback) depending on your chosen binding. In order to
    setup logging properly you will need <code class="filename">slf4j-api.jar</code> in
    your classpath together with the jar file for your preferred binding -
    <code class="filename">slf4j-log4j12.jar</code> in the case of Log4J. See the SLF4J
    <a class="ulink" href="http://www.slf4j.org/manual.html">documentation</a> for more
    detail.</p><p>The logging categories interesting for Hibernate Annotations
    are:</p><div class="table"><a id="d0e265"><p class="title"><b>Table&nbsp;1.2.&nbsp;Hibernate Annotations Log Categories</b></p><div class="table-contents"><table summary="Hibernate Annotations Log Categories" border="1"><colgroup><col><col></colgroup><thead><tr><th align="center">Category</th><th align="center">Function</th></tr></thead><tbody><tr><td><span class="emphasis"><em>org.hibernate.cfg</em></span></td><td>Log all configuration related events (not only
            annotations).</td></tr></tbody></table></div></a></div><a id="d0e265"><br class="table-break"></a><p><a id="d0e265">For further category configuration refer to the </a><a class="ulink" href="http://www.hibernate.org/hib_docs/v3/reference/en/html_single/#configuration-logging">Logging</a>
    in the Hibernate Core documentation.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="entity">Chapter&nbsp;2.&nbsp;Mapping Entities</a></h2></div></div></div><div class="toc"><dl><dt><a id="entity"><span class="section"></span></a><a href="#entity-overview">2.1. Intro</a></dt><dt><span class="section"><a href="#entity-mapping">2.2. Mapping with JPA (Java Persistence Annotations)</a></span></dt><dd><dl><dt><span class="section"><a href="#entity-mapping-entity">2.2.1. Marking a POJO as persistent entity</a></span></dt><dt><span class="section"><a href="#entity-mapping-property">2.2.2. Mapping simple properties</a></span></dt><dt><span class="section"><a href="#entity-mapping-identifier">2.2.3. Mapping identifier properties</a></span></dt><dt><span class="section"><a href="#d0e1168">2.2.4. Mapping inheritance</a></span></dt><dt><span class="section"><a href="#entity-mapping-association">2.2.5. Mapping entity associations/relationships</a></span></dt><dt><span class="section"><a href="#d0e2177">2.2.6. Mapping composite primary keys and foreign keys to composite
      primary keys</a></span></dt><dt><span class="section"><a href="#d0e2235">2.2.7. Mapping secondary tables</a></span></dt><dt><span class="section"><a href="#d0e2298">2.2.8. Caching entities</a></span></dt></dl></dd><dt><span class="section"><a href="#entity-mapping-query">2.3. Mapping Queries</a></span></dt><dd><dl><dt><span class="section"><a href="#entity-mapping-query-hql">2.3.1. Mapping JP-QL/HQL queries</a></span></dt><dt><span class="section"><a href="#entity-mapping-query-native">2.3.2. Mapping native queries</a></span></dt></dl></dd><dt><span class="section"><a href="#entity-hibspec">2.4. Hibernate Annotation Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#entity-hibspec-entity">2.4.1. Entity</a></span></dt><dt><span class="section"><a href="#entity-hibspec-identifier">2.4.2. Identifier</a></span></dt><dt><span class="section"><a href="#entity-hibspec-property">2.4.3. Property</a></span></dt><dt><span class="section"><a href="#entity-hibspec-inheritance">2.4.4. Inheritance</a></span></dt><dt><span class="section"><a href="#entity-hibspec-singleassoc">2.4.5. Single Association related annotations</a></span></dt><dt><span class="section"><a href="#entity-hibspec-collection">2.4.6. Collection related annotations</a></span></dt><dt><span class="section"><a href="#entity-hibspec-cascade">2.4.7. Cascade</a></span></dt><dt><span class="section"><a href="#entity-hibspec-filters">2.4.8. Filters</a></span></dt><dt><span class="section"><a href="#entity-hibspec-query">2.4.9. Queries</a></span></dt><dt><span class="section"><a href="#entity-hibspec-customsql">2.4.10. Custom SQL for CRUD operations</a></span></dt><dt><span class="section"><a href="#d0e3498">2.4.11. Tuplizer</a></span></dt><dt><span class="section"><a href="#d0e3524">2.4.12. Fetch profiles</a></span></dt></dl></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="entity-overview">2.1.&nbsp;Intro</a></h2></div></div></div><p><a id="entity-overview">This section explains how to describe persistence mappings using
    Java Persistence 2.0 annotations as well as Hibernate-specific annotation
    extensions.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="entity-mapping">2.2.&nbsp;Mapping with JPA (Java Persistence Annotations)</a></h2></div></div></div><p><a id="entity-mapping">JPA entities are plain POJOs. Actually, they are Hibernate
    persistent entities. Their mappings are defined through JDK 5.0
    annotations instead of hbm.xml files. A JPA 2 XML descriptor syntax for
    overriding is defined as well). Annotations can be split in two
    categories, the logical mapping annotations (describing the object model,
    the association between two entities etc.) and the physical mapping
    annotations (describing the physical schema, tables, columns, indexes,
    etc). We will mix annotations from both categories in the following code
    examples.</a></p><p><a id="entity-mapping">JPA annotations are in the <code class="literal">javax.persistence.*</code>
    package. You favorite IDE can auto-complete annotations and their
    attributes for you (even without a specific "JPA" module, since JPA
    annotations are plain JDK 5 annotations).</a></p><p><a id="entity-mapping">A good an complete set of working examples can be found in the
    Hibernate Annotations test suite itself: most of the unit tests have been
    designed to represent a concrete example and be a source of inspiration
    for you. You can get the test suite sources in the distribution.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-mapping-entity">2.2.1.&nbsp;Marking a POJO as persistent entity</a></h3></div></div></div><p><a id="entity-mapping-entity">Every persistent POJO class is an entity and is declared using the
      <code class="literal">@Entity</code> annotation (at the class level):</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-entity"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Flight</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="entity-mapping-entity"><code class="literal">@Entity</code> declares the class as an entity (i.e. a
      persistent POJO class), <code class="literal">@Id</code> declares the identifier
      property of this entity. The other mapping declarations are implicit.
      The class Flight is mapped to the Flight table, using the column id as
      its primary key column.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="entity-mapping-entity">Note</a></h2><p><a id="entity-mapping-entity">The concept of configuration by exception is central to the JPA
        specification.</a></p></div><p><a id="entity-mapping-entity">Depending on whether you annotate fields or methods, the access
      type used by Hibernate will be <code class="literal">field</code> or
      <code class="literal">property</code>. The EJB3 spec requires that you declare
      annotations on the element type that will be accessed, i.e. the getter
      method if you use <code class="literal">property</code> access, the field if you
      use <code class="literal">field</code> access. Mixing annotations in both fields
      and methods should be avoided. Hibernate will guess the access type from
      the position of <code class="literal">@Id</code> or
      <code class="literal">@EmbeddedId</code>.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e348">2.2.1.1.&nbsp;Defining the table</a></h4></div></div></div><p><a id="d0e348"><code class="literal">@Table</code> is set at the class level; it allows
        you to define the table, catalog, and schema names for your entity
        mapping. If no <code class="literal">@Table</code> is defined the default values
        are used: the unqualified class name of the entity.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e348"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Table</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"tbl_sky"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Sky</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e348">The <code class="literal">@Table</code> element contains a
        <code class="literal">schema</code> and <code class="literal">catalog</code> attributes,
        if they need to be defined. You can also define unique constraints to
        the table using the <code class="literal">@UniqueConstraint</code> annotation in
        conjunction with <code class="literal">@Table</code> (for a unique constraint
        bound to a single column, it is recommended to use the
        <code class="code">@Column.unique</code> approach (refer to
        <code class="literal">@Column</code> for more information).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e348"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Table</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">name</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"tbl_sky"</span><!-- <br/> --><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;uniqueConstraints&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">@</span><span class="java_type">UniqueConstraint</span><span class="java_separator">(</span><span class="java_plain">columnNames</span><span class="java_operator">=</span><span class="java_separator">{</span><span class="java_literal">"month"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">"day"</span><span class="java_separator">})}</span>
<!--  --><br><span class="java_separator">)</span></a></pre><p><a id="d0e348">A unique constraint is applied to the tuple month, day. Note
        that the <code class="literal">columnNames</code> array refers to the logical
        column names.</a></p><p class="remark"><a id="d0e348"><i><span class="remark">The logical column name is defined by the Hibernate
        <code class="classname">NamingStrategy</code> implementation. The default JPA
        naming strategy uses the physical column name as the logical column
        name but it could be different if for example you append fld_ to all
        your columns using a custom <code class="classname">NamingStrategy</code>
        implementation. Note that the logical column name is not necessarily
        equals to the property name esp when the column name is explicitly
        set. Unless you override the <code class="classname">NamingStrategy</code>,
        you shouldn't worry about that.</span></i></a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-mapping-entity-version">2.2.1.2.&nbsp;Versioning for optimistic locking</a></h4></div></div></div><p><a id="entity-mapping-entity-version">You can add optimistic locking capability to an entity using the
        <code class="literal">@Version</code> annotation:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-entity-version"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Flight</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Version</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"OPTLOCK"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getVersion</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="entity-mapping-entity-version">The version property will be mapped to the
        <code class="literal">OPTLOCK</code> column, and the entity manager will use it
        to detect conflicting updates (preventing lost updates you might
        otherwise see with the last-commit-wins strategy).</a></p><p><a id="entity-mapping-entity-version">The version column may be a numeric (the recommended solution)
        or a timestamp. Hibernate supports any kind of type provided that you
        define and implement the appropriate
        <code class="classname">UserVersionType</code>.</a></p><p><a id="entity-mapping-entity-version">The application must not alter the version number set up by
        Hibernate in any way. To artificially increase the version number,
        check in Hibernate Entity Manager's reference documentation
        <code class="literal">LockModeType.OPTIMISTIC_FORCE_INCREMENT</code> or
        <code class="literal">LockModeType.PESSIMISTIC_FORCE_INCREMENT</code>.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-mapping-property">2.2.2.&nbsp;Mapping simple properties</a></h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e432">2.2.2.1.&nbsp;Declaring basic property mappings</a></h4></div></div></div><p><a id="d0e432">Every non static non transient property (field or method
        depending on the access type) of an entity is considered persistent,
        unless you annotate it as <code class="literal">@Transient</code>. Not having an
        annotation for your property is equivalent to the appropriate
        <code class="literal">@Basic</code> annotation. The <code class="literal">@Basic</code>
        annotation allows you to declare the fetching strategy for a
        property:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e432"><span class="java_keyword">public</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">transient</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">int</span><!-- <br/> --><span class="java_plain">&nbsp;counter</span><!-- <br/> --><span class="java_separator">;</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_operator">//</span><!-- <br/> --><span class="java_keyword">transient</span><!-- <br/> --><span class="java_plain">&nbsp;property</span>

<!--  --><br><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">persistent&nbsp;property</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Transient</span>
<!--  --><br><span class="java_type">String</span><span class="java_plain">&nbsp;getLengthInMeter</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_keyword">transient</span><span class="java_plain">&nbsp;property</span>

<!--  --><br><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;persistent&nbsp;property</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Basic</span>
<!--  --><br><span class="java_type">int</span><span class="java_plain">&nbsp;getLength</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;persistent&nbsp;property</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Basic</span><span class="java_separator">(</span><span class="java_plain">fetch&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">FetchType</span><span class="java_separator">.</span><span class="java_plain">LAZY</span><span class="java_separator">)</span>
<!--  --><br><span class="java_type">String</span><span class="java_plain">&nbsp;getDetailedComment</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;persistent&nbsp;property</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Temporal</span><span class="java_separator">(</span><span class="java_type">TemporalType</span><span class="java_separator">.</span><span class="java_plain">TIME</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">java</span><span class="java_separator">.</span><span class="java_plain">util</span><span class="java_separator">.</span><span class="java_type">Date</span><span class="java_plain">&nbsp;getDepartureTime</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;persistent&nbsp;property&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Enumerated</span><span class="java_separator">(</span><span class="java_type">EnumType</span><span class="java_separator">.</span><span class="java_plain">STRING</span><span class="java_separator">)</span>
<!--  --><br><span class="java_type">Starred</span><span class="java_plain">&nbsp;getNote</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">enum&nbsp;persisted&nbsp;as&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;in&nbsp;database</span></a></pre><p><a id="d0e432"><code class="literal">counter</code>, a transient field, and
        <code class="literal">lengthInMeter</code>, a method annotated as
        <code class="literal">@Transient</code>, and will be ignored by the entity
        manager. <code class="literal">name</code>, <code class="literal">length</code>, and
        <code class="literal">firstname</code> properties are mapped persistent and
        eagerly fetched (the default for simple properties). The
        <code class="literal">detailedComment</code> property value will be lazily
        fetched from the database once a lazy property of the entity is
        accessed for the first time. Usually you don't need to lazy simple
        properties (not to be confused with lazy association fetching).</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e432">Note</a></h2><p><a id="d0e432">To enable property level lazy fetching, your classes have to
          be instrumented: bytecode is added to the original class to enable
          such feature, please refer to the Hibernate reference documentation.
          If your classes are not instrumented, property level lazy loading is
          silently ignored.</a></p></div><p><a id="d0e432">The recommended alternative is to use the projection capability
        of JP-QL (Java Persistence Query Language) or Criteria queries.</a></p><p><a id="d0e432">JPA support property mapping of all basic types supported by
        Hibernate (all basic Java types , their respective wrappers and
        serializable classes). Hibernate Annotations support out of the box
        enum type mapping either into a ordinal column (saving the enum
        ordinal) or a string based column (saving the enum string
        representation): the persistence representation, defaulted to ordinal,
        can be overridden through the <code class="literal">@Enumerated</code>
        annotation as shown in the <code class="literal">note</code> property
        example.</a></p><p><a id="d0e432">In plain Java APIs, the temporal precision of time is not
        defined. When dealing with temporal data you might want to describe
        the expected precision in database. Temporal data can have
        <code class="literal">DATE</code>, <code class="literal">TIME</code>, or
        <code class="literal">TIMESTAMP</code> precision (ie the actual date, only the
        time, or both). Use the <code class="literal">@Temporal</code> annotation to
        fine tune that.</a></p><p><a id="d0e432"><code class="literal">@Lob</code> indicates that the property should be
        persisted in a Blob or a Clob depending on the property type:
        <code class="classname">java.sql.Clob</code>,
        <code class="classname">Character[]</code>, <code class="classname">char[]</code> and
        java.lang.<code class="classname">String</code> will be persisted in a Clob.
        <code class="classname">java.sql.Blob</code>, <code class="classname">Byte[]</code>,
        <code class="classname">byte[] </code>and serializable type will be persisted
        in a Blob.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><a id="d0e432">
<!--  --><br><span class="java_plain">@</span><span class="java_type">Lob</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getFullText</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;fullText</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Lob</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">byte</span><span class="java_separator">[]</span><span class="java_plain">&nbsp;getFullCode</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;fullCode</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;</span></a></pre><p><a id="d0e432">If the property type implements
        <code class="classname">java.io.Serializable</code> and is not a basic type,
        and if the property is not annotated with <code class="literal">@Lob</code>,
        then the Hibernate <code class="literal">serializable</code> type is
        used.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e535">2.2.2.2.&nbsp;Access type</a></h4></div></div></div><p><a id="d0e535">By default the access type of a class hierarchy is defined by
        the position of the <code class="classname">@Id</code> or
        <code class="classname">@EmbeddedId</code> annotations. If these annotations
        are on a field, then only fields are considered for persistence and
        the state is accessed via the field. If there annotations are on a
        getter, then only the getters are considered for persistence and the
        state is accessed via the getter/setter. That works well in practice
        and is the recommended approach.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e535">Note</a></h2><p><a id="d0e535">The placement of annotations within a class hierarchy has to
            be consistent (either field or on property) to be able to
            determine the default access type. It is recommended to stick to
            one single annotation placement strategy throughout your whole
            application.</a></p></div><p><a id="d0e535">However in some situations, you need to:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e535">force the access type of the entity hierarchy</a></p></li><li><p><a id="d0e535">override the access type of a specific entity in the class
            hierarchy</a></p></li><li><p><a id="d0e535">override the access type of an embeddable type</a></p></li></ul></div><p><a id="d0e535">The best use case is an embeddable class used by several
        entities that might not use the same access type. In this case it is
        better to force the access type at the embeddable class level.</a></p><p><a id="d0e535">To force the access type on a given class, use the
        <code class="classname">@Access</code> annotation as showed below:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e535"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Embedded</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;address</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;getAddress</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;address</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setAddress</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">address&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;address</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;address</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Embedded</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;getAddress</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;address</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setAddress</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">address&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;address</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Access</span><span class="java_separator">(</span><span class="java_type">AcessType</span><span class="java_separator">.</span><span class="java_plain">PROPERTY</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;street1</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getStreet1</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;street1</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setStreet1</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">street1&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;street1</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;hashCode</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">not&nbsp;persistent</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e535">You can also override the access type of a single property while
        keeping the other properties standard.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e535"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Transient</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Transient</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;orderId</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Access</span><span class="java_separator">(</span><span class="java_type">AccessType</span><span class="java_separator">.</span><span class="java_plain">PROPERTY</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getOrderNumber</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;userId&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">":"</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;orderId</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setOrderNumber</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">userId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">...;</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">orderId&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">...;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e535">In this example, the default access type is
        <code class="classname">FIELD</code> except for the
        <code class="literal">orderNumber</code> property. Note that the corresponding
        field, if any must be marked as <code class="classname">@Transient</code> or
        <code class="code">transient</code>.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e535">@org.hibernate.annotations.AccessType</a></h2><p><a id="d0e535">The annotation
          <code class="classname">@org.hibernate.annotations.AccessType</code> should
          be considered deprecated for FIELD and PROPERTY access. It is still
          useful however if you need to use a custom access type.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-mapping-property-column">2.2.2.3.&nbsp;Declaring column attributes</a></h4></div></div></div><p><a id="entity-mapping-property-column">The column(s) used for a property mapping can be defined using
        the <code class="literal">@Column</code> annotation. Use it to override default
        values (see the EJB3 specification for more information on the
        defaults). You can use this annotation at the property level for
        properties that are:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-mapping-property-column">not annotated at all</a></p></li><li><p><a id="entity-mapping-property-column">annotated with <code class="literal">@Basic</code></a></p></li><li><p><a id="entity-mapping-property-column">annotated with <code class="literal">@Version</code></a></p></li><li><p><a id="entity-mapping-property-column">annotated with <code class="literal">@Lob</code></a></p></li><li><p><a id="entity-mapping-property-column">annotated with <code class="literal">@Temporal</code></a></p></li></ul></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><a id="entity-mapping-property-column">
<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Flight</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">updatable&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"flight_name"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;nullable&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;length</span><span class="java_operator">=</span><span class="java_literal">50</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="entity-mapping-property-column">The <code class="literal">name</code> property is mapped to the
        <code class="literal">flight_name</code> column, which is not nullable, has a
        length of 50 and is not updatable (making the property
        immutable).</a></p><p><a id="entity-mapping-property-column">This annotation can be applied to regular properties as well as
        <code class="literal">@Id</code> or <code class="literal">@Version</code>
        properties.</a></p><div class="programlistingco"><pre class="programlisting"><a id="entity-mapping-property-column">@Column(
    name="colu<span xmlns="" class="co" id="hm1"><img src="./Annotations_RefGuide_files/1.png" alt="(1)"></span>mnName";
    boolean un<span xmlns="" class="co" id="hm2"><img src="./Annotations_RefGuide_files/2.png" alt="(2)"></span>ique() default false;
    boolean nu<span xmlns="" class="co" id="hm3"><img src="./Annotations_RefGuide_files/3.png" alt="(3)"></span>llable() default true;
    boolean in<span xmlns="" class="co" id="hm4"><img src="./Annotations_RefGuide_files/4.png" alt="(4)"></span>sertable() default true;
    boolean up<span xmlns="" class="co" id="hm5"><img src="./Annotations_RefGuide_files/5.png" alt="(5)"></span>datable() default true;
    String col<span xmlns="" class="co" id="hm6"><img src="./Annotations_RefGuide_files/6.png" alt="(6)"></span>umnDefinition() default "";
    String tab<span xmlns="" class="co" id="hm7"><img src="./Annotations_RefGuide_files/7.png" alt="(7)"></span>le() default "";
    int length<span xmlns="" class="co" id="hm8"><img src="./Annotations_RefGuide_files/8.png" alt="(8)"></span>() default 255;
    int precis<span xmlns="" class="co" id="hm9"><img src="./Annotations_RefGuide_files/9.png" alt="(9)"></span>ion() default 0; // decimal precision
    int scale(<span xmlns="" class="co" id="hm10"><img src="./Annotations_RefGuide_files/10.png" alt="(10)"></span>) default 0; // decimal scale</a></pre><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/1.png" alt="1" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">name</code> (optional): the column name
              (default to the property name)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/2.png" alt="2" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">unique</code> (optional): set a unique
              constraint on this column or not (default false)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/3.png" alt="3" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">nullable</code> (optional): set the column as
              nullable (default true).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/4.png" alt="4" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">insertable</code> (optional): whether or not
              the column will be part of the insert statement (default
              true)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/5.png" alt="5" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">updatable</code> (optional): whether or not
              the column will be part of the update statement (default
              true)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/6.png" alt="6" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">columnDefinition</code> (optional): override
              the sql DDL fragment for this particular column (non
              portable)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/7.png" alt="7" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">table</code> (optional): define the targeted
              table (default primary table)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/8.png" alt="8" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal"><code class="literal">length</code></code> (optional):
              column length (default 255)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/8.png" alt="8" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal"><code class="literal">precision</code></code>
              (optional): column decimal precision (default 0)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/10.png" alt="10" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal"><code class="literal">scale</code></code> (optional):
              column decimal scale if useful (default 0)</p></td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e714">2.2.2.4.&nbsp;Embedded objects (aka components)</a></h4></div></div></div><p><a id="d0e714">It is possible to declare an embedded component inside an entity
        and even override its column mapping. Component classes have to be
        annotated at the class level with the <code class="literal">@Embeddable</code>
        annotation. It is possible to override the column mapping of an
        embedded object for a particular entity using the
        <code class="literal">@Embedded</code> and <code class="literal">@AttributeOverride</code>
        annotation in the associated property:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e714"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Persistent</span><span class="java_plain">&nbsp;component&nbsp;using&nbsp;defaults</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;homeAddress</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Embedded</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverrides</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"iso2"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"bornIso2"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"name"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"bornCountryName"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;bornIn</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e714"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;city</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;nationality</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">no&nbsp;overriding&nbsp;here</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e714"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;iso2</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"countryName"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getIso2</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;iso2</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setIso2</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;iso2</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">iso2&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;iso2</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e714">An embeddable object inherits the access type of its owning
        entity (note that you can override that using the
        <code class="literal">@Access</code> annotation).</a></p><p><a id="d0e714">The <code class="literal">Person</code> entity has two component
        properties, <code class="literal">homeAddress</code> and
        <code class="literal">bornIn</code>. <code class="literal">homeAddress</code> property has
        not been annotated, but Hibernate will guess that it is a persistent
        component by looking for the <code class="literal">@Embeddable</code> annotation
        in the Address class. We also override the mapping of a column name
        (to <code class="literal">bornCountryName</code>) with the
        <code class="literal">@Embedded</code> and <code class="literal">@AttributeOverride
        </code>annotations for each mapped attribute of
        <code class="literal">Country</code>. As you can see, <code class="literal">Country
        </code>is also a nested component of <code class="literal">Address</code>,
        again using auto-detection by Hibernate and JPA defaults. Overriding
        columns of embedded objects of embedded objects is through dotted
        expressions.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e714"><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">Embedded</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverrides</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"city"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fld_city"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"nationality.iso2"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"nat_Iso2"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"nationality.name"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"nat_CountryName"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">nationality&nbsp;columns&nbsp;in&nbsp;homeAddress&nbsp;are&nbsp;overridden</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;homeAddress</span><span class="java_separator">;</span></a></pre><p><a id="d0e714">Hibernate Annotations supports something that is not explicitly
        supported by the JPA specification. You can annotate a embedded object
        with the <code class="literal">@MappedSuperclass</code> annotation to make the
        superclass properties persistent (see
        <code class="literal">@MappedSuperclass</code> for more informations).</a></p><p><a id="d0e714">You can also use association annotations in an embeddable object
        (ie <code class="literal">@OneToOne</code>, <code class="classname">@ManyToOne</code>,
        <code class="classname">@OneToMany</code> or <code class="literal">@ManyToMany</code>).
        To override the association columns you can use
        <code class="literal">@AssociationOverride</code>.</a></p><p><a id="d0e714">If you want to have the same embeddable object type twice in the
        same entity, the column name defaulting will not work as several
        embedded objects would share the same set of columns. In plain JPA,
        you need to override at least one set of columns. Hibernate, however,
        allows you to enhance the default naming mechanism through the
        <code class="classname">NamingStrategy</code> interface. You can write a
        strategy that prevent name clashing in such a situation.
        <code class="classname">DefaultComponentSafeNamingStrategy</code> is an
        example of this.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e809">2.2.2.5.&nbsp;Non-annotated property defaults</a></h4></div></div></div><p><a id="d0e809">If a property is not annotated, the following rules
        apply:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e809">If the property is of a single type, it is mapped as
              @Basic</a></p></li><li><p><a id="d0e809">Otherwise, if the type of the property is annotated as
              @Embeddable, it is mapped as @Embedded</a></p></li><li><p><a id="d0e809">Otherwise, if the type of the property is
              <code class="classname">Serializable</code>, it is mapped as
              <code class="classname">@Basic</code> in a column holding the object in
              its serialized version</a></p></li><li><p><a id="d0e809">Otherwise, if the type of the property is
              <code class="classname">java.sql.Clob</code> or
              <code class="classname">java.sql.Blob</code>, it is mapped as
              <code class="classname">@Lob</code> with the appropriate
              <code class="classname">LobType</code></a></p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-mapping-identifier">2.2.3.&nbsp;Mapping identifier properties</a></h3></div></div></div><p><a id="entity-mapping-identifier">The <code class="literal">@Id</code> annotation lets you define which
      property is the identifier of your entity. This property can be set by
      the application itself or be generated by Hibernate (preferred). You can
      define the identifier generation strategy thanks to the
      <code class="literal">@GeneratedValue</code> annotation.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e855">2.2.3.1.&nbsp;Generating the identifier property</a></h4></div></div></div><p><a id="d0e855">JPA defines five types of identifier generation
        strategies:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e855">AUTO - either identity column, sequence or table depending
            on the underlying DB</a></p></li><li><p><a id="d0e855">TABLE - table holding the id</a></p></li><li><p><a id="d0e855">IDENTITY - identity column</a></p></li><li><p><a id="d0e855">SEQUENCE - sequence</a></p></li><li><p><a id="d0e855">identity copy - the identity is copied from another
            entity</a></p></li></ul></div><p><a id="d0e855">Hibernate provides more id generators than the basic JPA ones.
        Check </a><a class="xref" href="#entity-hibspec" title="2.4.Â Hibernate Annotation Extensions">Section&nbsp;2.4, âHibernate Annotation Extensionsâ</a> for more informations.</p><p>The following example shows a sequence generator using the
        SEQ_STORE configuration (see below)</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Id</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">GeneratedValue</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">strategy</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">GenerationType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">SEQUENCE</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;generator</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"SEQ_STORE"</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>The next example uses the identity generator:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Id</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">GeneratedValue</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">strategy</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">GenerationType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">IDENTITY</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>The <code class="literal">AUTO</code> generator is the preferred type for
        portable applications (across several DB vendors). The identifier
        generation configuration can be shared for several
        <code class="literal">@Id</code> mappings with the generator attribute. There
        are several configurations available through
        <code class="literal">@SequenceGenerator</code> and
        <code class="literal">@TableGenerator</code>. The scope of a generator can be
        the application or the class. Class-defined generators are not visible
        outside the class and can override application level generators.
        Application level generators are defined at XML level (see <a class="xref" href="#xml-overriding" title="ChapterÂ 3.Â Overriding metadata through XML">Chapter&nbsp;3, <i>Overriding metadata through XML</i></a>):</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_plain">table</span><!-- <br/> --><span class="java_operator">-</span><!-- <br/> --><span class="java_plain">generator&nbsp;name</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"EMP_GEN"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table</span><span class="java_operator">=</span><span class="java_literal">"GENERATOR_TABLE"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pk</span><span class="java_operator">-</span><span class="java_plain">column</span><span class="java_operator">-</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"key"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="java_operator">-</span><span class="java_plain">column</span><span class="java_operator">-</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"hi"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pk</span><span class="java_operator">-</span><span class="java_plain">column</span><span class="java_operator">-</span><span class="java_plain">value</span><span class="java_operator">=</span><span class="java_literal">"EMP"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allocation</span><span class="java_operator">-</span><span class="java_plain">size</span><span class="java_operator">=</span><span class="java_literal">"20"</span><span class="java_operator">/&gt;</span>

<!--  --><br><span class="java_operator">//</span><span class="java_plain">and&nbsp;the&nbsp;annotation&nbsp;equivalent</span>

<!--  --><br><span class="java_plain">@javax</span><span class="java_separator">.</span><span class="java_plain">persistence</span><span class="java_separator">.</span><span class="java_type">TableGenerator</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"EMP_GEN"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;table</span><span class="java_operator">=</span><span class="java_literal">"GENERATOR_TABLE"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;pkColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"key"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;valueColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"hi"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;pkColumnValue</span><span class="java_operator">=</span><span class="java_literal">"EMP"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;allocationSize</span><span class="java_operator">=</span><span class="java_literal">20</span>
<!--  --><br><span class="java_separator">)</span>

<!--  --><br><span class="java_operator">&lt;</span><span class="java_plain">sequence</span><span class="java_operator">-</span><span class="java_plain">generator&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"SEQ_GEN"</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;sequence</span><span class="java_operator">-</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"my_sequence"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;allocation</span><span class="java_operator">-</span><span class="java_plain">size</span><span class="java_operator">=</span><span class="java_literal">"20"</span><span class="java_operator">/&gt;</span>

<!--  --><br><span class="java_operator">//</span><span class="java_plain">and&nbsp;the&nbsp;annotation&nbsp;equivalent</span>

<!--  --><br><span class="java_plain">@javax</span><span class="java_separator">.</span><span class="java_plain">persistence</span><span class="java_separator">.</span><span class="java_type">SequenceGenerator</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"SEQ_GEN"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;sequenceName</span><span class="java_operator">=</span><span class="java_literal">"my_sequence"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;allocationSize</span><span class="java_operator">=</span><span class="java_literal">20</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>If JPA XML (like <code class="filename">META-INF/orm.xml</code>) is used
        to define the generators, <code class="literal">EMP_GEN</code> and
        <code class="literal">SEQ_GEN</code> are application level generators.
        <code class="literal">EMP_GEN</code> defines a table based id generator using
        the hilo algorithm with a <code class="literal">max_lo</code> of 20. The hi
        value is kept in a <code class="literal">table</code>
        "<code class="literal">GENERATOR_TABLE</code>". The information is kept in a row
        where <code class="literal">pkColumnName</code> "key" is equals to
        <code class="literal">pkColumnValue</code> "<code class="literal">EMP</code>" and column
        <code class="literal">valueColumnName</code> "<code class="literal">hi</code>" contains
        the the next high value used.</p><p><code class="literal">SEQ_GEN</code> defines a sequence generator using a
        sequence named <code class="literal">my_sequence</code>. The allocation size
        used for this sequence based hilo algorithm is 20. Note that this
        version of Hibernate Annotations does not handle
        <code class="literal">initialValue</code> in the sequence generator. The default
        allocation size is 50, so if you want to use a sequence and pickup the
        value each time, you must set the allocation size to 1.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>We recommend all new projects to use
          <code class="code">hibernate.id.new_generator_mappings=true</code> as the new
          generators are more efficient and closer to the JPA 2 specification
          semantic. However they are not backward compatible with existing
          databases (if a sequence or a table is used for id generation). See
          <a class="xref" href="#ann-setup-properties" title="1.3.Â Properties">Section&nbsp;1.3, âPropertiesâ</a> for more information on how
          to activate them.</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Package level definition is not supported by the JPA
          specification. However, you can use the
          <code class="literal">@GenericGenerator</code> at the package level (see <a class="xref" href="#entity-hibspec-identifier" title="2.4.2.Â Identifier">Section&nbsp;2.4.2, âIdentifierâ</a>).</p></div><p>The next example shows the definition of a sequence generator in
        a class scope:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@javax</span><span class="java_separator">.</span><span class="java_plain">persistence</span><span class="java_separator">.</span><span class="java_type">SequenceGenerator</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"SEQ_STORE"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;sequenceName</span><span class="java_operator">=</span><span class="java_literal">"my_sequence"</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Store</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_separator">(</span><span class="java_plain">strategy</span><span class="java_operator">=</span><span class="java_type">GenerationType</span><span class="java_separator">.</span><span class="java_plain">SEQUENCE</span><span class="java_separator">,</span><span class="java_plain">&nbsp;generator</span><span class="java_operator">=</span><span class="java_literal">"SEQ_STORE"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>This class will use a sequence named my_sequence and the
        SEQ_STORE generator is not visible in other classes. Note that you can
        check the Hibernate Annotations tests in the
        <span class="package">org.hibernate.test.annotations.id</span> package for more
        examples.</p><p>Finally, you can ask Hibernate to copy the identifier from
        another associated entity. In the Hibernate jargon, it is known as a
        foreign generator but the JPA mapping reads better and is
        encouraged.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MedicalHistory</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">OneToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"person_id"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;patient</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></pre><p>Or alternatively</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MedicalHistory</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">MapsId</span><span class="java_plain">&nbsp;@</span><span class="java_type">OneToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"patient_id"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;patient</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></pre><p>If you are interested in more examples of "derived identities",
        the JPA 2 specification has a great set of them in chapter
        2.4.1.3.</p><p>But an identifier does not have to be a single property, it can
        be composed of several properties.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e991">2.2.3.2.&nbsp;Composite identifier</a></h4></div></div></div><p><a id="d0e991">You can define a composite primary key through several
        syntaxes:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e991">use a component type to represent the identifier and map it
            as a property in the entity: you then annotated the property as
            <code class="classname">@EmbeddedId</code>. The component type has to be
            <code class="classname">Serializable</code>.</a></p></li><li><p><a id="d0e991">map multiple properties as <code class="classname">@Id</code>
            properties: the identifier type is then the entity class itself
            and needs to be <code class="classname">Serializable</code>. This approach
            is unfortunately not standard and only supported by
            Hibernate.</a></p></li><li><p><a id="d0e991">map multiple properties as <code class="classname">@Id</code>
            properties and declare an external class to be the identifier
            type. This class, which needs to be
            <code class="classname">Serializable</code>, is declared on the entity via
            the <code class="classname">@IdClass</code> annotation. The identifier
            type must contain the same properties as the identifier properties
            of the entity: each property name must be the same, its type must
            be the same as well if the entity property is of a basic type, its
            type must be the type of the primary key of the associated entity
            if the entity property is an association (either a
            <code class="classname">@OneToOne</code> or a
            <code class="classname">@ManyToOne</code>).</a></p></li></ul></div><p><a id="d0e991">As you can see the last case is far from obvious. It has been
        inherited from the dark ages of EJB 2 for backward compatibilities and
        we recommend you not to use it (for simplicity sake).</a></p><p><a id="d0e991">Let's explore all three cases using examples.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="d0e1037">2.2.3.2.1.&nbsp;@EmbeddedId property</a></h5></div></div></div><p><a id="d0e1037">Here is a simple example of
          <code class="classname">@EmbeddedId</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1037"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"firstName"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fld_firstname"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;age</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1037">You can notice that the <code class="classname">UserId</code> class is
          serializable. To override the column mapping, use
          <code class="classname">@AttributeOverride</code>.</a></p><p><a id="d0e1037">An embedded id can itself contains the primary key of an
          associated entity.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1037"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;preferredCustomer</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">MapsId</span><span class="java_separator">(</span><span class="java_literal">"userId"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userfirstname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"firstName"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userlastname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"lastName"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;userId</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;age</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1037">In the embedded id object, the association is represented as
          the identifier of the associated entity. But you can link its value
          to a regular association in the entity via the
          <code class="classname">@MapsId</code> annotation. The
          <code class="classname">@MapsId</code> value correspond to the property name
          of the embedded id object containing the associated entity's
          identifier. In the database, it means that the
          <code class="literal">Customer.user</code> and the
          <code class="literal">CustomerId.userId</code> properties share the same
          underlying column (<code class="literal">user_fk</code> in this case).</a></p><p><a id="d0e1037">In practice, your code only sets the
          <code class="literal">Customer.user</code> property and the user id value is
          copied by Hibernate into the <code class="literal">CustomerId.userId</code>
          property.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2><a id="d0e1037">Warning</a></h2><p><a id="d0e1037">The id value can be copied as late as flush time, don't rely
            on it until after flush time.</a></p></div><p><a id="d0e1037">While not supported in JPA, Hibernate lets you place your
          association directly in the embedded id component (instead of having
          to use the <code class="classname">@MapsId</code> annotation).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1037"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;preferredCustomer</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userfirstname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"firstName"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userlastname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"lastName"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">})</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;age</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="d0e1094">2.2.3.2.2.&nbsp;Multiple @Id properties</a></h5></div></div></div><p><a id="d0e1094">Another, arguably more natural, approach is to place
          <code class="classname">@Id</code> on multiple properties of my entity. This
          approach is only supported by Hibernate but does not require an
          extra embeddable component.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1094"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">OneToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userfirstname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"firstName"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userlastname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"lastName"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;preferredCustomer</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;age</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1094">In this case <code class="classname">Customer</code> being it's own
          identifier representation, it must implement
          <code class="classname">Serializable</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="d0e1112">2.2.3.2.3.&nbsp;@IdClass</a></h5></div></div></div><p><a id="d0e1112"><code class="classname">@IdClass</code> on an entity points to the
          class (component) representing the identifier of the class. The
          properties marked <code class="classname">@Id</code> on the entity must have
          their corresponding property on the <code class="classname">@IdClass</code>.
          The return type of search twin property must be either identical for
          basic properties or must correspond to the identifier class of the
          associated entity for an association.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2><a id="d0e1112">Warning</a></h2><p><a id="d0e1112">This approach is inherited from the EJB 2 days and we
            recommend against its use. But, after all it's your application
            and Hibernate supports it.</a></p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1112"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">OneToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userfirstname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"firstName"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userlastname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"lastName"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">})</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;preferredCustomer</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;age</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1112"><code class="classname">Customer</code> and
          <code class="classname">CustomerId</code> do have the same properties
          <code class="literal">customerNumber</code> as well as
          <code class="literal">user</code>.</a></p><p><a id="d0e1112">While not JPA standard, Hibernate let's you declare the
          vanilla associated property in the
          <code class="classname">@IdClass</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1112"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">OneToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userfirstname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"firstName"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"userlastname_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"lastName"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_separator">})</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;preferredCustomer</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;user</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;age</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">UserId</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="d0e1150">2.2.3.2.4.&nbsp;Partial identifier generation</a></h5></div></div></div><p><a id="d0e1150">Hibernate supports the automatic generation of some of the
          identifier properties. Simply use the
          <code class="classname">@GeneratedValue</code> annotation on one or several
          id properties.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2><a id="d0e1150">Warning</a></h2><p><a id="d0e1150">The Hibernate team has always felt such a construct as
            fundamentally wrong. Try hard to fix your data model before using
            this feature.</a></p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1150"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">CustomerInventory</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">TableGenerator</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"inventory"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"U_SEQUENCES"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;pkColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"S_ID"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;valueColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"S_NEXTNUM"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;pkColumnValue&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"inventory"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;allocationSize&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">1000</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_separator">(</span><span class="java_plain">strategy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">GenerationType</span><span class="java_separator">.</span><span class="java_plain">TABLE</span><span class="java_separator">,</span><span class="java_plain">&nbsp;generator&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"inventory"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>


<!--  --><br><span class="java_plain">&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">ManyToOne</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">MERGE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1150">You can also generate properties inside an
          <code class="classname">@EmbeddedId</code> class.</a></p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1168">2.2.4.&nbsp;Mapping inheritance</a></h3></div></div></div><p><a id="d0e1168">EJB3 supports the three types of inheritance:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e1168">Table per Class Strategy: the &lt;union-class&gt; element in
          Hibernate</a></p></li><li><p><a id="d0e1168">Single Table per Class Hierarchy Strategy: the
          &lt;subclass&gt; element in Hibernate</a></p></li><li><p><a id="d0e1168">Joined Subclass Strategy: the &lt;joined-subclass&gt; element
          in Hibernate</a></p></li></ul></div><p><a id="d0e1168">The chosen strategy is declared at the class level of the top
      level entity in the hierarchy using the <code class="literal">@Inheritance</code>
      annotation.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1168">Note</a></h2><p><a id="d0e1168">Annotating interfaces is currently not supported.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1191">2.2.4.1.&nbsp;Table per class</a></h4></div></div></div><p><a id="d0e1191">This strategy has many drawbacks (esp. with polymorphic queries
        and associations) explained in the JPA spec, the Hibernate reference
        documentation, Hibernate in Action, and many other places. Hibernate
        work around most of them implementing this strategy using <code class="literal">SQL
        UNION</code> queries. It is commonly used for the top level of an
        inheritance hierarchy:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1191"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Inheritance</span><span class="java_separator">(</span><span class="java_plain">strategy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">InheritanceType</span><span class="java_separator">.</span><span class="java_plain">TABLE_PER_CLASS</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Flight</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1191">This strategy supports one-to-many associations provided that
        they are bidirectional. This strategy does not support the
        <code class="literal">IDENTITY</code> generator strategy: the id has to be
        shared across several tables. Consequently, when using this strategy,
        you should not use <code class="literal">AUTO </code>nor
        <code class="literal">IDENTITY</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1212">2.2.4.2.&nbsp;Single table per class hierarchy</a></h4></div></div></div><p><a id="d0e1212">All properties of all super- and subclasses are mapped into the
        same table, instances are distinguished by a special discriminator
        column:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1212"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Inheritance</span><span class="java_separator">(</span><span class="java_plain">strategy</span><span class="java_operator">=</span><span class="java_type">InheritanceType</span><span class="java_separator">.</span><span class="java_plain">SINGLE_TABLE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">DiscriminatorColumn</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"planetype"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;discriminatorType</span><span class="java_operator">=</span><span class="java_type">DiscriminatorType</span><span class="java_separator">.</span><span class="java_plain">STRING</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">DiscriminatorValue</span><span class="java_separator">(</span><span class="java_literal">"Plane"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Plane</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">DiscriminatorValue</span><span class="java_separator">(</span><span class="java_literal">"A320"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;A320&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Plane</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1212"><code class="classname">Plane</code> is the superclass, it defines the
        inheritance strategy <code class="literal">InheritanceType.SINGLE_TABLE</code>.
        It also defines the discriminator column through the
        <code class="literal">@DiscriminatorColumn</code> annotation, a discriminator
        column can also define the discriminator type. Finally, the
        <code class="literal">@DiscriminatorValue</code> annotation defines the value
        used to differentiate a class in the hierarchy. All of these
        attributes have sensible default values. The default name of the
        discriminator column is <code class="literal">DTYPE</code>. The default
        discriminator value is the entity name (as defined in
        <code class="literal">@Entity.name</code>) for DiscriminatorType.STRING.
        <code class="classname">A320</code> is a subclass; you only have to define
        discriminator value if you don't want to use the default value. The
        strategy and the discriminator type are implicit.</a></p><p><a id="d0e1212"><code class="literal">@Inheritance</code> and
        <code class="literal">@DiscriminatorColumn</code> should only be defined at the
        top of the entity hierarchy.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1248">2.2.4.3.&nbsp;Joined subclasses</a></h4></div></div></div><p><a id="d0e1248">The<code class="literal"> @PrimaryKeyJoinColumn</code> and
        <code class="literal">@PrimaryKeyJoinColumns</code> annotations define the
        primary key(s) of the joined subclass table:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1248"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Inheritance</span><span class="java_separator">(</span><span class="java_plain">strategy</span><span class="java_operator">=</span><span class="java_type">InheritanceType</span><span class="java_separator">.</span><span class="java_plain">JOINED</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Boat</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Ferry</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Boat</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">PrimaryKeyJoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"BOAT_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">AmericaCupClass</span><span class="java_plain">&nbsp;&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Boat</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1248">All of the above entities use the <code class="literal">JOINED</code>
        strategy, the <code class="literal">Ferry</code> table is joined with the
        <code class="literal">Boat</code> table using the same primary key names. The
        <code class="literal">AmericaCupClass</code> table is joined with
        <code class="literal">Boat</code> using the join condition <code class="code">Boat.id =
        AmericaCupClass.BOAT_ID</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1281">2.2.4.4.&nbsp;Inherit properties from superclasses</a></h4></div></div></div><p><a id="d0e1281">This is sometimes useful to share common properties through a
        technical or a business superclass without including it as a regular
        mapped entity (ie no specific table for this entity). For that purpose
        you can map them as <code class="literal">@MappedSuperclass</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1281"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">MappedSuperclass</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">BaseEntity</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Basic</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Temporal</span><span class="java_separator">(</span><span class="java_type">TemporalType</span><span class="java_separator">.</span><span class="java_plain">TIMESTAMP</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Date</span><span class="java_plain">&nbsp;getLastUpdate</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastUpdater</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">BaseEntity</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1281">In database, this hierarchy will be represented as an
        <code class="literal">Order</code> table having the <code class="literal">id</code>,
        <code class="literal">lastUpdate</code> and <code class="literal">lastUpdater</code>
        columns. The embedded superclass property mappings are copied into
        their entity subclasses. Remember that the embeddable superclass is
        not the root of the hierarchy though.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1281">Note</a></h2><p><a id="d0e1281">Properties from superclasses not mapped as
          <code class="literal">@MappedSuperclass</code> are ignored.</a></p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1281">Note</a></h2><p><a id="d0e1281">The default access type (field or methods) is used, unless you
          use the <code class="literal">@Access</code> annotation.</a></p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1281">Note</a></h2><p><a id="d0e1281">The same notion can be applied to
          <code class="literal">@Embeddable</code> objects to persist properties from
          their superclasses. You also need to use
          <code class="literal">@MappedSuperclass</code> to do that (this should not be
          considered as a standard EJB3 feature though)</a></p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1281">Note</a></h2><p><a id="d0e1281">It is allowed to mark a class as
          <code class="literal">@MappedSuperclass</code> in the middle of the mapped
          inheritance hierarchy.</a></p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1281">Note</a></h2><p><a id="d0e1281">Any class in the hierarchy non annotated with
          <code class="literal">@MappedSuperclass</code> nor <code class="literal">@Entity</code>
          will be ignored.</a></p></div><p><a id="d0e1281">You can override columns defined in entity superclasses at the
        root entity level using the <code class="literal">@AttributeOverride</code>
        annotation.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1281"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">MappedSuperclass</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">FlyingObject</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getAltitude</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;altitude</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Transient</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;getMetricAltitude</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;metricAltitude</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">PropulsionType</span><span class="java_plain">&nbsp;getPropulsion</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;metricAltitude</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"altitude"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fld_altitude"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">AssociationOverride</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"propulsion"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fld_propulsion_fk"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Plane</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">FlyingObject</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1281">The <code class="literal">altitude</code> property will be persisted in an
        <code class="literal">fld_altitude</code> column of table
        <code class="literal">Plane</code> and the propulsion association will be
        materialized in a <code class="literal">fld_propulsion_fk</code> foreign key
        column.</a></p><p><a id="d0e1281">You can define <code class="literal">@AttributeOverride</code>(s) and
        <code class="literal">@AssociationOverride</code>(s) on
        <code class="literal">@Entity</code> classes,
        <code class="literal">@MappedSuperclass</code> classes and properties pointing
        to an <code class="literal">@Embeddable</code> object.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-mapping-association">2.2.5.&nbsp;Mapping entity associations/relationships</a></h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1382">2.2.5.1.&nbsp;One-to-one</a></h4></div></div></div><p><a id="d0e1382">You can associate entities through a one-to-one relationship
        using <code class="literal">@OneToOne</code>. There are three cases for
        one-to-one associations: either the associated entities share the same
        primary keys values, a foreign key is held by one of the entities
        (note that this FK column in the database should be constrained unique
        to simulate one-to-one multiplicity), or a association table is used
        to store the link between the 2 entities (a unique constraint has to
        be defined on each fk to ensure the one to one multiplicity).</a></p><p><a id="d0e1382">First, we map a real one-to-one association using shared primary
        keys:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1382"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Body</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PrimaryKeyJoinColumn</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Heart</span><span class="java_plain">&nbsp;getHeart</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;heart</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1382"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Heart</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...}</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1382">The <code class="literal">@PrimaryKeyJoinColumn</code> annotation does say
        that the primary key of the entity is used as the foreign key value to
        the associated entity.</a></p><p><a id="d0e1382">In the following example, the associated entities are linked
        through an explicit foreign key column:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1382"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"passport_fk"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Passport</span><span class="java_plain">&nbsp;getPassport</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Passport</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span><span class="java_separator">(</span><span class="java_plain">mappedBy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"passport"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;getOwner</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1382">A <code class="classname">Customer</code> is linked to a
        <code class="classname">Passport</code>, with a foreign key column named
        <code class="literal">passport_fk</code> in the <code class="literal">Customer</code>
        table. The join column is declared with the
        <code class="literal">@JoinColumn</code> annotation which looks like the
        <code class="literal">@Column</code> annotation. It has one more parameters
        named <code class="literal">referencedColumnName</code>. This parameter declares
        the column in the targeted entity that will be used to the join. Note
        that when using
        <code class="literal"><code class="literal">referencedColumnName</code></code> to a non
        primary key column, the associated class has to be
        <code class="classname">Serializable</code>. Also note that the
        <code class="literal"><code class="literal">referencedColumnName</code></code> to a non
        primary key column has to be mapped to a property having a single
        column (other cases might not work).</a></p><p><a id="d0e1382">The association may be bidirectional. In a bidirectional
        relationship, one of the sides (and only one) has to be the owner: the
        owner is responsible for the association column(s) update. To declare
        a side as <span class="emphasis"><em>not</em></span> responsible for the relationship,
        the attribute <code class="literal">mappedBy</code> is used.
        <code class="literal">mappedBy</code> refers to the property name of the
        association on the owner side. In our case, this is
        <code class="literal">passport</code>. As you can see, you don't have to (must
        not) declare the join column since it has already been declared on the
        owners side.</a></p><p><a id="d0e1382">If no <code class="literal">@JoinColumn</code> is declared on the owner
        side, the defaults apply. A join column(s) will be created in the
        owner table and its name will be the concatenation of the name of the
        relationship in the owner side, <span class="keycap"><strong>_</strong></span> (underscore), and
        the name of the primary key column(s) in the owned side. In this
        example <code class="literal">passport_id</code> because the property name is
        <code class="literal">passport</code> and the column id of <code class="literal">Passport
        </code>is <code class="literal">id</code>.</a></p><p><a id="d0e1382">The third possibility (using an association table) is quite
        exotic.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1382"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"CustomerPassports"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"customer_fk"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"passport_fk"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Passport</span><span class="java_plain">&nbsp;getPassport</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Passport</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToOne</span><span class="java_separator">(</span><span class="java_plain">mappedBy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"passport"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;getOwner</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1382">A <code class="classname">Customer</code> is linked to a
        <code class="classname">Passport</code> through a association table named
        <code class="literal">CustomerPassports</code> ; this association table has a
        foreign key column named <code class="literal">passport_fk</code> pointing to
        the <code class="literal">Passport</code> table (materialized by the
        <code class="literal">inverseJoinColumn</code>, and a foreign key column named
        <code class="literal">customer_fk</code> pointing to the
        <code class="literal">Customer</code> table materialized by the
        <code class="literal">joinColumns</code> attribute.</a></p><p><a id="d0e1382">You must declare the join table name and the join columns
        explicitly in such a mapping.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1508">2.2.5.2.&nbsp;Many-to-one</a></h4></div></div></div><p><a id="d0e1508">Many-to-one associations are declared at the property level with
        the annotation <code class="literal">@ManyToOne</code>:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1508"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span><!-- <br/> --><span class="java_separator">()</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Flight</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span><span class="java_separator">(</span><span class="java_plain">&nbsp;cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">PERSIST</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">MERGE</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"COMP_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Company</span><span class="java_plain">&nbsp;getCompany</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;company</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1508">The <code class="literal">@JoinColumn</code> attribute is optional, the
        default value(s) is like in one to one, the concatenation of the name
        of the relationship in the owner side, <span class="keycap"><strong>_</strong></span>
        (underscore), and the name of the primary key column in the owned
        side. In this example <code class="literal">company_id</code> because the
        property name is <code class="literal">company</code> and the column id of
        Company is <code class="literal">id</code>.</a></p><p><a id="d0e1508"><code class="literal">@ManyToOne</code> has a parameter named
        <code class="literal">targetEntity</code> which describes the target entity
        name. You usually don't need this parameter since the default value
        (the type of the property that stores the association) is good in
        almost all cases. However this is useful when you want to use
        interfaces as the return type instead of the regular entity.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1508"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Flight</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span><span class="java_separator">(</span><span class="java_plain">&nbsp;cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">PERSIST</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">MERGE</span><span class="java_separator">},</span><span class="java_plain">&nbsp;targetEntity</span><span class="java_operator">=</span><span class="java_type">CompanyImpl</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"COMP_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Company</span><span class="java_plain">&nbsp;getCompany</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;company</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">Company</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1508">You can also map a many-to-one association through an
        association table. This association table described by the
        <code class="literal">@JoinTable</code> annotation will contains a foreign key
        referencing back the entity table (through
        <code class="literal">@JoinTable.joinColumns</code>) and a a foreign key
        referencing the target entity table (through
        <code class="literal">@JoinTable.inverseJoinColumns</code>).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1508"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Flight</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span><span class="java_separator">(</span><span class="java_plain">&nbsp;cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">PERSIST</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">MERGE</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"Flight_Company"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"FLIGHT_ID"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"COMP_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Company</span><span class="java_plain">&nbsp;getCompany</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;company</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-mapping-association-collections">2.2.5.3.&nbsp;Collections</a></h4></div></div></div><p><a id="entity-mapping-association-collections">You can map <code class="classname">Collection</code>,
        <code class="classname">List</code>, <code class="classname">Map</code> and
        <code class="classname">Set</code> pointing to associated entities as
        one-to-many or many-to-many associations using the
        <code class="classname">@OneToMany</code> or
        <code class="classname">@ManyToMany</code> annotation respectively. If the
        collection is of a basic type or of an embeddable type, use
        <code class="classname">@ElementCollection</code>. We will describe that in
        more detail in the following subsections.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="entity-mapping-association-collection-onetomany">2.2.5.3.1.&nbsp;One-to-many</a></h5></div></div></div><p><a id="entity-mapping-association-collection-onetomany">One-to-many associations are declared at the property level
          with the annotation <code class="literal">@OneToMany</code>. One to many
          associations may be bidirectional.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="d0e1591">2.2.5.3.1.1.&nbsp;Bidirectional</a></h6></div></div></div><p><a id="d0e1591">Since many to one are (almost) always the owner side of a
            bidirectional relationship in the JPA spec, the one to many
            association is annotated by
            <code class="literal">@OneToMany(mappedBy=...)</code></a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1591"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Troop</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">mappedBy</span><span class="java_operator">=</span><span class="java_literal">"troop"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Soldier</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getSoldiers</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Soldier</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"troop_fk"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Troop</span><span class="java_plain">&nbsp;getTroop</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1591"><code class="classname">Troop</code> has a bidirectional one to many
            relationship with <code class="literal">Soldier</code> through the
            <code class="literal">troop</code> property. You don't have to (must not)
            define any physical mapping in the <code class="literal">mappedBy</code>
            side.</a></p><p><a id="d0e1591">To map a bidirectional one to many, with the one-to-many
            side as the owning side, you have to remove the
            <code class="literal">mappedBy</code> element and set the many to one
            <code class="literal">@JoinColumn</code> as insertable and updatable to
            false. This solution is not optimized and will produce some
            additional UPDATE statements.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1591"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Troop</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"troop_fk"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">we&nbsp;need&nbsp;to&nbsp;duplicate&nbsp;the&nbsp;physical&nbsp;information</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Soldier</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getSoldiers</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Soldier</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"troop_fk"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;insertable</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;updatable</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Troop</span><span class="java_plain">&nbsp;getTroop</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="d0e1623">2.2.5.3.1.2.&nbsp;Unidirectional</a></h6></div></div></div><p><a id="d0e1623">A unidirectional one to many using a foreign key column in
            the owned entity is not that common and not really recommended. We
            strongly advise you to use a join table for this kind of
            association (as explained in the next section). This kind of
            association is described through a
            <code class="literal">@JoinColumn</code></a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1623"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">cascade</span><span class="java_operator">=</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">,</span><span class="java_plain">&nbsp;fetch</span><span class="java_operator">=</span><span class="java_type">FetchType</span><span class="java_separator">.</span><span class="java_plain">EAGER</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"CUST_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Ticket</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getTickets</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Ticket</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">no&nbsp;bidir</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1623"><code class="literal">Customer</code> describes a unidirectional
            relationship with <code class="literal">Ticket</code> using the join column
            <code class="literal">CUST_ID</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="d0e1642">2.2.5.3.1.3.&nbsp;Unidirectional with join table</a></h6></div></div></div><p><a id="d0e1642">A unidirectional one to many with join table is much
            preferred. This association is described through an
            <code class="literal">@JoinTable</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1642"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Trainer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"TrainedMonkeys"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"trainer_id"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"monkey_id"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Monkey</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getTrainedMonkeys</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Monkey</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">no&nbsp;bidir</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1642"><code class="literal">Trainer</code> describes a unidirectional
            relationship with <code class="classname">Monkey</code> using the join
            table <code class="classname">TrainedMonkeys</code>, with a foreign key
            <code class="literal">trainer_id</code> to <code class="literal">Trainer</code>
            (<code class="literal">joinColumns</code>) and a foreign key
            <code class="literal">monkey_id</code> to <code class="literal">Monkey</code>
            (<code class="literal">inversejoinColumns</code>).</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="entity-mapping-association-collection-manytomany-default">2.2.5.3.1.4.&nbsp;Defaults</a></h6></div></div></div><p><a id="entity-mapping-association-collection-manytomany-default">Without describing any physical mapping, a unidirectional
            one to many with join table is used. The table name is the
            concatenation of the owner table name, <span class="keycap"><strong>_</strong></span>, and the
            other side table name. The foreign key name(s) referencing the
            owner table is the concatenation of the owner table,
            <span class="keycap"><strong>_</strong></span>, and the owner primary key column(s) name. The
            foreign key name(s) referencing the other side is the
            concatenation of the owner property name, <span class="keycap"><strong>_</strong></span>, and
            the other side primary key column(s) name. A unique constraint is
            added to the foreign key referencing the other side table to
            reflect the one to many.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-association-collection-manytomany-default"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Trainer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Tiger</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getTrainedTigers</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Tiger</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">no&nbsp;bidir</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="entity-mapping-association-collection-manytomany-default"><code class="classname">Trainer</code> describes a unidirectional
            relationship with <code class="classname">Tiger</code> using the join
            table <code class="literal">Trainer_Tiger</code>, with a foreign key
            <code class="literal">trainer_id</code> to <code class="literal">Trainer</code> (table
            name, <span class="keycap"><strong>_</strong></span>, trainer id) and a foreign key
            <code class="literal">trainedTigers_id</code> to <code class="literal">Monkey</code>
            (property name, <span class="keycap"><strong>_</strong></span>, Tiger primary column).</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="eentity-mapping-association-collection-manytomany">2.2.5.3.2.&nbsp;Many-to-many</a></h5></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="d0e1727">2.2.5.3.2.1.&nbsp;Definition</a></h6></div></div></div><p><a id="d0e1727">A many-to-many association is defined logically using the
            <code class="literal">@ManyToMany</code> annotation. You also have to
            describe the association table and the join conditions using the
            <code class="literal">@JoinTable</code> annotation. If the association is
            bidirectional, one side has to be the owner and one side has to be
            the inverse end (ie. it will be ignored when updating the
            relationship values in the association table):</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1727"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Employer</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetEntity</span><span class="java_operator">=</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">test</span><span class="java_separator">.</span><span class="java_plain">metadata</span><span class="java_separator">.</span><span class="java_plain">manytomany</span><span class="java_separator">.</span><span class="java_type">Employee</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cascade</span><span class="java_operator">=</span><span class="java_separator">{</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">PERSIST</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">MERGE</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"EMPLOYER_EMPLOYEE"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;joinColumns</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"EMPER_ID"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"EMPEE_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Collection</span><span class="java_plain">&nbsp;getEmployees</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;employees</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1727"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Employee</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">PERSIST</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">MERGE</span><span class="java_separator">},</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mappedBy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"employees"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Employer</span><span class="java_separator">.</span><span class="java_keyword">class</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Collection</span><span class="java_plain">&nbsp;getEmployers</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;employers</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1727">We've already shown the many declarations and the detailed
            attributes for associations. We'll go deeper in the
            <code class="literal">@JoinTable</code> description, it defines a
            <code class="literal">name</code>, an array of join columns (an array in
            annotation is defined using { A, B, C }), and an array of inverse
            join columns. The latter ones are the columns of the association
            table which refer to the <code class="classname">Employee</code> primary
            key (the "other side").</a></p><p><a id="d0e1727">As seen previously, the other side don't have to (must not)
            describe the physical mapping: a simple
            <code class="literal">mappedBy</code> argument containing the owner side
            property name bind the two.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="d0e1758">2.2.5.3.2.2.&nbsp;Default values</a></h6></div></div></div><p><a id="d0e1758">As any other annotations, most values are guessed in a many
            to many relationship. Without describing any physical mapping in a
            unidirectional many to many the following rules applied. The table
            name is the concatenation of the owner table name,
            <span class="keycap"><strong>_</strong></span> and the other side table name. The foreign key
            name(s) referencing the owner table is the concatenation of the
            owner table name, <span class="keycap"><strong>_</strong></span> and the owner primary key
            column(s). The foreign key name(s) referencing the other side is
            the concatenation of the owner property name, <span class="keycap"><strong>_</strong></span>,
            and the other side primary key column(s). These are the same rules
            used for a unidirectional one to many relationship.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><a id="d0e1758">
<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Store</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">PERSIST</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">City</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getImplantedIn</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">City</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">no&nbsp;bidirectional&nbsp;relationship</span>
<!--  --><br><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1758">A <code class="literal">Store_City</code> is used as the join table.
            The <code class="literal">Store_id</code> column is a foreign key to the
            <code class="literal">Store</code> table. The
            <code class="literal">implantedIn_id</code> column is a foreign key to the
            <code class="literal">City</code> table.</a></p><p><a id="d0e1758">Without describing any physical mapping in a bidirectional
            many to many the following rules applied. The table name is the
            concatenation of the owner table name, <span class="keycap"><strong>_</strong></span> and the
            other side table name. The foreign key name(s) referencing the
            owner table is the concatenation of the other side property name,
            <span class="keycap"><strong>_</strong></span>, and the owner primary key column(s). The
            foreign key name(s) referencing the other side is the
            concatenation of the owner property name, <span class="keycap"><strong>_</strong></span>, and
            the other side primary key column(s). These are the same rules
            used for a unidirectional one to many relationship.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1758"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Store</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">PERSIST</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">MERGE</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Customer</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getCustomers</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">mappedBy</span><span class="java_operator">=</span><span class="java_literal">"customers"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Store</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getStores</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e1758">A <code class="literal">Store_Customer</code> is used as the join
            table. The <code class="literal">stores_id</code> column is a foreign key to
            the <code class="literal">Store</code> table. The
            <code class="literal">customers_id</code> column is a foreign key to the
            <code class="literal">Customer</code> table.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="d0e1821">2.2.5.3.3.&nbsp;Collection of basic types or embeddable objects</a></h5></div></div></div><p><a id="d0e1821">In some simple situation, do don't need to associate two
          entities but simply create a collection of basic types or embeddable
          objects. Use the <code class="classname">@ElementCollection</code> in this
          case.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1821"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastname</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ElementCollection</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">CollectionTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"Nicknames"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;joinColumns</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"user_id"</span><span class="java_separator">))</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"nickname"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getNicknames</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1821">The collection table holding the collection data is set using
          the <code class="classname">@CollectionTable</code> annotation. If omitted
          the collection table name default to the concatenation of the name
          of the containing entity and the name of the collection attribute,
          separated by an underscore: in our example, it would be
          <code class="literal">User_nicknames</code>.</a></p><p><a id="d0e1821">The column holding the basic type is set using the
          <code class="classname">@Column</code> annotation. If omitted, the column
          name defaults to the property name: in our example, it would be
          <code class="literal">nicknames</code>.</a></p><p><a id="d0e1821">But you are not limited to basic types, the collection type
          can be any embeddable object. To override the columns of the
          embeddable object in the collection table, use the
          <code class="classname">@AttributeOverride</code> annotation.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e1821"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastname</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ElementCollection</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">CollectionTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"Addresses"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;joinColumns</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"user_id"</span><span class="java_separator">))</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverrides</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"street1"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fld_street"</span><span class="java_separator">))</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Address</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getAddresses</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getStreet1</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{...}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e1821">Such an embeddable object cannot contains a collection
          itself.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1821">Note</a></h2><p><a id="d0e1821">in <code class="classname">@AttributeOverride</code>, you must use
            the <code class="literal">value.</code> prefix to override properties of the
            embeddable object used in the map value and the
            <code class="literal">key.</code> prefix to override properties of the
            embeddable object used in the map key.</a></p><pre xmlns="" class="JAVA"><!-- <br/> --><a id="d0e1821"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">User</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ElementCollection</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverrides</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"key.street1"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fld_street"</span><span class="java_separator">)),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AttributeOverride</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"value.stars"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fld_note"</span><span class="java_separator">))</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">Address</span><span class="java_separator">,</span><span class="java_type">Rating</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getFavHomes</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span></a></pre></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e1821">Note</a></h2><p><a id="d0e1821">We recommend you to migrate from
            <code class="classname">@org.hibernate.annotations.CollectionOfElements</code>
            to the new <code class="classname">@ElementCollection</code>
            annotation.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="entity-mapping-association-collections-overview">2.2.5.3.4.&nbsp;Indexed collections (List, Map)</a></h5></div></div></div><p><a id="entity-mapping-association-collections-overview">Lists can be mapped in two different ways:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-mapping-association-collections-overview">as ordered lists, the order is not materialized in the
              database</a></p></li><li><p><a id="entity-mapping-association-collections-overview">as indexed lists, the order is materialized in the
              database</a></p></li></ul></div><p><a id="entity-mapping-association-collections-overview">To order lists in memory, add
          <code class="literal">@javax.persistence.OrderBy</code> to your property. This
          annotation takes into parameter a list of comma separated properties
          (of the target entity) and order the collection accordingly (eg
          <code class="code">firstname asc, age desc</code>), if the string is empty, the
          collection will be ordered by the primary key of the target
          entity.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-association-collections-overview"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">mappedBy</span><span class="java_operator">=</span><span class="java_literal">"customer"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OrderBy</span><span class="java_separator">(</span><span class="java_literal">"number"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getOrders</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setOrders</span><span class="java_separator">(</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">orders&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getNumber</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setNumber</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">number&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCustomer</span><span class="java_separator">(</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">customer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_operator">--</span><span class="java_plain">&nbsp;</span><span class="java_type">Table</span><span class="java_plain">&nbsp;schema</span>
<!--  --><br><span class="java_operator">|-------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|-------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;customer_id&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|-------------|</span></a></pre><p><a id="entity-mapping-association-collections-overview">To store the index value in a dedicated column, use the
          <code class="classname">@javax.persistence.OrderColumn</code> annotation on
          your property. This annotations describes the column name and
          attributes of the column keeping the index value. This column is
          hosted on the table containing the association foreign key. If the
          column name is not specified, the default is the name of the
          referencing property, followed by underscore, followed by
          <code class="literal">ORDER</code> (in the following example, it would be
          <code class="literal">orders_ORDER</code>).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-association-collections-overview"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">mappedBy</span><span class="java_operator">=</span><span class="java_literal">"customer"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OrderColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_literal">"orders_index"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getOrders</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setOrders</span><span class="java_separator">(</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">orders&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getNumber</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setNumber</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">number&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCustomer</span><span class="java_separator">(</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">customer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_operator">--</span><span class="java_plain">&nbsp;</span><span class="java_type">Table</span><span class="java_plain">&nbsp;schema</span>
<!--  --><br><span class="java_operator">|--------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|--------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;customer_id&nbsp;&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;orders_index&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|--------------|</span></a></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="entity-mapping-association-collections-overview">Note</a></h2><p><a id="entity-mapping-association-collections-overview">We recommend you to convert
            <code class="classname">@org.hibernate.annotations.IndexColumn</code>
            usages to <code class="classname">@OrderColumn</code> unless you are
            making use of the base property. The <code class="literal">base</code>
            property lets you define the index value of the first element (aka
            as base index). The usual value is <code class="literal">0</code> or
            <code class="literal">1</code>. The default is 0 like in Java.</a></p></div><p><a id="entity-mapping-association-collections-overview">Likewise, maps can borrow their keys from one of the
          associated entity properties or have dedicated columns to store an
          explicit key.</a></p><p><a id="entity-mapping-association-collections-overview">To use one of the target entity property as a key of the map,
          use <code class="literal">@MapKey(name="myProperty")</code>
          (<code class="literal">myProperty</code> is a property name in the target
          entity). When using <code class="literal">@MapKey</code> (without property
          name), the target entity primary key is used. The map key uses the
          same column as the property pointed out: there is no additional
          column defined to hold the map key, and it does make sense since the
          map key actually represent a target property. Be aware that once
          loaded, the key is no longer kept in sync with the property, in
          other words, if you change the property value, the key will not
          change automatically in your Java model.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-association-collections-overview"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">mappedBy</span><span class="java_operator">=</span><span class="java_literal">"customer"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MapKey</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_literal">"number"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getOrders</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setOrders</span><span class="java_separator">(</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;order</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">orders&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getNumber</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setNumber</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">number&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCustomer</span><span class="java_separator">(</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">customer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_operator">--</span><span class="java_plain">&nbsp;</span><span class="java_type">Table</span><span class="java_plain">&nbsp;schema</span>
<!--  --><br><span class="java_operator">|-------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|-------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;customer_id&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|-------------|</span></a></pre><p><a id="entity-mapping-association-collections-overview">Otherwise, the map key is mapped to a dedicated column or
          columns. To customize things, use one of the following
          annotations:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-mapping-association-collections-overview">@<code class="classname">MapKeyColumn</code> if the map key is a
              basic type, if you don't specify the column name, the name of
              the property followed by underscore followed by
              <code class="literal">KEY</code> is used (for example
              <code class="literal">orders_KEY</code>).</a></p></li><li><p><a id="entity-mapping-association-collections-overview"><code class="classname">@MapKeyEnumerated</code> /
              <code class="classname">@MapKeyTemporal</code> if the map key type is
              respectively an enum or a <code class="classname">Date</code>.</a></p></li><li><p><a id="entity-mapping-association-collections-overview"><code class="classname">@MapKeyJoinColumn</code>/<code class="classname">@MapKeyJoinColumns</code>
              if the map key type is another entity.</a></p></li><li><p><a id="entity-mapping-association-collections-overview"><code class="classname">@AttributeOverride</code>/<code class="classname">@AttributeOverrides</code>
              when the map key is a embeddable object. Use
              <code class="literal">key.</code> as a prefix for your embeddable object
              property names.</a></p></li></ul></div><p><a id="entity-mapping-association-collections-overview">You can also use <code class="classname">@MapKeyClass</code> to define
          the type of the key if you don't use generics (at this stage, you
          should wonder why at this day and age you don't use
          generics).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-association-collections-overview"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"Cust_Order"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MapKeyColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_literal">"orders_number"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getOrders</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setOrders</span><span class="java_separator">(</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">orders&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Map</span><span class="java_operator">&lt;</span><span class="java_type">String</span><span class="java_separator">,</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">id&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getNumber</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setNumber</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">number&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;getCustomer</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCustomer</span><span class="java_separator">(</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">customer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;customer</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;number</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_operator">--</span><span class="java_plain">&nbsp;</span><span class="java_type">Table</span><span class="java_plain">&nbsp;schema</span>
<!--  --><br><span class="java_operator">|-------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|---------------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_type">Cust_Order</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|-------------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|---------------|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;customer_id&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|----------|</span><span class="java_plain">&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;order_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|</span><span class="java_plain">&nbsp;customer_id&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|</span><span class="java_plain">&nbsp;orders_number&nbsp;</span><span class="java_operator">|</span>
<!--  --><br><span class="java_operator">|-------------|</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">|---------------|</span></a></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="entity-mapping-association-collections-overview">Note</a></h2><p><a id="entity-mapping-association-collections-overview">We recommend you to migrate from
            <code class="classname">@org.hibernate.annotations.MapKey</code> /
            <code class="classname">@org.hibernate.annotation.MapKeyManyToMany</code>
            to the new standard approach described above.</a></p></div><p><a id="entity-mapping-association-collections-overview">Let's now explore the various collection semantics based on
          the mapping you are choosing.</a></p><div class="table"><a id="d0e2010"><p class="title"><b>Table&nbsp;2.1.&nbsp;Collections semantics</b></p><div class="table-contents"><table summary="Collections semantics" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Semantic</th><th>java representation</th><th>annotations</th></tr></thead><tbody><tr><td>Bag semantic</td><td>java.util.List, java.util.Collection</td><td>@ElementCollection or @OneToMany or
                  @ManyToMany</td></tr><tr><td>Bag semantic with primary key (without the
                  limitations of Bag semantic)</td><td>java.util.List, java.util.Collection</td><td>(@ElementCollection or @OneToMany or @ManyToMany) and
                  @CollectionId</td></tr><tr><td>List semantic</td><td>java.util.List</td><td>(@ElementCollection or @OneToMany or @ManyToMany) and
                  (@OrderColumn or
                  @org.hibernate.annotations.IndexColumn)</td></tr><tr><td>Set semantic</td><td>java.util.Set</td><td>@ElementCollection or @OneToMany or
                  @ManyToMany</td></tr><tr><td>Map semantic</td><td>java.util.Map</td><td>(@ElementCollection or @OneToMany or @ManyToMany) and
                  ((nothing or @MapKeyJoinColumn/@MapKeyColumn for true map
                  support) OR @javax.persistence.MapKey)</td></tr></tbody></table></div></a></div><a id="d0e2010"><br class="table-break"><p class="remark"><i><span class="remark">Specifically, java.util.List collections without
          @OrderColumn or @IndexColumn are going to be considered as
          bags.</span></i></p></a><p><a id="d0e2010">More support for collections are available via Hibernate
          specific extensions (see </a><a class="xref" href="#entity-hibspec" title="2.4.Â Hibernate Annotation Extensions">Section&nbsp;2.4, âHibernate Annotation Extensionsâ</a>).</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-mapping-association-cascade">2.2.5.4.&nbsp;Transitive persistence with cascading</a></h4></div></div></div><p><a id="entity-mapping-association-cascade">You probably have noticed the <code class="literal">cascade</code>
        attribute taking an array of <code class="classname">CascadeType</code> as a
        value. The cascade concept in JPA is very is similar to the transitive
        persistence and cascading of operations in Hibernate, but with
        slightly different semantics and cascading types:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-mapping-association-cascade"><code class="literal">CascadeType.PERSIST</code>: cascades the persist
            (create) operation to associated entities persist() is called or
            if the entity is managed</a></p></li><li><p><a id="entity-mapping-association-cascade"><code class="literal">CascadeType.MERGE</code>: cascades the merge
            operation to associated entities if merge() is called or if the
            entity is managed</a></p></li><li><p><a id="entity-mapping-association-cascade"><code class="literal">CascadeType.REMOVE</code>: cascades the remove
            operation to associated entities if delete() is called</a></p></li><li><p><a id="entity-mapping-association-cascade"><code class="literal">CascadeType.REFRESH:</code> cascades the refresh
            operation to associated entities if refresh() is called</a></p></li><li><p><a id="entity-mapping-association-cascade"><code class="literal">CascadeType.DETACH:</code> cascades the detach
            operation to associated entities if detach() is called</a></p></li><li><p><a id="entity-mapping-association-cascade"><code class="literal">CascadeType.ALL</code>: all of the above</a></p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="entity-mapping-association-cascade">Note</a></h2><p><a id="entity-mapping-association-cascade">CascadeType.ALL also covers Hibernate specific operations like
          save-update, lock etc... Check </a><a class="xref" href="#entity-hibspec-cascade" title="2.4.7.Â Cascade">Section&nbsp;2.4.7, âCascadeâ</a> for more information</p></div><p>Please refer to the chapter 6.3 of the JPA specification for
        more information on cascading and create/merge semantics.</p><p>You can also enable the orphan removal semantic. If an entity is
        removed from a <code class="classname">@OneToMany</code> collection or an
        associated entity is dereferenced from a
        <code class="classname">@OneToOne</code> association, this associated entity
        can be marked for deletion if <code class="literal">orphanRemoval</code> is set
        to true. In a way, it means that the associated entity's lifecycle is
        bound to the owning entity just like an embeddable object is.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">class</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Customer</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">orphanRemoval</span><span class="java_operator">=</span><span class="java_literal">true</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getOrders</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setOrders</span><span class="java_separator">(</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">orders&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Order</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">find</span><span class="java_separator">(</span><span class="java_type">Customer</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">1l</span><span class="java_separator">);</span>
<!--  --><br><span class="java_type">Order</span><span class="java_plain">&nbsp;order&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;em</span><span class="java_separator">.</span><span class="java_plain">find</span><span class="java_separator">(</span><span class="java_type">Order</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">1l</span><span class="java_separator">);</span>
<!--  --><br><span class="java_plain">customer</span><span class="java_separator">.</span><span class="java_plain">getOrders</span><span class="java_separator">().</span><span class="java_plain">remove</span><span class="java_separator">(</span><span class="java_plain">order</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">order&nbsp;will&nbsp;be&nbsp;deleted&nbsp;by&nbsp;cascade</span></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-mapping-association-fetching">2.2.5.5.&nbsp;Association fetching</a></h4></div></div></div><p><a id="entity-mapping-association-fetching">You have the ability to either eagerly or lazily fetch
        associated entities. The <code class="literal">fetch</code> parameter can be set
        to <code class="literal">FetchType.LAZY</code> or
        <code class="literal">FetchType.EAGER</code>. <code class="literal">EAGER</code> will try
        to use an outer join select to retrieve the associated object, while
        <code class="literal">LAZY</code> will only trigger a select when the associated
        object is accessed for the first time. <code class="literal">@OneToMany</code>
        and <code class="literal">@ManyToMany</code> associations are defaulted to
        <code class="literal">LAZY</code> and <code class="literal">@OneToOne</code> and
        <code class="literal">@ManyToOne</code> are defaulted to
        <code class="literal">EAGER</code>. For more information about static fetching,
        check </a><a class="xref" href="#entity-hibspec-singleassoc-fetching" title="2.4.5.1.Â Lazy options and fetching modes">Section&nbsp;2.4.5.1, âLazy options and
        fetching modesâ</a>.</p><p>The recommanded approach is to use <code class="literal">LAZY</code> on
        all static fetching definitions and override this choice dynamically
        through JP-QL. JP-QL has a <code class="literal">fetch</code> keyword that
        allows you to override laziness when doing a particular query. This is
        very useful to improve performance and is decided on a use case to use
        case basis.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2177">2.2.6.&nbsp;Mapping composite primary keys and foreign keys to composite
      primary keys</a></h3></div></div></div><p><a id="d0e2177">Composite primary keys use a embedded class as the primary key
      representation, so you'd use the <code class="literal">@Id</code> and
      <code class="literal">@Embeddable</code> annotations. Alternatively, you can use
      the <code class="literal">@EmbeddedId</code> annotation. Note that the dependent
      class has to be serializable and implements
      <code class="methodname">equals()</code>/<code class="methodname">hashCode()</code>.
      You can also use <code class="literal">@IdClass</code>. These are more detailed in
      </a><a class="xref" href="#entity-mapping-identifier" title="2.2.3.Â Mapping identifier properties">Section&nbsp;2.2.3, âMapping identifier propertiesâ</a>.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegionalArticle</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">RegionalArticlePk</span><span class="java_plain">&nbsp;getPk</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegionalArticlePk</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>or alternatively</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegionalArticle</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">EmbeddedId</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">RegionalArticlePk</span><span class="java_plain">&nbsp;getPk</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RegionalArticlePk</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p><code class="literal">@Embeddable</code> inherit the access type of its
      owning entity unless <code class="literal">@Access</code> is used. Composite
      foreign keys (if not using the default sensitive values) are defined on
      associations using the <code class="literal">@JoinColumns</code> element, which is
      basically an array of <code class="literal">@JoinColumn</code>. It is considered a
      good practice to express <code class="literal">referencedColumnNames</code>
      explicitly. Otherwise, Hibernate will suppose that you use the same
      order of columns as in the primary key declaration.</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">ParentPk</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;age</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">cascade</span><span class="java_operator">=</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_plain">&nbsp;</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parentCivility"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"isMale"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parentLastName"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"lastName"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parentFirstName"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"firstName"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Child</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;children</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">unidirectional</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Child</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_plain">&nbsp;</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parentCivility"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"isMale"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parentLastName"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"lastName"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parentFirstName"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"firstName"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;parent</span><span class="java_separator">;</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">unidirectional</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ParentPk</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastName</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>Note the explicit usage of the
      <code class="literal">referencedColumnName</code>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2235">2.2.7.&nbsp;Mapping secondary tables</a></h3></div></div></div><p><a id="d0e2235">You can map a single entity to several tables using the
      <code class="literal">@SecondaryTable</code> or
      <code class="literal">@SecondaryTables</code> class level annotations. To express
      that a column is in a particular table, use the <code class="literal">table</code>
      parameter of <code class="literal">@Column</code> or
      <code class="literal">@JoinColumn</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2235"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Table</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"MainCat"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SecondaryTables</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">SecondaryTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"Cat1"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;pkJoinColumns</span><span class="java_operator">=</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">PrimaryKeyJoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"cat_id"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName</span><span class="java_operator">=</span><span class="java_literal">"id"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">SecondaryTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"Cat2"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;uniqueConstraints</span><span class="java_operator">=</span><span class="java_separator">{</span><span class="java_plain">@</span><span class="java_type">UniqueConstraint</span><span class="java_separator">(</span><span class="java_plain">columnNames</span><span class="java_operator">=</span><span class="java_separator">{</span><span class="java_literal">"storyPart2"</span><span class="java_separator">})})</span>
<!--  --><br><span class="java_separator">})</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Cat</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;storyPart1</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;storyPart2</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">table</span><span class="java_operator">=</span><span class="java_literal">"Cat1"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getStoryPart1</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;storyPart1</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">table</span><span class="java_operator">=</span><span class="java_literal">"Cat2"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getStoryPart2</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;storyPart2</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e2235">In this example, <code class="literal">name</code> will be in
      <code class="literal">MainCat</code>. <code class="literal">storyPart1</code> will be in
      <code class="literal">Cat1</code> and <code class="literal">storyPart2</code> will be in
      <code class="literal">Cat2</code>. <code class="literal">Cat1</code> will be joined to
      <code class="literal">MainCat</code> using the <code class="literal">cat_id</code> as a
      foreign key, and <code class="literal">Cat2</code> using <code class="literal">id</code> (ie
      the same column name, the <code class="literal">MainCat</code> id column has).
      Plus a unique constraint on <code class="literal">storyPart2</code> has been
      set.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2298">2.2.8.&nbsp;Caching entities</a></h3></div></div></div><p><a id="d0e2298">Hibernate offers naturally a first level cache for entities called
      a persistence context via the notion of <code class="classname">Session</code>.
      This cache is contextual to the use case at hand. Some entities however
      are shared by many different use cases and are barely changed. You can
      cache these in what is called the second level cache.</a></p><p><a id="d0e2298">By default, entities are not part of the second level cache. While
      we do not recommend that, you can override this by setting the
      <code class="literal">shared-cache-mode</code> element in your persistence.xml
      file or by using the <code class="literal">javax.persistence.sharedCache.mode
      property</code>. The following values are possible:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e2298"><code class="literal">ENABLE_SELECTIVE</code> (Default and recommended
          value): entities are not cached unless explicitly marked as
          cacheable.</a></p></li><li><p><a id="d0e2298"><code class="literal">DISABLE_SELECTIVE</code>: entities are cached
          unless explicitly marked as not cacheable.</a></p></li><li><p><a id="d0e2298"><code class="literal">ALL</code>: all entities are always cached even if
          marked as non cacheable.</a></p></li><li><p><a id="d0e2298"><code class="literal">NONE</code>: no entity are cached even if marked
          as cacheable. This option can make sense to disable second-level
          cache altogether.</a></p></li></ul></div><p><a id="d0e2298">The cache concurrency strategy used by default can be set with the
      <code class="literal">hibernate.cache.default_cache_concurrency_strategy</code>
      property:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e2298"><code class="literal">read-only</code></a></p></li><li><p><a id="d0e2298"><code class="literal">read-write</code></a></p></li><li><p><a id="d0e2298"><code class="literal">nonstrict-read-write</code></a></p></li><li><p><a id="d0e2298"><code class="literal">transactional</code></a></p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e2298">Note</a></h2><p><a id="d0e2298">It is recommended to define the cache concurrency strategy per
        entity rather than using a global one. Use the
        <code class="classname">@org.hibernate.annotations.Cache</code> annotation for
        that.</a></p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2298"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">Cacheable</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Cache</span><span class="java_separator">(</span><span class="java_plain">usage&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CacheConcurrencyStrategy</span><span class="java_separator">.</span><span class="java_plain">NONSTRICT_READ_WRITE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Forest</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></a></pre><p><a id="d0e2298">Hibernate also let's you cache the content of a collection or the
      identifiers if the collection contains other entities. Use the
      <code class="classname">@Cache</code> annotation on the collection
      property.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2298"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">OneToMany</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">cascade</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">CascadeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">ALL</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;fetch</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">FetchType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">EAGER</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"CUST_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Cache</span><span class="java_separator">(</span><span class="java_plain">usage&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CacheConcurrencyStrategy</span><span class="java_separator">.</span><span class="java_plain">NONSTRICT_READ_WRITE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">SortedSet</span><span class="java_operator">&lt;</span><span class="java_type">Ticket</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getTickets</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;tickets</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e2298"><code class="literal">@org.hibernate.annotations.Cache</code> defines the
      caching strategy and region of a given second level cache.</a></p><div class="programlistingco"><pre class="programlisting"><a id="d0e2298">@Cache(
    CacheConcu<span xmlns="" class="co" id="cache-hm1"><img src="./Annotations_RefGuide_files/1.png" alt="(1)"></span>rrencyStrategy usage();
    String reg<span xmlns="" class="co" id="cache-hm2"><img src="./Annotations_RefGuide_files/2.png" alt="(2)"></span>ion() default "";
    String inc<span xmlns="" class="co" id="cache-hm3"><img src="./Annotations_RefGuide_files/3.png" alt="(3)"></span>lude() default "all";
)</a></pre><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/1.png" alt="1" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p>usage: the given cache concurrency strategy (NONE,
            READ_ONLY, NONSTRICT_READ_WRITE, READ_WRITE, TRANSACTIONAL)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/2.png" alt="2" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p>region (optional): the cache region (default to the fqcn of
            the class or the fq role name of the collection)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/3.png" alt="3" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">include</code> (optional): all to include all
            properties, non-lazy to only include non lazy properties (default
            all).</p></td></tr></tbody></table></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="entity-mapping-query">2.3.&nbsp;Mapping Queries</a></h2></div></div></div><p><a id="entity-mapping-query">While you can write queries in your code, it is considered a good
    practice to externalize them:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-mapping-query">it make developer/DBA communications easier</a></p></li><li><p><a id="entity-mapping-query">named queries are pre-compiled by Hibernate at startup
        time</a></p></li></ul></div><p><a id="entity-mapping-query">Unfortunately, you lose the type-safety of queries written using the
    Criteria API.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-mapping-query-hql">2.3.1.&nbsp;Mapping JP-QL/HQL queries</a></h3></div></div></div><p><a id="entity-mapping-query-hql">You can map JP-QL/HQL queries using annotations.
      <code class="literal">@NamedQuery</code> and <code class="literal">@NamedQueries</code> can
      be defined at the class level or in a JPA XML deployment descriptor.
      However their definitions are global to the session factory/entity
      manager factory scope. A named query is defined by its name and the
      actual query string.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-query-hql"><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_plain">entity</span><!-- <br/> --><span class="java_operator">-</span><!-- <br/> --><span class="java_plain">mappings</span><!-- <br/> --><span class="java_operator">&gt;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">&lt;</span><span class="java_plain">named</span><span class="java_operator">-</span><span class="java_plain">query&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"plane.getAll"</span><span class="java_operator">&gt;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">&lt;</span><span class="java_plain">query</span><span class="java_operator">&gt;</span><span class="java_plain">select&nbsp;p&nbsp;from&nbsp;</span><span class="java_type">Plane</span><span class="java_plain">&nbsp;p</span><span class="java_operator">&lt;/</span><span class="java_plain">query</span><span class="java_operator">&gt;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">&lt;/</span><span class="java_plain">named</span><span class="java_operator">-</span><span class="java_plain">query</span><span class="java_operator">&gt;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_operator">&lt;/</span><span class="java_plain">entity</span><span class="java_operator">-</span><span class="java_plain">mappings</span><span class="java_operator">&gt;</span>
<!--  --><br><span class="java_separator">...</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">NamedQuery</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"night.moreRecentThan"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;query</span><span class="java_operator">=</span><span class="java_literal">"select&nbsp;n&nbsp;from&nbsp;Night&nbsp;n&nbsp;where&nbsp;n.date&nbsp;&gt;=&nbsp;:date"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Night</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MyDao</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;doStuff</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Query</span><span class="java_plain">&nbsp;q&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;s</span><span class="java_separator">.</span><span class="java_plain">getNamedQuery</span><span class="java_separator">(</span><span class="java_literal">"night.moreRecentThan"</span><span class="java_separator">);</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q</span><span class="java_separator">.</span><span class="java_plain">setDate</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">"date"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;aMonthAgo&nbsp;</span><span class="java_separator">);</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">List</span><span class="java_plain">&nbsp;results&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;q</span><span class="java_separator">.</span><span class="java_plain">list</span><span class="java_separator">();</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="entity-mapping-query-hql">You can also provide some hints to a query through an array of
      <code class="literal">QueryHint</code> through a <code class="literal">hints</code>
      attribute.</a></p><p><a id="entity-mapping-query-hql">The available Hibernate hints are</a></p><div class="table"><a id="d0e2432"><p class="title"><b>Table&nbsp;2.2.&nbsp;Query hints</b></p><div class="table-contents"><table summary="Query hints" border="1"><colgroup><col><col></colgroup><thead><tr><th>hint</th><th>description</th></tr></thead><tbody><tr><td>org.hibernate.cacheable</td><td>Whether the query should interact with the second level
              cache (defualt to false)</td></tr><tr><td>org.hibernate.cacheRegion</td><td>Cache region name (default used otherwise)</td></tr><tr><td>org.hibernate.timeout</td><td>Query timeout</td></tr><tr><td>org.hibernate.fetchSize</td><td>resultset fetch size</td></tr><tr><td>org.hibernate.flushMode</td><td>Flush mode used for this query</td></tr><tr><td>org.hibernate.cacheMode</td><td>Cache mode used for this query</td></tr><tr><td>org.hibernate.readOnly</td><td>Entities loaded by this query should be in read only mode
              or not (default to false)</td></tr><tr><td>org.hibernate.comment</td><td>Query comment added to the generated SQL</td></tr></tbody></table></div></a></div><a id="d0e2432"><br class="table-break"><p>You can also define the lock mode by which the returned entities
      should be locked using the <code class="literal">lockMode</code> property. This is
      equivalent to the optional lock mode of the entitymanager lookup
      operations.</p></a></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-mapping-query-native">2.3.2.&nbsp;Mapping native queries</a></h3></div></div></div><p><a id="entity-mapping-query-native">You can also map a native query (ie a plain SQL query). To achieve
      that, you need to describe the SQL resultset structure using
      <code class="literal">@SqlResultSetMapping</code> (or
      <code class="literal">@SqlResultSetMappings</code> if you plan to define several
      resulset mappings). Like <code class="literal">@NamedQuery</code>, a
      <code class="literal">@SqlResultSetMapping</code> can be defined at class level or
      in a JPA XML file. However its scope is global to the
      application.</a></p><p><a id="entity-mapping-query-native">As we will see, a <code class="literal">resultSetMapping</code> parameter is
      defined in <code class="literal">@NamedNativeQuery</code>, it represents the name
      of a defined <code class="literal">@SqlResultSetMapping</code>. The resultset
      mapping declares the entities retrieved by this native query. Each field
      of the entity is bound to an SQL alias (or column name). All fields of
      the entity including the ones of subclasses and the foreign key columns
      of related entities have to be present in the SQL query. Field
      definitions are optional provided that they map to the same column name
      as the one declared on the class property.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-query-native"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">NamedNativeQuery</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">name</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"night&amp;area"</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;query</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"select&nbsp;night.id&nbsp;nid,&nbsp;night.night_duration,&nbsp;"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">"&nbsp;night.night_date,&nbsp;area.id&nbsp;aid,&nbsp;night.area_id,&nbsp;area.name&nbsp;"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;</span><span class="java_literal">"from&nbsp;Night&nbsp;night,&nbsp;Area&nbsp;area&nbsp;where&nbsp;night.area_id&nbsp;=&nbsp;area.id"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultSetMapping</span><span class="java_operator">=</span><span class="java_literal">"joinMapping"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SqlResultSetMapping</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"joinMapping"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;entities</span><span class="java_operator">=</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">EntityResult</span><span class="java_separator">(</span><span class="java_plain">entityClass</span><span class="java_operator">=</span><span class="java_type">Night</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;fields&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"id"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_literal">"nid"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"duration"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_literal">"night_duration"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"date"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_literal">"night_date"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"area"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_literal">"area_id"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discriminatorColumn</span><span class="java_operator">=</span><span class="java_literal">"disc"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">EntityResult</span><span class="java_separator">(</span><span class="java_plain">entityClass</span><span class="java_operator">=</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">test</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_plain">query</span><span class="java_separator">.</span><span class="java_type">Area</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;fields&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"id"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_literal">"aid"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"name"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column</span><span class="java_operator">=</span><span class="java_literal">"name"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">)</span></a></pre><p><a id="entity-mapping-query-native">In the above example, the <code class="literal">night&amp;area</code> named
      query use the <code class="literal">joinMapping</code> result set mapping. This
      mapping returns 2 entities, <code class="literal">Night</code> and
      <code class="literal">Area</code>, each property is declared and associated to a
      column name, actually the column name retrieved by the query. Let's now
      see an implicit declaration of the property / column.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-query-native"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SqlResultSetMapping</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"implicit"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entities</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">EntityResult</span><span class="java_separator">(</span><span class="java_plain">entityClass</span><span class="java_operator">=</span><span class="java_type">SpaceShip</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">))</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">NamedNativeQuery</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"implicitSample"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;query</span><span class="java_operator">=</span><span class="java_literal">"select&nbsp;*&nbsp;from&nbsp;SpaceShip"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultSetMapping</span><span class="java_operator">=</span><span class="java_literal">"implicit"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">SpaceShip</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;model</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"model_txt"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getModel</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;model</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setModel</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;model</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">model&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;model</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;getSpeed</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setSpeed</span><span class="java_separator">(</span><span class="java_type">double</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">speed&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="entity-mapping-query-native">In this example, we only describe the entity member of the result
      set mapping. The property / column mappings is done using the entity
      mapping values. In this case the <code class="literal">model</code> property is
      bound to the <code class="literal">model_txt </code>column. If the association to
      a related entity involve a composite primary key, a
      <code class="literal">@FieldResult</code> element should be used for each foreign
      key column. The <code class="literal">@FieldResult</code> name is composed of the
      property name for the relationship, followed by a dot ("."), followed by
      the name or the field or property of the primary key.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-query-native"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SqlResultSetMapping</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"compositekey"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entities</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">EntityResult</span><span class="java_separator">(</span><span class="java_plain">entityClass</span><span class="java_operator">=</span><span class="java_type">SpaceShip</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"name"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"name"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"model"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"model"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"speed"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"speed"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"captain.firstname"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"firstn"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"captain.lastname"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"lastn"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"dimensions.length"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"length"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FieldResult</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"dimensions.width"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;column&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"width"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;columns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;@</span><span class="java_type">ColumnResult</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"surface"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ColumnResult</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"volume"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">NamedNativeQuery</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"compositekey"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;query</span><span class="java_operator">=</span><span class="java_literal">"select&nbsp;name,&nbsp;model,&nbsp;speed,&nbsp;lname&nbsp;as&nbsp;lastn,&nbsp;fname&nbsp;as&nbsp;firstn,&nbsp;length,&nbsp;width,&nbsp;length&nbsp;*&nbsp;width&nbsp;as&nbsp;surface&nbsp;from&nbsp;SpaceShip"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;resultSetMapping</span><span class="java_operator">=</span><span class="java_literal">"compositekey"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">SpaceShip</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;model</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Captain</span><span class="java_plain">&nbsp;captain</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Dimensions</span><span class="java_plain">&nbsp;dimensions</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span><span class="java_separator">(</span><span class="java_plain">fetch</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">FetchType</span><span class="java_separator">.</span><span class="java_plain">LAZY</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumns</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"fname"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"firstname"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"lname"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;referencedColumnName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"lastname"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Captain</span><span class="java_plain">&nbsp;getCaptain</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;captain</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCaptain</span><span class="java_separator">(</span><span class="java_type">Captain</span><span class="java_plain">&nbsp;captain</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">captain&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;captain</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getModel</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;model</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setModel</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;model</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">model&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;model</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">double</span><span class="java_plain">&nbsp;getSpeed</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setSpeed</span><span class="java_separator">(</span><span class="java_type">double</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">speed&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;speed</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Dimensions</span><span class="java_plain">&nbsp;getDimensions</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;dimensions</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setDimensions</span><span class="java_separator">(</span><span class="java_type">Dimensions</span><span class="java_plain">&nbsp;dimensions</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">dimensions&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;dimensions</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">IdClass</span><span class="java_separator">(</span><span class="java_type">Identity</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Captain</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getFirstname</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setFirstname</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">firstname&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getLastname</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setLastname</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">lastname&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>
</a></pre><p><a id="entity-mapping-query-native">If you retrieve a single entity and if you use the default
      mapping, you can use the <code class="literal">resultClass</code> attribute
      instead of <code class="literal">resultSetMapping</code>:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-query-native"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">NamedNativeQuery</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">name</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"implicitSample"</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;query</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"select&nbsp;*&nbsp;from&nbsp;SpaceShip"</span><!-- <br/> --><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;resultClass</span><span class="java_operator">=</span><span class="java_type">SpaceShip</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">SpaceShip</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></a></pre><p><a id="entity-mapping-query-native">In some of your native queries, you'll have to return scalar
      values, for example when building report queries. You can map them in
      the <code class="literal">@SqlResultsetMapping</code> through
      <code class="literal">@ColumnResult</code>. You actually can even mix, entities
      and scalar returns in the same native query (this is probably not that
      common though).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-mapping-query-native"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">SqlResultSetMapping</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">name</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"scalar"</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;columns</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">ColumnResult</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">name</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"dimension"</span><!-- <br/> --><span class="java_separator">))</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">NamedNativeQuery</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"scalar"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;query</span><span class="java_operator">=</span><span class="java_literal">"select&nbsp;length*width&nbsp;as&nbsp;dimension&nbsp;from&nbsp;SpaceShip"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;resultSetMapping</span><span class="java_operator">=</span><span class="java_literal">"scalar"</span><span class="java_separator">)</span></a></pre><p><a id="entity-mapping-query-native">An other query hint specific to native queries has been
      introduced: <code class="literal">org.hibernate.callable</code> which can be true
      or false depending on whether the query is a stored procedure or
      not.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="entity-hibspec">2.4.&nbsp;Hibernate Annotation Extensions</a></h2></div></div></div><p><a id="entity-hibspec">Hibernate 3.1 offers a variety of additional annotations that you
    can mix/match with your EJB 3 entities. They have been designed as a
    natural extension of EJB3 annotations.</a></p><p><a id="entity-hibspec">To empower the EJB3 capabilities, hibernate provides specific
    annotations that match hibernate features. The
    <code class="classname">org.hibernate.annotations</code> package contains all
    these annotations extensions.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-entity">2.4.1.&nbsp;Entity</a></h3></div></div></div><p><a id="entity-hibspec-entity">You can fine tune some of the actions done by Hibernate on
      entities beyond what the EJB3 spec offers.</a></p><p><a id="entity-hibspec-entity"><code class="classname">@org.hibernate.annotations.Entity</code> adds
      additional metadata that may be needed beyond what is defined in the
      standard <code class="literal">@Entity</code> </a></p><div class="itemizedlist"><ul><li><p><a id="entity-hibspec-entity">mutable: whether this entity is mutable or not</a></p></li><li><p><a id="entity-hibspec-entity">dynamicInsert: allow dynamic SQL for inserts</a></p></li><li><p><a id="entity-hibspec-entity">dynamicUpdate: allow dynamic SQL for updates</a></p></li><li><p><a id="entity-hibspec-entity">selectBeforeUpdate: Specifies that Hibernate should never
            perform an SQL UPDATE unless it is certain that an object is
            actually modified.</a></p></li><li><p><a id="entity-hibspec-entity">polymorphism: whether the entity polymorphism is of
            PolymorphismType.IMPLICIT (default) or
            PolymorphismType.EXPLICIT</a></p></li><li><p><a id="entity-hibspec-entity">optimisticLock: optimistic locking strategy
            (OptimisticLockType.VERSION, OptimisticLockType.NONE,
            OptimisticLockType.DIRTY or OptimisticLockType.ALL)</a></p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="entity-hibspec-entity">Note</a></h2><p><a id="entity-hibspec-entity">@javax.persistence.Entity is still mandatory,
          @org.hibernate.annotations.Entity is not a replacement.</a></p></div><p><a id="entity-hibspec-entity">Here are some additional Hibernate annotation extensions</a></p><p><a id="entity-hibspec-entity"><code class="literal">@org.hibernate.annotations.BatchSize</code> allows you
      to define the batch size when fetching instances of this entity ( eg.
      <code class="literal">@BatchSize(size=4)</code> ). When loading a given entity,
      Hibernate will then load all the uninitialized entities of the same type
      in the persistence context up to the batch size.</a></p><p><a id="entity-hibspec-entity"><code class="literal">@org.hibernate.annotations.Proxy</code> defines the
      laziness attributes of the entity. lazy (default to true) define whether
      the class is lazy or not. proxyClassName is the interface used to
      generate the proxy (default is the class itself).</a></p><p><a id="entity-hibspec-entity"><code class="literal">@org.hibernate.annotations.Where</code> defines an
      optional SQL WHERE clause used when instances of this class is
      retrieved.</a></p><p><a id="entity-hibspec-entity"><code class="literal">@org.hibernate.annotations.Check</code> defines an
      optional check constraints defined in the DDL statetement.</a></p><p><a id="entity-hibspec-entity"><code class="literal">@OnDelete(action=OnDeleteAction.CASCADE)</code> on
      joined subclasses: use a SQL cascade delete on deletion instead of the
      regular Hibernate mechanism.</a></p><p><a id="entity-hibspec-entity"><code class="literal">@Table(appliesTo="tableName", indexes = {
      @Index(name="index1", columnNames={"column1", "column2"} ) } )</code>
      creates the defined indexes on the columns of table
      <code class="literal">tableName</code>. This can be applied on the primary table
      or any secondary table. The <code class="literal">@Tables</code> annotation allows
      your to apply indexes on different tables. This annotation is expected
      where <code class="literal">@javax.persistence.Table</code> or
      <code class="literal">@javax.persistence.SecondaryTable</code>(s) occurs.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="entity-hibspec-entity">Note</a></h2><p><a id="entity-hibspec-entity"><code class="literal">@org.hibernate.annotations.Table</code> is a
        complement, not a replacement to
        <code class="literal">@javax.persistence.Table</code>. Especially, if you want
        to change the default name of a table, you must use
        <code class="literal">@javax.persistence.Table</code>, not
        <code class="literal">@org.hibernate.annotations.Table</code>.</a></p></div><p><a id="entity-hibspec-entity"><code class="literal">@org.hibernate.annotations.Table</code> can also be
      used to define the following elements of secondary tables:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-hibspec-entity"><code class="literal">fetch</code>: If set to JOIN, the default,
          Hibernate will use an inner join to retrieve a secondary table
          defined by a class or its superclasses and an outer join for a
          secondary table defined by a subclass. If set to select then
          Hibernate will use a sequential select for a secondary table defined
          on a subclass, which will be issued only if a row turns out to
          represent an instance of the subclass. Inner joins will still be
          used to retrieve a secondary defined by the class and its
          superclasses.</a></p></li><li><p><a id="entity-hibspec-entity"><code class="literal">inverse</code>: If true, Hibernate will not try to
          insert or update the properties defined by this join. Default to
          false.</a></p></li><li><p><a id="entity-hibspec-entity"><code class="literal">optional</code>: If enabled (the default),
          Hibernate will insert a row only if the properties defined by this
          join are non-null and will always use an outer join to retrieve the
          properties.</a></p></li><li><p><a id="entity-hibspec-entity"><code class="literal">foreignKey</code>: defines the Foreign Key name of
          a secondary table pointing back to the primary table.</a></p></li></ul></div><p><a id="entity-hibspec-entity"><code class="literal">@Immutable</code> marks an entity or collection as
      immutable. An immutable entity may not be updated by the application.
      This allows Hibernate to make some minor performance optimizations.
      Updates to an immutable entity will be ignored, but no exception is
      thrown. <code class="literal">@Immutable</code> must be used on root entities
      only. <code class="literal">@Immutable</code> placed on a collection makes the
      collection immutable, meaning additions and deletions to and from the
      collection are not allowed. A <code class="literal">HibernateException</code> is
      thrown in this case.</a></p><p><a id="entity-hibspec-entity"><code class="literal">@Persister</code> lets you define your own custom
      persistence strategy. You may, for example, specify your own subclass of
      <code class="classname">org.hibernate.persister.EntityPersister</code> or you
      might even provide a completely new implementation of the interface
      <code class="literal">org.hibernate.persister.ClassPersister</code> that
      implements persistence via, for example, stored procedure calls,
      serialization to flat files or LDAP.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-entity"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">BatchSize</span><span class="java_separator">(</span><span class="java_plain">size</span><span class="java_operator">=</span><span class="java_literal">5</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">Entity</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectBeforeUpdate&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynamicInsert&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">,</span><span class="java_plain">&nbsp;dynamicUpdate&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">true</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optimisticLock&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">OptimisticLockType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;polymorphism&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">PolymorphismType</span><span class="java_separator">.</span><span class="java_plain">EXPLICIT</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Where</span><span class="java_separator">(</span><span class="java_plain">clause</span><span class="java_operator">=</span><span class="java_literal">"1=1"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">Table</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"Forest"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;indexes&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;@</span><span class="java_type">Index</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"idx"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;columnNames&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_literal">"name"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">"length"</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Persister</span><span class="java_separator">(</span><span class="java_plain">impl</span><span class="java_operator">=</span><span class="java_type">MyEntityPersister</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Forest</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></a></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-entity"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Inheritance</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;strategy</span><span class="java_operator">=</span><span class="java_type">InheritanceType</span><span class="java_separator">.</span><span class="java_plain">JOINED</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Vegetable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">OnDelete</span><span class="java_separator">(</span><span class="java_plain">action</span><span class="java_operator">=</span><span class="java_type">OnDeleteAction</span><span class="java_separator">.</span><span class="java_plain">CASCADE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Carrot</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Vegetable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-identifier">2.4.2.&nbsp;Identifier</a></h3></div></div></div><p><a id="entity-hibspec-identifier">Hibernate Annotations goes beyond the Java Persistence
      specification when defining identifiers.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2734">2.4.2.1.&nbsp;Generators</a></h4></div></div></div><p><a id="d0e2734"><code class="literal"><code class="literal">@org.hibernate.annotations.GenericGenerator</code>
        and <code class="literal">@org.hibernate.annotations.GenericGenerators</code>
        allows you to define an Hibernate specific id
        generator.</code></a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2734"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Id</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">GeneratedValue</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">generator</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"system-uuid"</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">GenericGenerator</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"system-uuid"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;strategy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"uuid"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;@</span><span class="java_type">GeneratedValue</span><span class="java_separator">(</span><span class="java_plain">generator</span><span class="java_operator">=</span><span class="java_literal">"hibseq"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">GenericGenerator</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"hibseq"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;strategy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"seqhilo"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Parameter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"max_lo"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"5"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Parameter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"sequence"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;value</span><span class="java_operator">=</span><span class="java_literal">"heybabyhey"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></a></pre><p><a id="d0e2734"><code class="literal">strategy</code> is the short name of an Hibernate3
        generator strategy or the fully qualified class name of an
        <code class="classname">IdentifierGenerator</code> implementation. You can add
        some parameters through the <code class="literal">parameters</code>
        attribute.</a></p><p><a id="d0e2734">Contrary to their standard counterpart,
        <code class="literal">@GenericGenerator</code> and
        <code class="literal">@GenericGenerators</code> can be used in package level
        annotations, making them application level generators (just like if
        they were in a JPA XML file).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2734"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">GenericGenerators</span><!-- <br/> --><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">GenericGenerator</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"hibseq"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strategy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"seqhilo"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Parameter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"max_lo"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"5"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Parameter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"sequence"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;value</span><span class="java_operator">=</span><span class="java_literal">"heybabyhey"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">GenericGenerator</span><span class="java_separator">(...)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">test</span><span class="java_separator">.</span><span class="java_plain">model</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2767">2.4.2.2.&nbsp;@NaturalId</a></h4></div></div></div><p><a id="d0e2767">While not used as identifier property, some (group of)
        properties represent natural identifier of an entity. This is
        especially true when the schema uses the recommended approach of using
        surrogate primary key even if a natural business key exists. Hibernate
        allows to map such natural properties and reuse them in a
        <code class="classname">Criteria</code> query. The natural identifier is
        composed of all the properties marked
        <code class="classname">@NaturalId</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2767"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Citizen</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;firstname</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;lastname</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NaturalId</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">State</span><span class="java_plain">&nbsp;state</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NaturalId</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;ssn</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>



<!--  --><br><span class="java_operator">//</span><span class="java_plain">and&nbsp;later&nbsp;on&nbsp;query</span>
<!--  --><br><span class="java_type">List</span><span class="java_plain">&nbsp;results&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;s</span><span class="java_separator">.</span><span class="java_plain">createCriteria</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_type">Citizen</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_type">Restrictions</span><span class="java_separator">.</span><span class="java_plain">naturalId</span><span class="java_separator">().</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">"ssn"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_literal">"1234"</span><span class="java_plain">&nbsp;</span><span class="java_separator">).</span><span class="java_plain">set</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">"state"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;ste&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">.</span><span class="java_plain">list</span><span class="java_separator">();</span></a></pre><p><a id="d0e2767">Note that the group of properties representing the natural
        identifier have to be unique (Hibernate will generate a unique
        constraint if the database schema is generated).</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-property">2.4.3.&nbsp;Property</a></h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2785">2.4.3.1.&nbsp;Formula</a></h4></div></div></div><p><a id="d0e2785">Sometimes, you want the Database to do some computation for you
        rather than in the JVM, you might also create some kind of virtual
        column. You can use a SQL fragment (aka formula) instead of mapping a
        property into a column. This kind of property is read only (its value
        is calculated by your formula fragment).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2785"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Formula</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_literal">"obj_length&nbsp;*&nbsp;obj_height&nbsp;*&nbsp;obj_width"</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;getObjectVolume</span><span class="java_separator">()</span></a></pre><p><a id="d0e2785">The SQL fragment can be as complex as you want and even include
        subselects.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2794">2.4.3.2.&nbsp;Type</a></h4></div></div></div><p><a id="d0e2794"><code class="literal">@org.hibernate.annotations.Type</code> overrides the
        default hibernate type used: this is generally not necessary since the
        type is correctly inferred by Hibernate. Please refer to the Hibernate
        reference guide for more informations on the Hibernate types.</a></p><p><a id="d0e2794"><code class="literal">@org.hibernate.annotations.TypeDef</code> and
        <code class="literal">@org.hibernate.annotations.TypeDefs</code> allows you to
        declare type definitions. These annotations can be placed at the class
        or package level. Note that these definitions are global for the
        session factory (even when defined at the class level). If the type is
        used on a single entity, you can place the definition on the entity
        itself. Otherwise, it is recommended to place the definition at the
        package level. In the example below, when Hibernate encounters a
        property of class <code class="literal">PhoneNumer</code>, it delegates the
        persistence strategy to the custom mapping type
        <code class="literal">PhoneNumberType</code>. However, properties belonging to
        other classes, too, can delegate their persistence strategy to
        <code class="literal">PhoneNumberType</code>, by explicitly using the
        <code class="literal">@Type</code> annotation.</a></p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e2794">Note</a></h2><p><a id="d0e2794">Package level annotations are placed in a file named
          <code class="filename">package-info.java</code> in the appropriate package.
          Place your annotations before the package declaration.</a></p></div><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2794"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">TypeDef</span><!-- <br/> --><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"phoneNumber"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;defaultForType&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">PhoneNumber</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;typeClass&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">PhoneNumberType</span><span class="java_separator">.</span><span class="java_keyword">class</span>
<!--  --><br><span class="java_separator">)</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ContactDetails</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">PhoneNumber</span><span class="java_plain">&nbsp;localPhoneNumber</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Type</span><span class="java_separator">(</span><span class="java_plain">type</span><span class="java_operator">=</span><span class="java_literal">"phoneNumber"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">OverseasPhoneNumber</span><span class="java_plain">&nbsp;overseasPhoneNumber</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">[...]</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e2794">The following example shows the usage of the
        <code class="literal">parameters</code> attribute to customize the
        TypeDef.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2794"><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">in&nbsp;org</span><!-- <br/> --><span class="java_operator">/</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_operator">/</span><!-- <br/> --><span class="java_plain">test</span><!-- <br/> --><span class="java_operator">/</span><!-- <br/> --><span class="java_plain">annotations</span><!-- <br/> --><span class="java_operator">/</span><!-- <br/> --><span class="java_plain">entity</span><!-- <br/> --><span class="java_operator">/</span><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_operator">-</span><!-- <br/> --><span class="java_plain">info</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">java</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">TypeDefs</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">TypeDef</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"caster"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typeClass&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CasterStringType</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Parameter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"cast"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;value</span><span class="java_operator">=</span><span class="java_literal">"lower"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">test</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_plain">entity</span><span class="java_separator">;</span>

<!--  --><br><span class="java_operator">//</span><span class="java_plain">in&nbsp;org</span><span class="java_operator">/</span><span class="java_plain">hibernate</span><span class="java_operator">/</span><span class="java_plain">test</span><span class="java_operator">/</span><span class="java_plain">annotations</span><span class="java_operator">/</span><span class="java_plain">entity</span><span class="java_operator">/</span><span class="java_type">Forest</span><span class="java_separator">.</span><span class="java_plain">java</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Forest</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Type</span><span class="java_separator">(</span><span class="java_plain">type</span><span class="java_operator">=</span><span class="java_literal">"caster"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getSmallText</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></a></pre><p><a id="d0e2794">When using composite user type, you will have to express column
        definitions. The <code class="literal">@Columns</code> has been introduced for
        that purpose.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2794"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Type</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">type</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"org.hibernate.test.annotations.entity.MonetaryAmountUserType"</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Columns</span><span class="java_separator">(</span><span class="java_plain">columns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"r_amount"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"r_currency"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_separator">})</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">MonetaryAmount</span><span class="java_plain">&nbsp;getAmount</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;amount</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span>


<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">MonetaryAmount</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">BigDecimal</span><span class="java_plain">&nbsp;amount</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Currency</span><span class="java_plain">&nbsp;currency</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2842">2.4.3.3.&nbsp;Index</a></h4></div></div></div><p><a id="d0e2842">You can define an index on a particular column using the
        <code class="literal">@Index</code> annotation on a one column property, the
        columnNames attribute will then be ignored</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2842"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Column</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">secondaryTable</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_literal">"Cat1"</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Index</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"story1index"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getStoryPart1</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;storyPart1</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2852">2.4.3.4.&nbsp;@Parent</a></h4></div></div></div><p><a id="d0e2852">When inside an embeddable object, you can define one of the
        properties as a pointer back to the owner element.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2852"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Embeddable</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;address</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Embeddable</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Address</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;owner</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>


<!--  --><br><span class="java_plain">person&nbsp;</span><span class="java_operator">==</span><span class="java_plain">&nbsp;person</span><span class="java_separator">.</span><span class="java_plain">address</span><span class="java_separator">.</span><span class="java_plain">owner</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2859">2.4.3.5.&nbsp;Generated properties</a></h4></div></div></div><p><a id="d0e2859">Some properties are generated at insert or update time by your
        database. Hibernate can deal with such properties and triggers a
        subsequent select to read these properties.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2859"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Antenna</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span><span class="java_plain">&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Integer</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Generated</span><span class="java_separator">(</span><span class="java_type">GenerationTime</span><span class="java_separator">.</span><span class="java_plain">ALWAYS</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">insertable&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;updatable&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;longitude</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Generated</span><span class="java_separator">(</span><span class="java_type">GenerationTime</span><span class="java_separator">.</span><span class="java_plain">INSERT</span><span class="java_separator">)</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">insertable&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;latitude</span><span class="java_separator">;</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="d0e2859">Annotate your property as <code class="literal">@Generated</code> You have
        to make sure your insertability or updatability does not conflict with
        the generation strategy you have chosen. When
        <code class="literal">GenerationTime.INSERT</code> is chosen, the property must
        not contains insertable columns, when
        <code class="literal">GenerationTime.ALWAYS</code> is chosen, the property must
        not contains insertable nor updatable columns.</a></p><p><a id="d0e2859"><code class="literal">@Version</code> properties cannot be
        <code class="literal">@Generated(INSERT)</code> by design, it has to be either
        <code class="literal">NEVER</code> or <code class="literal">ALWAYS</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2890">2.4.3.6.&nbsp;@Target</a></h4></div></div></div><p><a id="d0e2890">Sometimes, the type guessed by reflection is not the one you
        want Hibernate to use. This is especially true on components when an
        interface is used. You can use <code class="literal">@Target</code> to by pass
        the reflection guessing mechanism (very much like the
        <code class="literal">targetEntity</code> attribute available on
        associations.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e2890"><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">Embedded</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Target</span><span class="java_separator">(</span><span class="java_type">OwnerImpl</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Owner</span><span class="java_plain">&nbsp;getOwner</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;owner</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="d0e2903">2.4.3.7.&nbsp;Optimistic lock</a></h4></div></div></div><p><a id="d0e2903">It is sometimes useful to avoid increasing the version number
        even if a given property is dirty (particularly collections). You can
        do that by annotating the property (or collection) with
        <code class="literal">@OptimisticLock(excluded=true)</code>.</a></p><p><a id="d0e2903">More formally, specifies that updates to this property do not
        require acquisition of the optimistic lock.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-inheritance">2.4.4.&nbsp;Inheritance</a></h3></div></div></div><p><a id="entity-hibspec-inheritance">SINGLE_TABLE is a very powerful strategy but sometimes, and
      especially for legacy systems, you cannot add an additional
      discriminator column. For that purpose Hibernate has introduced the
      notion of discriminator formula:
      <code class="literal">@DiscriminatorFormula</code> is a replacement of
      <code class="literal">@DiscriminatorColumn</code> and use a SQL fragment as a
      formula for discriminator resolution (no need to have a dedicated
      column).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-inheritance"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">DiscriminatorFormula</span><span class="java_separator">(</span><span class="java_literal">"case&nbsp;when&nbsp;forest_type&nbsp;is&nbsp;null&nbsp;then&nbsp;0&nbsp;else&nbsp;forest_type&nbsp;end"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Forest</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-inheritance">By default, when querying the top entities, Hibernate does not put
      a restriction clause on the discriminator column. This can be
      inconvenient if this column contains values not mapped in your hierarchy
      (through <code class="literal">@DiscriminatorValue</code>). To work around that
      you can use <code class="literal">@ForceDiscriminator</code> (at the class level,
      next to <code class="literal">@DiscriminatorColumn</code>). Hibernate will then
      list the available values when loading the entities.</a></p><p><a id="entity-hibspec-inheritance">You can define the foreign key name generated by Hibernate for
      subclass tables in the JOINED inheritance strategy.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-inheritance"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Inheritance</span><span class="java_separator">(</span><span class="java_plain">strategy&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">InheritanceType</span><span class="java_separator">.</span><span class="java_plain">JOINED</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">abstract</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">File</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">ForeignKey</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"FK_DOCU_FILE"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Document</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">File</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></a></pre><p><a id="entity-hibspec-inheritance">The foreign key from the <code class="literal">Document</code> table to the
      <code class="literal">File</code> table will be named
      <code class="literal">FK_DOCU_FILE</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-singleassoc">2.4.5.&nbsp;Single Association related annotations</a></h3></div></div></div><p><a id="entity-hibspec-singleassoc">By default, when Hibernate cannot resolve the association because
      the expected associated element is not in database (wrong id on the
      association column), an exception is raised by Hibernate. This might be
      inconvenient for legacy and badly maintained schemas. You can ask
      Hibernate to ignore such elements instead of raising an exception using
      the <code class="literal">@NotFound</code> annotation. This annotation can be used
      on a <code class="literal">@OneToOne</code> (with FK),
      <code class="literal">@ManyToOne</code>, <code class="literal">@OneToMany</code> or
      <code class="literal">@ManyToMany</code> association.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-singleassoc"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Child</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotFound</span><span class="java_separator">(</span><span class="java_plain">action</span><span class="java_operator">=</span><span class="java_type">NotFoundAction</span><span class="java_separator">.</span><span class="java_plain">IGNORE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;getParent</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-singleassoc">Sometimes you want to delegate to your database the deletion of
      cascade when a given entity is deleted.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-singleassoc"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Child</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OnDelete</span><span class="java_separator">(</span><span class="java_plain">action</span><span class="java_operator">=</span><span class="java_type">OnDeleteAction</span><span class="java_separator">.</span><span class="java_plain">CASCADE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;getParent</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-singleassoc">In this case Hibernate generates a cascade delete constraint at
      the database level.</a></p><p><a id="entity-hibspec-singleassoc">Foreign key constraints, while generated by Hibernate, have a
      fairly unreadable name. You can override the constraint name by use
      <code class="literal">@ForeignKey</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-singleassoc"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Child</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ForeignKey</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"FK_PARENT"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;getParent</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">alter&nbsp;table&nbsp;</span><span class="java_type">Child</span><span class="java_plain">&nbsp;add&nbsp;constraint&nbsp;FK_PARENT&nbsp;foreign&nbsp;key&nbsp;</span><span class="java_separator">(</span><span class="java_plain">parent_id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;references&nbsp;</span><span class="java_type">Parent</span></a></pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-hibspec-singleassoc-fetching">2.4.5.1.&nbsp;Lazy options and
        fetching modes</a></h4></div></div></div><p><a id="entity-hibspec-singleassoc-fetching">JPA comes with the <code class="literal">fetch</code> option to define
        lazy loading and fetching modes, however Hibernate has a much more
        option set in this area. To fine tune the lazy loading and fetching
        strategies, some additional annotations have been introduced:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-hibspec-singleassoc-fetching"><code class="literal">@LazyToOne</code>: defines the lazyness option
            on <code class="literal">@ManyToOne</code> and <code class="literal">@OneToOne</code>
            associations. <code class="literal">LazyToOneOption</code> can be
            <code class="literal">PROXY</code> (ie use a proxy based lazy loading),
            <code class="literal">NO_PROXY</code> (use a bytecode enhancement based lazy
            loading - note that build time bytecode processing is necessary)
            and <code class="literal">FALSE</code> (association not lazy)</a></p></li><li><p><a id="entity-hibspec-singleassoc-fetching"><code class="literal">@LazyCollection</code>: defines the lazyness
            option on <code class="literal">@ManyTo</code>Many and
            <code class="literal">@OneToMany</code> associations. LazyCollectionOption
            can be <code class="literal">TRUE</code> (the collection is lazy and will be
            loaded when its state is accessed), <code class="literal">EXTRA</code> (the
            collection is lazy and all operations will try to avoid the
            collection loading, this is especially useful for huge collections
            when loading all the elements is not necessary) and FALSE
            (association not lazy)</a></p></li><li><p><a id="entity-hibspec-singleassoc-fetching"><code class="literal">@Fetch</code>: defines the fetching strategy
            used to load the association. <code class="literal">FetchMode</code> can be
            <code class="literal">SELECT</code> (a select is triggered when the
            association needs to be loaded), <code class="literal">SUBSELECT</code>
            (only available for collections, use a subselect strategy - please
            refers to the Hibernate Reference Documentation for more
            information) or <code class="literal">JOIN</code> (use a SQL JOIN to load
            the association while loading the owner entity).
            <code class="literal">JOIN</code> overrides any lazy attribute (an
            association loaded through a <code class="literal">JOIN</code> strategy
            cannot be lazy).</a></p></li></ul></div><p><a id="entity-hibspec-singleassoc-fetching">The Hibernate annotations overrides the EJB3 fetching
        options.</a></p><div class="table"><a id="d0e3061"><p class="title"><b>Table&nbsp;2.3.&nbsp;Lazy and fetch options equivalent</b></p><div class="table-contents"><table summary="Lazy and fetch options equivalent" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Annotations</th><th>Lazy</th><th>Fetch</th></tr></thead><tbody><tr><td>@[One|Many]ToOne](fetch=FetchType.LAZY)</td><td>@LazyToOne(PROXY)</td><td>@Fetch(SELECT)</td></tr><tr><td>@[One|Many]ToOne](fetch=FetchType.EAGER)</td><td>@LazyToOne(FALSE)</td><td>@Fetch(JOIN)</td></tr><tr><td>@ManyTo[One|Many](fetch=FetchType.LAZY)</td><td>@LazyCollection(TRUE)</td><td>@Fetch(SELECT)</td></tr><tr><td>@ManyTo[One|Many](fetch=FetchType.EAGER)</td><td>@LazyCollection(FALSE)</td><td>@Fetch(JOIN)</td></tr></tbody></table></div></a></div><a id="d0e3061"><br class="table-break"></a></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-hibspec-singleassoc-any">2.4.5.2.&nbsp;@Any</a></h4></div></div></div><p><a id="entity-hibspec-singleassoc-any">The <code class="classname">@Any</code> annotation defines a polymorphic
        association to classes from multiple tables. This type of mapping
        always requires more than one column. The first column holds the type
        of the associated entity. The remaining columns hold the identifier.
        It is impossible to specify a foreign key constraint for this kind of
        association, so this is most certainly not meant as the usual way of
        mapping (polymorphic) associations. You should use this only in very
        special cases (eg. audit logs, user session data, etc).</a></p><p><a id="entity-hibspec-singleassoc-any">The <code class="classname">@Any</code> annotation describes the column
        holding the metadata information. To link the value of the metadata
        information and an actual entity type, The
        <code class="classname">@AnyDef</code> and <code class="classname">@AnyDefs</code>
        annotations are used.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-singleassoc-any"><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">Any</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">&nbsp;metaColumn&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;@</span><!-- <br/> --><span class="java_type">Column</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">&nbsp;name&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">"property_type"</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">),</span><!-- <br/> --><span class="java_plain">&nbsp;fetch</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">FetchType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">EAGER&nbsp;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AnyMetaDef</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idType&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"integer"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metaType&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"string"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metaValues&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MetaValue</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"S"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">StringProperty</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MetaValue</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"I"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">IntegerProperty</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"property_id"</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Property</span><span class="java_plain">&nbsp;getMainProperty</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;mainProperty</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-singleassoc-any"><code class="methodname">idType</code> represents the target entities
        identifier property type and <code class="methodname">metaType</code> the
        metadata type (usually String).</a></p><p><a id="entity-hibspec-singleassoc-any">Note that <code class="classname">@AnyDef</code> can be mutualized and
        reused. It is recommended to place it as a package metadata in this
        case.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-singleassoc-any"><span class="java_operator">//</span><!-- <br/> --><span class="java_plain">on&nbsp;a&nbsp;</span><!-- <br/> --><span class="java_keyword">package</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">AnyMetaDef</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"property"</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;idType&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"integer"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;metaType&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"string"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;metaValues&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MetaValue</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"S"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">StringProperty</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MetaValue</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"I"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">IntegerProperty</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">test</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_plain">any</span><span class="java_separator">;</span>


<!--  --><br><span class="java_operator">//</span><span class="java_plain">in&nbsp;a&nbsp;</span><span class="java_keyword">class</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Any</span><span class="java_separator">(</span><span class="java_plain">&nbsp;metaDef</span><span class="java_operator">=</span><span class="java_literal">"property"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;metaColumn&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"property_type"</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span><span class="java_plain">&nbsp;fetch</span><span class="java_operator">=</span><span class="java_type">FetchType</span><span class="java_separator">.</span><span class="java_plain">EAGER&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"property_id"</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Property</span><span class="java_plain">&nbsp;getMainProperty</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;mainProperty</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></a></pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-collection">2.4.6.&nbsp;Collection related annotations</a></h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-hibspec-collection-enhance">2.4.6.1.&nbsp;Enhance collection settings</a></h4></div></div></div><p><a id="entity-hibspec-collection-enhance">It is possible to set </a></p><div class="itemizedlist"><ul><li><p><a id="entity-hibspec-collection-enhance">the batch size for collections using @BatchSize</a></p></li><li><p><a id="entity-hibspec-collection-enhance">the where clause, using @Where (applied on the target
              entity) or @WhereJoinTable (applied on the association
              table)</a></p></li><li><p><a id="entity-hibspec-collection-enhance">the check clause, using @Check</a></p></li><li><p><a id="entity-hibspec-collection-enhance">the SQL order by clause, using @OrderBy</a></p></li><li><p><a id="entity-hibspec-collection-enhance">the delete cascade strategy through
              @OnDelete(action=OnDeleteAction.CASCADE)</a></p></li><li><p><a id="entity-hibspec-collection-enhance">the collection immutability using @Immutable: if set
              specifies that the elements of the collection never change (a
              minor performance optimization in some cases)</a></p></li><li><p><a id="entity-hibspec-collection-enhance">a custom collection persister (ie the persistence strategy
              used) using <code class="literal">@Persister</code>: the class must
              implement
              <code class="classname">org.hibernate.persister.collectionCollectionPersister</code></a></p></li></ul></div><p><a id="entity-hibspec-collection-enhance">You can also declare a sort comparator. Use the
        <code class="literal">@Sort</code> annotation. Expressing the comparator type
        you want between unsorted, natural or custom comparator. If you want
        to use your own comparator implementation, you'll also have to express
        the implementation class using the <code class="literal">comparator</code>
        attribute. Note that you need to use either a
        <code class="classname">SortedSet</code> or a <code class="classname">SortedMap</code>
        interface.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-collection-enhance"><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">OneToMany</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">cascade</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">CascadeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">ALL</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;fetch</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_type">FetchType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">EAGER</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"CUST_ID"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Sort</span><span class="java_separator">(</span><span class="java_plain">type&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">SortType</span><span class="java_separator">.</span><span class="java_plain">COMPARATOR</span><span class="java_separator">,</span><span class="java_plain">&nbsp;comparator&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">TicketComparator</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Where</span><span class="java_separator">(</span><span class="java_plain">clause</span><span class="java_operator">=</span><span class="java_literal">"1=1"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OnDelete</span><span class="java_separator">(</span><span class="java_plain">action</span><span class="java_operator">=</span><span class="java_type">OnDeleteAction</span><span class="java_separator">.</span><span class="java_plain">CASCADE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">SortedSet</span><span class="java_operator">&lt;</span><span class="java_type">Ticket</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getTickets</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;tickets</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-collection-enhance">Please refer to the previous descriptions of these annotations
        for more informations.</a></p><p><a id="entity-hibspec-collection-enhance">Foreign key constraints, while generated by Hibernate, have a
        fairly unreadable name. You can override the constraint name by use
        <code class="literal">@ForeignKey</code>. Note that this annotation has to be
        placed on the owning side of the relationship,
        <code class="literal">inverseName</code> referencing to the other side
        constraint.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-collection-enhance"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Woman</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ForeignKey</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"TO_WOMAN_FK"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;inverseName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"TO_MAN_FK"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Man</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getMens</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;mens</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">alter&nbsp;table&nbsp;</span><span class="java_type">Man_Woman</span><span class="java_plain">&nbsp;add&nbsp;constraint&nbsp;TO_WOMAN_FK&nbsp;foreign&nbsp;key&nbsp;</span><span class="java_separator">(</span><span class="java_plain">woman_id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;references&nbsp;</span><span class="java_type">Woman</span>
<!--  --><br><span class="java_plain">alter&nbsp;table&nbsp;</span><span class="java_type">Man_Woman</span><span class="java_plain">&nbsp;add&nbsp;constraint&nbsp;TO_MAN_FK&nbsp;foreign&nbsp;key&nbsp;</span><span class="java_separator">(</span><span class="java_plain">man_id</span><span class="java_separator">)</span><span class="java_plain">&nbsp;references&nbsp;</span><span class="java_type">Man</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="entity-hibspec-collection-extratype">2.4.6.2.&nbsp;Extra collection types</a></h4></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="entity-hibspec-collection-extratype-indexbidir">2.4.6.2.1.&nbsp;Bidirectional association with indexed collections</a></h5></div></div></div><p><a id="entity-hibspec-collection-extratype-indexbidir">A bidirectional association where one end is an indexed
          collection (ie. represented as a <code class="literal">@OrderColumn</code>, or
          as a Map) requires special consideration. If a property on the
          associated class explicitly maps the indexed value, the use of
          <code class="methodname">mappedBy</code> is permitted:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-collection-extratype-indexbidir"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span><span class="java_separator">(</span><span class="java_plain">mappedBy</span><span class="java_operator">=</span><span class="java_literal">"parent"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OrderColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"order"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Child</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;children</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Child</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">the&nbsp;index&nbsp;column&nbsp;is&nbsp;mapped&nbsp;as&nbsp;a&nbsp;property&nbsp;in&nbsp;the&nbsp;associated&nbsp;entity</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"order"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;order</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parent_id"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;nullable</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;parent</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-collection-extratype-indexbidir">But, if there is no such property on the child class, we can't
          think of the association as truly bidirectional (there is
          information available at one end of the association that is not
          available at the other end: the index). In this case, we can't map
          the collection as <code class="literal">mappedBy</code>. Instead, we could use
          the following mapping:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-collection-extratype-indexbidir"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OrderColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"order"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parent_id"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;nullable</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Child</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;children</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span>

<!--  --><br><span class="java_plain">@</span><span class="java_type">Entity</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Child</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToOne</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"parent_id"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;insertable</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;updatable</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">,</span><span class="java_plain">&nbsp;nullable</span><span class="java_operator">=</span><span class="java_literal">false</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Parent</span><span class="java_plain">&nbsp;parent</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-collection-extratype-indexbidir">Note that in this mapping, the collection-valued end of the
          association is responsible for updating the foreign key.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="d0e3225">2.4.6.2.2.&nbsp;Bag with primary key</a></h5></div></div></div><p><a id="d0e3225">Another interesting feature is the ability to define a
          surrogate primary key to a bag collection. This remove pretty much
          all of the drawbacks of bags: update and removal are efficient, more
          than one <code class="literal">EAGER</code> bag per query or per entity. This
          primary key will be contained in a additional column of your
          collection table but will not be visible to the Java application.
          @CollectionId is used to mark a collection as id bag, it also allow
          to override the primary key column(s), the primary key type and the
          generator strategy. The strategy can be <code class="literal">identity</code>,
          or any defined generator name of your application.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e3225"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">TableGenerator</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"ids_generator"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;table</span><span class="java_operator">=</span><span class="java_literal">"IDS"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Passport</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">ManyToMany</span><span class="java_separator">(</span><span class="java_plain">cascade&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"PASSPORT_VISASTAMP"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">CollectionId</span><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;columns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"COLLECTION_ID"</span><span class="java_separator">),</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">Type</span><span class="java_separator">(</span><span class="java_plain">type</span><span class="java_operator">=</span><span class="java_literal">"long"</span><span class="java_separator">),</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generator&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"ids_generator"</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Collection</span><span class="java_operator">&lt;</span><span class="java_type">Stamp</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;visaStamp&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ArrayList</span><span class="java_separator">();</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="d0e3238">2.4.6.2.3.&nbsp;@ManyToAny</a></h5></div></div></div><p><a id="d0e3238"><code class="classname">@ManyToAny</code> allows polymorphic
          associations to classes from multiple tables. This type of mapping
          always requires more than one column. The first column holds the
          type of the associated entity. The remaining columns hold the
          identifier. It is impossible to specify a foreign key constraint for
          this kind of association, so this is most certainly not meant as the
          usual way of mapping (polymorphic) associations. You should use this
          only in very special cases (eg. audit logs, user session data,
          etc).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e3238"><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">ManyToAny</span><!-- <br/> --><span class="java_separator">(</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metaColumn&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">Column</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"property_type"</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AnyMetaDef</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idType&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"integer"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metaType&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"string"</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metaValues&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MetaValue</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"S"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">StringProperty</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">MetaValue</span><span class="java_separator">(</span><span class="java_plain">&nbsp;value&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"I"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;targetEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">IntegerProperty</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Cascade</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">ALL&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"obj_properties"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;joinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"obj_id"</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inverseJoinColumns&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"property_id"</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Property</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getGeneralProperties</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></a></pre><p><a id="d0e3238">Like <code class="classname">@Any</code>,
          <code class="classname">@ManyToAny</code> can use named
          <code class="classname">@AnyDef</code>s, see </a><a class="xref" href="#entity-hibspec-singleassoc-any" title="2.4.5.2.Â @Any">Section&nbsp;2.4.5.2, â@Anyâ</a> for more info.</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-cascade">2.4.7.&nbsp;Cascade</a></h3></div></div></div><p><a id="entity-hibspec-cascade">Hibernate offers more operations than the Java Persistence
      specification. You can use the <code class="literal">@Cascade</code> annotation to
      cascade the following operations:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-hibspec-cascade">PERSIST</a></p></li><li><p><a id="entity-hibspec-cascade">MERGE</a></p></li><li><p><a id="entity-hibspec-cascade">REMOVE</a></p></li><li><p><a id="entity-hibspec-cascade">REFRESH</a></p></li><li><p><a id="entity-hibspec-cascade">DELETE</a></p></li><li><p><a id="entity-hibspec-cascade">SAVE_UPDATE</a></p></li><li><p><a id="entity-hibspec-cascade">REPLICATE</a></p></li><li><p><a id="entity-hibspec-cascade">DELETE_ORPHAN (alternatively, use the
          <code class="methodname">@OneToOne.orphanRemoval</code> or
          <code class="methodname">@OneToMany.orphanRemoval</code> flag)</a></p></li><li><p><a id="entity-hibspec-cascade">LOCK</a></p></li><li><p><a id="entity-hibspec-cascade">EVICT (alternatively, use the standard DETACH flag).</a></p></li></ul></div><p><a id="entity-hibspec-cascade">This is especially useful for <code class="literal">SAVE_UPDATE</code>
      (which is the operation cascaded at flush time if you use plain
      Hibernate Annotations - Hibernate EntityManager cascade
      <code class="literal">PERSIST</code> at flush time as per the
      specification).</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-cascade"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">OneToMany</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">&nbsp;cascade&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">{</span><!-- <br/> --><span class="java_type">CascadeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">PERSIST</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">CascadeType</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">MERGE</span><!-- <br/> --><span class="java_separator">}</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Cascade</span><span class="java_separator">(</span><span class="java_plain">org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">CascadeType</span><span class="java_separator">.</span><span class="java_plain">REPLICATE</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Collection</span><span class="java_operator">&lt;</span><span class="java_type">Employer</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getEmployers</span><span class="java_separator">()</span></a></pre><p><a id="entity-hibspec-cascade">It is recommended to use <code class="classname">@Cascade</code> to
      compliment <code class="classname">@*To*(cascade=...)</code> as shown in the
      previous example.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-filters">2.4.8.&nbsp;Filters</a></h3></div></div></div><p><a id="entity-hibspec-filters">Hibernate has the ability to apply arbitrary filters on top of
      your data. Those filters are applied at runtime on a given session.
      First, you need to define them.</a></p><p><a id="entity-hibspec-filters"><code class="literal">@org.hibernate.annotations.FilterDef</code> or
      <code class="literal">@FilterDefs</code> define filter definition(s) used by
      filter(s) using the same name. A filter definition has a name() and an
      array of parameters(). A parameter will allow you to adjust the behavior
      of the filter at runtime. Each parameter is defined by a
      <code class="literal">@ParamDef</code> which has a name and a type. You can also
      define a defaultCondition() parameter for a given
      <code class="literal">@FilterDef</code> to set the default condition to use when
      none are defined in each individual <code class="literal">@Filter</code>. A
      <code class="literal">@FilterDef</code>(s) can be defined at the class or package
      level.</a></p><p><a id="entity-hibspec-filters">We now need to define the SQL filter clause applied to either the
      entity load or the collection load. <code class="literal">@Filter</code> is used
      and placed either on the entity or the collection element</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-filters"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">FilterDef</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"minLength"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;parameters</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">ParamDef</span><span class="java_separator">(</span><span class="java_plain">&nbsp;name</span><span class="java_operator">=</span><span class="java_literal">"minLength"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;type</span><span class="java_operator">=</span><span class="java_literal">"integer"</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Filters</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Filter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"betweenLength"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;condition</span><span class="java_operator">=</span><span class="java_literal">":minLength&nbsp;&lt;=&nbsp;length&nbsp;and&nbsp;:maxLength&nbsp;&gt;=&nbsp;length"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Filter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"minLength"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;condition</span><span class="java_operator">=</span><span class="java_literal">":minLength&nbsp;&lt;=&nbsp;length"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Forest</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></a></pre><p><a id="entity-hibspec-filters">When the collection use an association table as a relational
      representation, you might want to apply the filter condition to the
      association table itself or to the target entity table. To apply the
      constraint on the target entity, use the regular
      <code class="literal">@Filter</code> annotation. However, if you wan to target the
      association table, use the <code class="literal">@FilterJoinTable</code>
      annotation.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-filters"><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><!-- <br/> --><span class="java_type">OneToMany</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">JoinTable</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">filter&nbsp;on&nbsp;the&nbsp;target&nbsp;entity&nbsp;table</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Filter</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"betweenLength"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;condition</span><span class="java_operator">=</span><span class="java_literal">":minLength&nbsp;&lt;=&nbsp;length&nbsp;and&nbsp;:maxLength&nbsp;&gt;=&nbsp;length"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">filter&nbsp;on&nbsp;the&nbsp;association&nbsp;table</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FilterJoinTable</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"security"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;condition</span><span class="java_operator">=</span><span class="java_literal">":userlevel&nbsp;&gt;=&nbsp;requredLevel"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Forest</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;getForests</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span><span class="java_plain">&nbsp;</span><span class="java_separator">...</span><span class="java_plain">&nbsp;</span><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-query">2.4.9.&nbsp;Queries</a></h3></div></div></div><p><a id="entity-hibspec-query">Since Hibernate has more features on named queries than the one
      defined in the JPA specification,
      <code class="literal">@org.hibernate.annotations.NamedQuery</code>,
      <code class="literal">@org.hibernate.annotations.NamedQueries</code>,
      <code class="literal">@org.hibernate.annotations.NamedNativeQuery</code> and
      <code class="literal">@org.hibernate.annotations.NamedNativeQueries</code> have
      been introduced. They add some attributes to the standard version and
      can be used as a replacement:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-hibspec-query">flushMode: define the query flush mode (Always, Auto, Commit
          or Manual)</a></p></li><li><p><a id="entity-hibspec-query">cacheable: whether the query should be cached or not</a></p></li><li><p><a id="entity-hibspec-query">cacheRegion: cache region used if the query is cached</a></p></li><li><p><a id="entity-hibspec-query">fetchSize: JDBC statement fetch size for this query</a></p></li><li><p><a id="entity-hibspec-query">timeout: query time out</a></p></li><li><p><a id="entity-hibspec-query">callable: for native queries only, to be set to true for
          stored procedures</a></p></li><li><p><a id="entity-hibspec-query">comment: if comments are activated, the comment seen when the
          query is sent to the database.</a></p></li><li><p><a id="entity-hibspec-query">cacheMode: Cache interaction mode (get, ignore, normal, put or
          refresh)</a></p></li><li><p><a id="entity-hibspec-query">readOnly: whether or not the elements retrievent from the
          query are in read only mode.</a></p></li></ul></div><p><a id="entity-hibspec-query">Those hints can be set in a standard
      <code class="literal">@javax.persistence.NamedQuery</code> annotations through the
      detyped <code class="literal">@QueryHint</code>. Another key advantage is the
      ability to set those annotations at a package level.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="entity-hibspec-customsql">2.4.10.&nbsp;Custom SQL for CRUD operations</a></h3></div></div></div><p><a id="entity-hibspec-customsql">Hibernate gives you the ability to override every single SQL
      statement generated. We have seen native SQL query usage already, but
      you can also override the SQL statement used to load or change the state
      of entities.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-customsql"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Table</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"CHAOS"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SQLInsert</span><span class="java_separator">(</span><span class="java_plain">&nbsp;sql</span><span class="java_operator">=</span><span class="java_literal">"INSERT&nbsp;INTO&nbsp;CHAOS(size,&nbsp;name,&nbsp;nickname,&nbsp;id)&nbsp;VALUES(?,upper(?),?,?)"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SQLUpdate</span><span class="java_separator">(</span><span class="java_plain">&nbsp;sql</span><span class="java_operator">=</span><span class="java_literal">"UPDATE&nbsp;CHAOS&nbsp;SET&nbsp;size&nbsp;=&nbsp;?,&nbsp;name&nbsp;=&nbsp;upper(?),&nbsp;nickname&nbsp;=&nbsp;?&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;?"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SQLDelete</span><span class="java_separator">(</span><span class="java_plain">&nbsp;sql</span><span class="java_operator">=</span><span class="java_literal">"DELETE&nbsp;CHAOS&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;?"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SQLDeleteAll</span><span class="java_separator">(</span><span class="java_plain">&nbsp;sql</span><span class="java_operator">=</span><span class="java_literal">"DELETE&nbsp;CHAOS"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Loader</span><span class="java_separator">(</span><span class="java_plain">namedQuery&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"chaos"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">NamedNativeQuery</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"chaos"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;query</span><span class="java_operator">=</span><span class="java_literal">"select&nbsp;id,&nbsp;size,&nbsp;name,&nbsp;lower(&nbsp;nickname&nbsp;)&nbsp;as&nbsp;nickname&nbsp;from&nbsp;CHAOS&nbsp;where&nbsp;id=&nbsp;?"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;resultClass&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Chaos</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Chaos</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;size</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;nickname</span><span class="java_separator">;</span></a></pre><p><a id="entity-hibspec-customsql"><code class="literal">@SQLInsert</code>, <code class="literal">@SQLUpdate</code>,
      <code class="literal">@SQLDelete</code>, <code class="literal">@SQLDeleteAll</code>
      respectively override the INSERT statement, UPDATE statement, DELETE
      statement, DELETE statement to remove all entities.</a></p><p><a id="entity-hibspec-customsql">If you expect to call a store procedure, be sure to set the
      <code class="literal">callable</code> attribute to true
      (<code class="literal">@SQLInsert(callable=true, ...)</code>).</a></p><p><a id="entity-hibspec-customsql">To check that the execution happens correctly, Hibernate allows
      you to define one of those three strategies:</a></p><div class="itemizedlist"><ul><li><p><a id="entity-hibspec-customsql">NONE: no check is performed: the store procedure is expected
          to fail upon issues</a></p></li><li><p><a id="entity-hibspec-customsql">COUNT: use of rowcount to check that the update is
          successful</a></p></li><li><p><a id="entity-hibspec-customsql">PARAM: like COUNT but using an output parameter rather that
          the standard mechanism</a></p></li></ul></div><p><a id="entity-hibspec-customsql">To define the result check style, use the <code class="literal">check</code>
      parameter (<code class="literal">@SQLUpdate(check=ResultCheckStyle.COUNT,
      ...)</code>).</a></p><p><a id="entity-hibspec-customsql">You can also override the SQL load statement by a native SQL query
      or a HQL query. You just have to refer to a named query with the
      <code class="literal"><code class="literal">@Loader</code></code> annotation.</a></p><p><a id="entity-hibspec-customsql">You can use the exact same set of annotations to override the
      collection related statements.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-customsql"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">OneToMany</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">JoinColumn</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"chaos_fk"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SQLInsert</span><span class="java_separator">(</span><span class="java_plain">&nbsp;sql</span><span class="java_operator">=</span><span class="java_literal">"UPDATE&nbsp;CASIMIR_PARTICULE&nbsp;SET&nbsp;chaos_fk&nbsp;=&nbsp;?&nbsp;where&nbsp;id&nbsp;=&nbsp;?"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SQLDelete</span><span class="java_separator">(</span><span class="java_plain">&nbsp;sql</span><span class="java_operator">=</span><span class="java_literal">"UPDATE&nbsp;CASIMIR_PARTICULE&nbsp;SET&nbsp;chaos_fk&nbsp;=&nbsp;null&nbsp;where&nbsp;id&nbsp;=&nbsp;?"</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">CasimirParticle</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;particles&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">HashSet</span><span class="java_operator">&lt;</span><span class="java_type">CasimirParticle</span><span class="java_operator">&gt;</span><span class="java_separator">();</span></a></pre><p><a id="entity-hibspec-customsql">The parameters order is important and is defined by the order
      Hibernate handle properties. You can see the expected order by enabling
      debug logging for the <code class="literal">org.hibernate.persister.entity</code>
      level. With this level enabled Hibernate will print out the static SQL
      that is used to create, update, delete etc. entities. (To see the
      expected sequence, remember to not include your custom SQL through
      annotations as that will override the Hibernate generated static
      sql.)</a></p><p><a id="entity-hibspec-customsql">Overriding SQL statements for secondary tables is also possible
      using <code class="literal">@org.hibernate.annotations.Table</code> and either (or
      all) attributes <code class="literal">sqlInsert</code>,
      <code class="literal">sqlUpdate</code>, <code class="literal">sqlDelete</code>:</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="entity-hibspec-customsql"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">SecondaryTables</span><span class="java_separator">({</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">SecondaryTable</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"`Cat&nbsp;nbr1`"</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">SecondaryTable</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"Cat2"</span><span class="java_separator">})</span>
<!--  --><br><span class="java_plain">@org</span><span class="java_separator">.</span><span class="java_plain">hibernate</span><span class="java_separator">.</span><span class="java_plain">annotations</span><span class="java_separator">.</span><span class="java_type">Tables</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Table</span><span class="java_separator">(</span><span class="java_plain">appliesTo&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"Cat"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;comment&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"My&nbsp;cat&nbsp;table"</span><span class="java_plain">&nbsp;</span><span class="java_separator">),</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Table</span><span class="java_separator">(</span><span class="java_plain">appliesTo&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"Cat2"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;foreignKey&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;@</span><span class="java_type">ForeignKey</span><span class="java_separator">(</span><span class="java_plain">name</span><span class="java_operator">=</span><span class="java_literal">"FK_CAT2_CAT"</span><span class="java_separator">),</span><span class="java_plain">&nbsp;fetch&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">FetchMode</span><span class="java_separator">.</span><span class="java_plain">SELECT</span><span class="java_separator">,</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sqlInsert</span><span class="java_operator">=</span><span class="java_plain">@</span><span class="java_type">SQLInsert</span><span class="java_separator">(</span><span class="java_plain">sql</span><span class="java_operator">=</span><span class="java_literal">"insert&nbsp;into&nbsp;Cat2(storyPart2,&nbsp;id)&nbsp;values(upper(?),&nbsp;?)"</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Cat</span><span class="java_plain">&nbsp;</span><span class="java_keyword">implements</span><span class="java_plain">&nbsp;</span><span class="java_type">Serializable</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span></a></pre><p><a id="entity-hibspec-customsql">The previous example also show that you can give a comment to a
      given table (promary or secondary): This comment will be used for DDL
      generation.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3498">2.4.11.&nbsp;Tuplizer</a></h3></div></div></div><p><a id="d0e3498"><code class="classname">org.hibernate.tuple.Tuplizer</code>, and its
      sub-interfaces, are responsible for managing a particular representation
      of a piece of data, given that representation's
      <code class="literal">org.hibernate.EntityMode</code>. If a given piece of data is
      thought of as a data structure, then a tuplizer is the thing which knows
      how to create such a data structure and how to extract values from and
      inject values into such a data structure. For example, for the POJO
      entity mode, the correpsonding tuplizer knows how create the POJO
      through its constructor and how to access the POJO properties using the
      defined property accessors. There are two high-level types of Tuplizers,
      represented by the
      <code class="classname">org.hibernate.tuple.EntityTuplizer</code> and
      <code class="classname">org.hibernate.tuple.ComponentTuplizer</code> interfaces.
      EntityTuplizers are responsible for managing the above mentioned
      contracts in regards to entities, while
      <code class="classname">ComponentTuplizers</code> do the same for components.
      Check the Hibernate reference documentation for more information.</a></p><p><a id="d0e3498">To define tuplixer in annotations, simply use the
      <code class="literal">@Tuplizer</code> annotation on the according element</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><a id="d0e3498"><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">Tuplizer</span><span class="java_separator">(</span><span class="java_plain">impl&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">DynamicEntityTuplizer</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">interface</span><span class="java_plain">&nbsp;</span><span class="java_type">Cuisine</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Long</span><span class="java_plain">&nbsp;getId</span><span class="java_separator">();</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setId</span><span class="java_separator">(</span><span class="java_type">Long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">);</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getName</span><span class="java_separator">();</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setName</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">);</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Tuplizer</span><span class="java_separator">(</span><span class="java_plain">impl&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">DynamicComponentTuplizer</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">)</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Country</span><span class="java_plain">&nbsp;getCountry</span><span class="java_separator">();</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setCountry</span><span class="java_separator">(</span><span class="java_type">Country</span><span class="java_plain">&nbsp;country</span><span class="java_separator">);</span>
<!--  --><br><span class="java_separator">}</span></a></pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3524">2.4.12.&nbsp;Fetch profiles</a></h3></div></div></div><p><a id="d0e3524">In </a><a class="xref" href="#section-lazy-options-fetching-modes">Section&nbsp;2.4.5.1, âLazy options and
        fetching modesâ</a> we have
      seen how to affect the fetching strategy for associated objects using
      the <code class="classname">@Fetch</code> annotation. An alternative approach is
      a so called fetch profile. A fetch profile is a named configuration
      associated with the <code class="classname">org.hibernate.SessionFactory</code>
      which gets enabled on the <code class="classname">org.hibernate.Session.</code>
      Once enabled on a <code class="classname">org.hibernate.Session</code>, the
      fetch profile will be in affect for that session until it is explicitly
      disabled. Lets look at an example:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_plain">@</span><!-- <br/> --><span class="java_type">Entity</span>
<!--  --><br><span class="java_plain">@</span><span class="java_type">FetchProfile</span><span class="java_separator">(</span><span class="java_plain">name&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"customer-with-orders"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;fetchOverrides&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">FetchProfile</span><span class="java_separator">.</span><span class="java_type">FetchOverride</span><span class="java_separator">(</span><span class="java_plain">entity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;association&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_literal">"orders"</span><span class="java_separator">,</span><span class="java_plain">&nbsp;mode&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">FetchMode</span><span class="java_separator">.</span><span class="java_plain">JOIN</span><span class="java_separator">)</span>
<!--  --><br><span class="java_separator">})</span>
<!--  --><br><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Id</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">GeneratedValue</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;id</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">long</span><span class="java_plain">&nbsp;customerNumber</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;@</span><span class="java_type">OneToMany</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">Order</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;orders</span><span class="java_separator">;</span>

<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;standard&nbsp;getter</span><span class="java_operator">/</span><span class="java_plain">setter</span>
<!--  --><br><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">...</span>
<!--  --><br><span class="java_separator">}</span></pre><p>In the normal case the orders association would be lazy loaded by
      Hibernate, but in a usecase where it is more efficient to load the
      customer and their orders together you could do something like
      this:</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Session</span><!-- <br/> --><span class="java_plain">&nbsp;session&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">...;</span>
<!--  --><br><span class="java_plain">session</span><span class="java_separator">.</span><span class="java_plain">enableFetchProfile</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">"customer-with-orders"</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;name&nbsp;matches&nbsp;@</span><span class="java_type">FetchProfile</span><span class="java_plain">&nbsp;name</span>
<!--  --><br><span class="java_type">Customer</span><span class="java_plain">&nbsp;customer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Customer</span><span class="java_separator">)</span><span class="java_plain">&nbsp;session</span><span class="java_separator">.</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_type">Customer</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span><span class="java_plain">&nbsp;customerId&nbsp;</span><span class="java_separator">);</span>
<!--  --><br><span class="java_plain">session</span><span class="java_separator">.</span><span class="java_plain">disableFetchProfile</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">"customer-with-orders"</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span><span class="java_plain">&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;or&nbsp;just&nbsp;close&nbsp;the&nbsp;session</span>
<!--  --><br><span class="java_separator">...</span></pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>Fetch profile definitions are global and it does not matter on
        which class you place them. You can place the
        <code class="classname">@FetchProfile</code> annotation either onto a class or
        package (package-info.java). In order to define multiple fetch
        profiles for the same class or package
        <code class="classname">@FetchProfiles</code> can be used.</p></div><p>Currently only join style fetch profiles are supported, but they
      plan is to support additional styles. See <a class="ulink" href="http://opensource.atlassian.com/projects/hibernate/browse/HHH-3414">HHH-3414</a>
      for details. Refer also to the discussion about fetch profiles in the
      Hibernate Core documentation.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="xml-overriding">Chapter&nbsp;3.&nbsp;Overriding metadata through XML</a></h2></div></div></div><div class="toc"><dl><dt><a id="xml-overriding"><span class="section"></span></a><a href="#xml-overriding-principles">3.1. Principles</a></dt><dd><dl><dt><span class="section"><a href="#d0e3578">3.1.1. Global level metadata</a></span></dt><dt><span class="section"><a href="#xml-overriding-principles-entity">3.1.2. Entity level metadata</a></span></dt><dt><span class="section"><a href="#d0e3768">3.1.3. Property level metadata</a></span></dt><dt><span class="section"><a href="#d0e3813">3.1.4. Association level metadata</a></span></dt></dl></dd></dl></div><p>The primary target for metadata in EJB3 is annotations, but the EJB3
  specification provides a way to override or replace the annotation defined
  metadata through an XML deployment descriptor. In the current release only
  pure EJB3 annotations overriding are supported. If you wish to use Hibernate
  specific features in some entities, you'll have to either use annotations or
  fallback to hbm files. You can of course mix and match annotated entities
  and entities describes in hbm files.</p><p>The unit test suite shows some additional XML file samples.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="xml-overriding-principles">3.1.&nbsp;Principles</a></h2></div></div></div><p><a id="xml-overriding-principles">The XML deployment descriptor structure has been designed to reflect
    the annotations one. So if you know the annotations structure, using the
    XML schema will be straightforward for you.</a></p><p><a id="xml-overriding-principles">You can define one or more XML files describing your metadata, these
    files will be merged by the overriding engine.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3578">3.1.1.&nbsp;Global level metadata</a></h3></div></div></div><p><a id="d0e3578">You can define global level metadata available for all XML files.
      You must not define these metadata more than once per deployment.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><a id="d0e3578">
<span class="xml_processing_instruction">&lt;?xml&nbsp;version="1.0"&nbsp;encoding="UTF-8"?&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain"></span><br>
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">entity-mappings</span><span class="xml_plain">&nbsp;</span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"http://java.sun.com/xml/ns/persistence/orm"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xmlns:xsi</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">xsi:schemaLocation</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"http://java.sun.com/xml/ns/persistence/orm&nbsp;orm_2_0.xsd"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_attribute_name">version</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"2.0"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit-metadata</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">xml-mapping-metadata-complete</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit-defaults</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">schema</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">myschema</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">schema</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">catalog</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">mycatalog</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">catalog</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">cascade-persist</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit-defaults</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit-metadata</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</a></pre><p><a id="d0e3578"><code class="literal">xml-mapping-metadata-complete</code> means that all
      entity, mapped-superclasses and embeddable metadata should be picked up
      from XML (ie ignore annotations).</a></p><p><a id="d0e3578"><code class="literal">schema / catalog</code> will override all default
      definitions of schema and catalog in the metadata (both XML and
      annotations).</a></p><p><a id="d0e3578"><code class="literal">cascade-persist</code> means that all associations
      have PERSIST as a cascade type. We recommend you to not use this
      feature.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="xml-overriding-principles-entity">3.1.2.&nbsp;Entity level metadata</a></h3></div></div></div><p><a id="xml-overriding-principles-entity">You can either define or override metadata informations on a given
      entity.</a></p><div class="programlistingco"><pre class="programlisting"><a id="xml-overriding-principles-entity">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;entity-mappin<span xmlns="" class="co" id="aa1"><img src="./Annotations_RefGuide_files/1.png" alt="(1)"></span>gs 
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
  version="2.0"&gt;

    &lt;package&gt;o<span xmlns="" class="co" id="aa2"><img src="./Annotations_RefGuide_files/2.png" alt="(2)"></span>rg.hibernate.test.annotations.reflection&lt;/package&gt;
    &lt;entity cl<span xmlns="" class="co" id="aa3"><img src="./Annotations_RefGuide_files/3.png" alt="(3)"></span>ass="Administration" access="PROPERTY" metadata-complete="true"&gt;
        &lt;table<span xmlns="" class="co" id="aa4"><img src="./Annotations_RefGuide_files/4.png" alt="(4)"></span> name="tbl_admin"&gt;
            &lt;unique-constraint&gt;
                &lt;column-name&gt;firstname&lt;/column-name&gt;
                &lt;column-name&gt;lastname&lt;/column-name&gt;
            &lt;/unique-constraint&gt;
        &lt;/table&gt;
        &lt;secon<span xmlns="" class="co" id="aa5"><img src="./Annotations_RefGuide_files/5.png" alt="(5)"></span>dary-table name="admin2"&gt;
            &lt;primary-key-join-column name="admin_id" referenced-column-name="id"/&gt;
            &lt;unique-constraint&gt;
                &lt;column-name&gt;address&lt;/column-name&gt;
            &lt;/unique-constraint&gt;
        &lt;/secondary-table&gt;
        &lt;id-cl<span xmlns="" class="co" id="aa6"><img src="./Annotations_RefGuide_files/6.png" alt="(6)"></span>ass class="SocialSecurityNumber"/&gt;
        &lt;inher<span xmlns="" class="co" id="aa7"><img src="./Annotations_RefGuide_files/7.png" alt="(7)"></span>itance strategy="JOINED"/&gt;
        &lt;seque<span xmlns="" class="co" id="aa8"><img src="./Annotations_RefGuide_files/8.png" alt="(8)"></span>nce-generator name="seqhilo" sequence-name="seqhilo"/&gt;
        &lt;table<span xmlns="" class="co" id="aa9"><img src="./Annotations_RefGuide_files/9.png" alt="(9)"></span>-generator name="table" table="tablehilo"/&gt;
        ...
    &lt;/entity&gt;

    &lt;entity class="PostalAdministration"&gt;
        &lt;prima<span xmlns="" class="co" id="aa10"><img src="./Annotations_RefGuide_files/10.png" alt="(10)"></span>ry-key-join-column name="id"/&gt;
        ...
    &lt;/entity&gt;
&lt;/entity-mappings&gt;</a></pre><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/1.png" alt="1" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">entity-mappings</code>: entity-mappings is the
            root element for all XML files. You must declare the xml schema,
            the schema file is included in the hibernate-annotations.jar file,
            no internet access will be processed by Hibernate
            Annotations.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/2.png" alt="2" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">package</code> (optional): default package used
            for all non qualified class names in the given deployment
            descriptor file.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/3.png" alt="3" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">entity</code>: desribes an entity.</p><p><code class="literal">metadata-complete</code> defines whether the
            metadata description for this element is complete or not (in other
            words, if annotations present at the class level should be
            considered or not).</p><p>An entity has to have a <code class="literal">class</code> attribute
            refering the java class the metadata applies on.</p><p>You can overrides entity name through the
            <code class="literal">name</code> attribute, if none is defined and if an
            <code class="literal">@Entity.name</code> is present, then it is used
            (provided that metadata complete is not set).</p><p>For metadata complete (see below) element, you can define an
            <code class="literal">access</code> (either <code class="literal">FIELD</code> or
            <code class="literal">PROPERTY</code> (default)). For non medatada complete
            element, if <code class="literal">access</code> is not defined, the @Id
            position will lead position, if <code class="literal">access</code> is
            defined, the value is used.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/4.png" alt="4" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">table</code>: you can declare table properties
            (name, schema, catalog), if none is defined, the java annotation
            is used.</p><p>You can define one or several unique constraints as seen in
            the example</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/5.png" alt="5" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">secondary-table</code>: defines a secondary
            table very much like a regular table except that you can define
            the primary key / foreign key column(s) through the
            <code class="literal">primary-key-join-column</code> element. On non
            metadata complete, annotation secondary tables are used only if
            there is no <code class="literal">secondary-table</code> definition,
            annotations are ignored otherwise.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/6.png" alt="6" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">id-class</code>: defines the id class in a
            similar way <code class="literal">@IdClass</code> does</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/7.png" alt="7" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">inheritance</code>: defines the inheritance
            strategy (<code class="literal">JOINED</code>,
            <code class="literal">TABLE_PER_CLASS</code>,
            <code class="literal">SINGLE_TABLE</code>), Available only at the root
            entity level</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/8.png" alt="8" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">sequence-generator</code>: defines a sequence
            generator</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/9.png" alt="9" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">table-generator</code>: defines a table
            generator</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/10.png" alt="10" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal"><code class="literal">primary-key-join-column</code></code>:
            defines the primary key join column for sub entities when JOINED
            inheritance strategy is used</p></td></tr></tbody></table></div></div><div class="programlistingco"><pre class="programlisting"><a id="xml-overriding-principles-entity">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;entity-mappings 
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
  version="2.0"&gt;

    &lt;package&gt;org.hibernate.test.annotations.reflection&lt;/package&gt;
    &lt;entity class="Music" access="PROPERTY" metadata-complete="true"&gt;
        &lt;discr<span xmlns="" class="co" id="ab1"><img src="./Annotations_RefGuide_files/1.png" alt="(1)"></span>iminator-value&gt;Generic&lt;/discriminator-value&gt;
        &lt;discriminator-column length="34"/&gt;
        ...
    &lt;/entity&gt;

    &lt;entity class="PostalAdministration"&gt;
        &lt;primary-key-join-column name="id"/&gt;
        &lt;named<span xmlns="" class="co" id="ab2"><img src="./Annotations_RefGuide_files/2.png" alt="(2)"></span>-query name="adminById"&gt;
            &lt;query&gt;select m from Administration m where m.id = :id&lt;/query&gt;
            &lt;hint name="org.hibernate.timeout" value="200"/&gt;
        &lt;/named-query&gt;
        &lt;named<span xmlns="" class="co" id="ab3"><img src="./Annotations_RefGuide_files/3.png" alt="(3)"></span>-native-query name="allAdmin" result-set-mapping="adminrs"&gt;
            &lt;query&gt;select *, count(taxpayer_id) as taxPayerNumber 
            from Administration, TaxPayer
            where taxpayer_admin_id = admin_id group by ...&lt;/query&gt;
            &lt;hint name="org.hibernate.timeout" value="200"/&gt;
        &lt;/named-native-query&gt;
        &lt;sql-r<span xmlns="" class="co" id="ab4"><img src="./Annotations_RefGuide_files/4.png" alt="(4)"></span>esult-set-mapping name="adminrs"&gt;
            &lt;entity-result entity-class="Administration"&gt;
                &lt;field-result name="name" column="fld_name"/&gt;
            &lt;/entity-result&gt;
            &lt;column-result name="taxPayerNumber"/&gt;
        &lt;/sql-result-set-mapping&gt;
        &lt;attri<span xmlns="" class="co" id="ab5"><img src="./Annotations_RefGuide_files/5.png" alt="(5)"></span>bute-override name="ground"&gt;
            &lt;column name="fld_ground" unique="true" scale="2"/&gt;
        &lt;/attribute-override&gt;
        &lt;association-override name="referer"&gt;
            &lt;join-column name="referer_id" referenced-column-name="id"/&gt;
        &lt;/association-override&gt;
        ...
    &lt;/entity&gt;
&lt;/entity-mappings&gt;</a></pre><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/1.png" alt="1" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">discriminator-value /
            discriminator-column</code>: defines the discriminator value
            and the column holding it when the SINGLE_TABLE inheritance
            strategy is chosen</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/2.png" alt="2" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">named-query</code>: defines named queries and
            possibly the hints associated to them. Those definitions are
            additive to the one defined in annotations, if two definitions
            have the same name, the XML one has priority.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/3.png" alt="3" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">named-native-query</code>: defines an named
            native query and its sql result set mapping. Alternatively, you
            can define the <code class="literal">result-class</code>. Those definitions
            are additive to the one defined in annotations, if two definitions
            have the same name, the XML one has priority.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/4.png" alt="4" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">sql-result-set-mapping</code>: describes the
            result set mapping structure. You can define both entity and
            column mappings. Those definitions are additive to the one defined
            in annotations, if two definitions have the same name, the XML one
            has priority</p></td></tr><tr><td width="5%" valign="top" align="left"><p><img xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" src="./Annotations_RefGuide_files/5.png" alt="5" border="0" height="17px" width="17px"></p></td><td valign="top" align="left"><p><code class="literal">attribute-override /
            association-override</code>: defines a column or join column
            overriding. This overriding is additive to the one defined in
            annotations</p></td></tr></tbody></table></div></div><p><a id="xml-overriding-principles-entity">Same applies for <code class="literal">&lt;embeddable&gt;</code> and
      <code class="literal">&lt;mapped-superclass&gt;</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3768">3.1.3.&nbsp;Property level metadata</a></h3></div></div></div><p><a id="d0e3768">You can of course defines XML overriding for properties. If
      metadata complete is defined, then additional properties (ie at the Java
      level) will be ignored. Otherwise, once you start overriding a property,
      all annotations on the given property are ignored. All property level
      metadata behave in <code class="literal">entity/attributes</code>,
      <code class="literal">mapped-superclass/attributes</code> or
      <code class="literal">embeddable/attributes</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><a id="d0e3768">
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attributes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">id</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"id"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"fld_id"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">generated-value</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">generator</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"generator"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">strategy</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"SEQUENCE"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">temporal</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">DATE</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">temporal</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">sequence-generator</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"generator"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">sequence-name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"seq"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">id</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">version</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"version"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">embedded</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"embeddedObject"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attribute-override</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_attribute_value">"subproperty"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"my_column"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attribute-override</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">embedded</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">basic</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"status"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">optional</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"false"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">enumerated</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">STRING</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">enumerated</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">basic</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">basic</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"serial"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">optional</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"true"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"serialbytes"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">lob</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">basic</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">basic</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"terminusTime"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fetch</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"LAZY"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">temporal</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">TIMESTAMP</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">temporal</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">basic</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attributes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</a></pre><p><a id="d0e3768">You can override a property through <code class="literal">id</code>,
      <code class="literal">embedded-id</code>, <code class="literal">version</code>,
      <code class="literal">embedded</code> and <code class="literal">basic</code>. Each of these
      elements can have subelements accordingly: <code class="literal">lob</code>,
      <code class="literal">temporal</code>, <code class="literal">enumerated</code>,
      <code class="literal">column</code>.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3813">3.1.4.&nbsp;Association level metadata</a></h3></div></div></div><p><a id="d0e3813">You can define XML overriding for associations. All association
      level metadata behave in <code class="literal">entity/attributes</code>,
      <code class="literal">mapped-superclass/attributes</code> or
      <code class="literal">embeddable/attributes</code>.</a></p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><a id="d0e3813">
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">attributes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">one-to-many</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"players"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">fetch</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"EAGER"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">map-key</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"name"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">join-column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"driver"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">join-column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"number"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">one-to-many</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">many-to-many</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"roads"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">target-entity</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"Administration"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">order-by</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">maxSpeed</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">order-by</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">join-table</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"bus_road"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">join-column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"driver"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">join-column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"number"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">inverse-join-column</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"road_id"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">unique-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">column-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">driver</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">column-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">column-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain">number</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">column-name</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">unique-constraint</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">join-table</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">many-to-many</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">many-to-many</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"allTimeDrivers"</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">mapped-by</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"drivenBuses"</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">attributes</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</a></pre><p><a id="d0e3813">You can override an association through
      <code class="literal">one-to-many</code>, <code class="literal">one-to-one</code>,
      <code class="literal">many-to-one</code>, and <code class="literal">many-to-many</code>.
      Each of these elements can have subelements accordingly:
      <code class="literal">join-table</code> (which can have
      <code class="literal">join-column</code>s and
      <code class="literal">inverse-join-column</code>s),
      <code class="literal"><code class="literal">join-column</code>s</code>,
      <code class="literal">map-key</code>, and <code class="literal">order-by</code>.
      <code class="literal">mapped-by</code> and <code class="literal">target-entity</code> can be
      defined as attributes when it makes sense. Once again the structure is
      reflects the annotations structure. You can find all semantic
      informations in the chapter describing annotations.</a></p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="additionalmodules">Chapter&nbsp;4.&nbsp;Additional modules</a></h2></div></div></div><div class="toc"><dl><dt><a id="additionalmodules"><span class="section"></span></a><a href="#d0e3875">4.1. Bean Validation</a></dt><dd><dl><dt><span class="section"><a href="#d0e3895">4.1.1. Adding Bean Validation</a></span></dt><dt><span class="section"><a href="#d0e3900">4.1.2. Configuration</a></span></dt><dt><span class="section"><a href="#d0e4011">4.1.3. Catching violations</a></span></dt><dt><span class="section"><a href="#d0e4044">4.1.4. Database schema</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4084">4.2. Hibernate Validator 3</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4090">4.2.1. Description</a></span></dt><dt><span class="section"><a href="#d0e4110">4.2.2. Integration with Hibernate Annotations</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4142">4.3. Hibernate Search</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4145">4.3.1. Description</a></span></dt><dt><span class="section"><a href="#d0e4156">4.3.2. Integration with Hibernate Annotations</a></span></dt></dl></dd></dl></div><p>Hibernate Annotations mainly focuses on persistence metadata. The
  project also have a nice integration with some external modules.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e3875">4.1.&nbsp;Bean Validation</a></h2></div></div></div><p><a id="d0e3875">Bean Validation standardizes how to define and declare domain model
    level constraints. You can, for example, express that a property should
    never be null, that the account balance should be strictly positive, etc.
    These domain model constraints are declared in the bean itself by
    annotating its properties. Bean Validation can then read them and check
    for constraint violations. The validation mechanism can be executed in
    different layers in your application without having to duplicate any of
    these rules (presentation layer, data access layer). Following the DRY
    principle, Bean Validation and its reference implementation Hibernate
    Validator has been designed for that purpose.</a></p><p><a id="d0e3875">The integration between Hibernate and Bean Validation works at two
    levels. First, it is able to check in-memory instances of a class for
    constraint violations. Second, it can apply the constraints to the
    Hibernate metamodel and incorporate them into the generated database
    schema.</a></p><p><a id="d0e3875">Each constraint annotation is associated to a validator
    implementation responsible for checking the constraint on the entity
    instance. A validator can also (optionally) apply the constraint to the
    Hibernate metamodel, allowing Hibernate to generate DDL that expresses the
    constraint. With the appropriate event listener, you can execute the
    checking operation on inserts, updates and deletes done by
    Hibernate.</a></p><p><a id="d0e3875">When checking instances at runtime, Hibernate Validator returns
    information about constraint violations in a set of
    <code class="classname">ConstraintViolation</code>s. Among other information, the
    <code class="classname">ConstraintViolation</code> contains an error description
    message that can embed the parameter values bundle with the annotation
    (eg. size limit), and message strings that may be externalized to a
    <code class="classname">ResourceBundle</code>.</a></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3895">4.1.1.&nbsp;Adding Bean Validation</a></h3></div></div></div><p><a id="d0e3895">To enable the Hibernate - Bean Validation integration, simply add
      a Bean Validation provider (preferably Hibernate Validation 4) in your
      classpath.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e3900">4.1.2.&nbsp;Configuration</a></h3></div></div></div><p><a id="d0e3900">By default, no configuration is necessary.</a></p><p><a id="d0e3900">The <code class="classname">Default</code> group is validated on entity
      insert and update and the database model is updated accordingly based on
      the <code class="classname">Default</code> group as well.</a></p><p><a id="d0e3900">You can customize the Bean Validation integration by setting the
      validation mode. Use the
      <code class="literal">javax.persistence.validation.mode</code> property and set it
      up for example in your <code class="filename">persistence.xml</code> file or your
      <code class="filename">hibernate.cfg.xml</code> file. Several options are
      possible:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e3900"><code class="literal">auto</code> (default): enable integration between
          Bean Validation and Hibernate (callback and ddl generation) only if
          Bean Validation is present in the classpath.</a></p></li><li><p><a id="d0e3900"><code class="literal">none</code>: disable all integration between Bean
          Validation and Hibernate</a></p></li><li><p><a id="d0e3900"><code class="literal">callback</code>: only validate entities when they
          are either inserted, updated or deleted. An exception is raised if
          no Bean Validation provider is present in the classpath.</a></p></li><li><p><a id="d0e3900"><code class="literal">ddl</code>: only apply constraints to the database
          schema when generated by Hibernate. An exception is raised if no
          Bean Validation provider is present in the classpath. This value is
          not defined by the Java Persistence spec and is specific to
          Hibernate.</a></p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2><a id="d0e3900">Note</a></h2><p><a id="d0e3900">You can use both <code class="literal">callback</code> and
        <code class="literal">ddl</code> together by setting the property to
        <code class="literal">callback, dll</code></a></p><pre xmlns="" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) --><a id="d0e3900">
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence</span><span class="xml_plain">&nbsp;...</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit</span><span class="xml_plain">&nbsp;...</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"javax.persistence.validation.mode"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"callback,&nbsp;ddl"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</a></pre><p><a id="d0e3900">This is equivalent to <code class="literal">auto</code> except that if no
        Bean Validation provider is present, an exception is raised.</a></p></div><p><a id="d0e3900">If you want to validate different groups during insertion, update
      and deletion, use:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e3900"><code class="literal">javax.persistence.validation.group.pre-persist</code>:
          groups validated when an entity is about to be persisted (default to
          <code class="classname">Default</code>)</a></p></li><li><p><a id="d0e3900"><code class="literal">javax.persistence.validation.group.pre-update</code>:
          groups validated when an entity is about to be updated (default to
          <code class="classname">Default</code>)</a></p></li><li><p><a id="d0e3900"><code class="literal">javax.persistence.validation.group.pre-remove</code>:
          groups validated when an entity is about to be deleted (default to
          no group)</a></p></li><li><p><a id="d0e3900"><code class="literal">org.hibernate.validator.group.ddl</code>: groups
          considered when applying constraints on the database schema (default
          to <code class="classname">Default</code>)</a></p></li></ul></div><p><a id="d0e3900">Each property accepts the fully qualified class names of the
      groups validated separated by a comma (,)</a></p><div class="example"><a id="d0e3997"><p class="title"><b>Example&nbsp;4.1.&nbsp;Using custom groups for validation</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="XML"><!-- XML : generated by JHighlight v1.0 (http://jhighlight.dev.java.net) -->
<span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence</span><span class="xml_plain">&nbsp;...</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">persistence-unit</span><span class="xml_plain">&nbsp;...</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;...</span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"javax.persistence.validation.group.pre-update"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"javax.validation.group.Default,&nbsp;com.acme.group.Strict"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"javax.persistence.validation.group.pre-remove"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"com.acme.group.OnDelete"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;</span><span class="xml_tag_name">property</span><span class="xml_plain">&nbsp;</span><span class="xml_attribute_name">name</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"org.hibernate.validator.group.ddl"</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_attribute_name">value</span><span class="xml_tag_symbols">=</span><span class="xml_attribute_value">"com.acme.group.DDL"</span><span class="xml_tag_symbols">/&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">properties</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_plain">&nbsp;&nbsp;</span><span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence-unit</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
<span class="xml_tag_symbols">&lt;/</span><span class="xml_tag_name">persistence</span><span class="xml_tag_symbols">&gt;</span><span class="xml_plain"></span><br>
</pre></div></a></div><a id="d0e3997"><br class="example-break"><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>You can set these properties in
        <code class="filename">hibernate.cfg.xml</code>,
        <code class="filename">hibernate.properties</code> or programmatically.</p></div></a></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4011">4.1.3.&nbsp;Catching violations</a></h3></div></div></div><p><a id="d0e4011">If an entity is found to be invalid, the list of constraint
      violations is propagated by the
      <code class="classname">ConstraintViolationException</code> which exposes the
      set of <code class="classname">ConstraintViolation</code>s.</a></p><p><a id="d0e4011">This exception is wrapped in a
      <code class="classname">RollbackException</code> when the violation happens at
      commit time. Otherwise the
      <code class="classname">ConstraintViolationException</code> is returned (for
      example when calling <code class="methodname">flush()</code>. Note that
      generally, catchable violations are validated at a higher level (for
      example in Seam / JSF 2 via the JSF - Bean Validation integration or in
      your business layer by explicitly calling Bean Validation).</a></p><p><a id="d0e4011">An application code will rarely be looking for a
      <code class="classname">ConstraintViolationException</code> raised by Hibernate.
      This exception should be treated as fatal and the persistence context
      should be discarded (<code class="classname">EntityManager</code> or
      <code class="classname">Session</code>).</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4044">4.1.4.&nbsp;Database schema</a></h3></div></div></div><p><a id="d0e4044">Hibernate uses Bean Validation constraints to generate an accurate
      database schema:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e4044"><code class="classname">@NotNull</code> leads to a not null column
          (unless it conflicts with components or table inheritance)</a></p></li><li><p><a id="d0e4044"><code class="classname">@Size.max</code> leads to a
          <code class="literal">varchar(max)</code> definition for Strings</a></p></li><li><p><a id="d0e4044"><code class="classname">@Min</code>, <code class="classname">@Max</code> lead
          to column checks (like <code class="code">value &lt;= max</code>)</a></p></li><li><p><a id="d0e4044"><code class="classname">@Digits</code> leads to the definition of
          precision and scale (ever wondered which is which? It's easy now
          with <code class="classname">@Digits</code> :) )</a></p></li></ul></div><p><a id="d0e4044">These constraints can be declared directly on the entity
      properties or indirectly by using constraint composition.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4084">4.2.&nbsp;Hibernate Validator 3</a></h2></div></div></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2><a id="d0e4084">Warning</a></h2><p><a id="d0e4084">We strongly encourage you to use Hibernate Validator 4 and the
      Bean Validation integration. Consider Hibernate Validator 3 as
      legacy.</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4090">4.2.1.&nbsp;Description</a></h3></div></div></div><p><a id="d0e4090">Annotations are a very convenient and elegant way to specify
      invariant constraints for a domain model. You can, for example, express
      that a property should never be null, that the account balance should be
      strictly positive, etc. These domain model constraints are declared in
      the bean itself by annotating its properties. A validator can then read
      them and check for constraint violations. The validation mechanism can
      be executed in different layers in your application without having to
      duplicate any of these rules (presentation layer, data access layer).
      Following the DRY principle, Hibernate Validator has been designed for
      that purpose.</a></p><p><a id="d0e4090">Hibernate Validator works at two levels. First, it is able to
      check in-memory instances of a class for constraint violations. Second,
      it can apply the constraints to the Hibernate metamodel and incorporate
      them into the generated database schema.</a></p><p><a id="d0e4090">Each constraint annotation is associated to a validator
      implementation responsible for checking the constraint on the entity
      instance. A validator can also (optionally) apply the constraint to the
      Hibernate metamodel, allowing Hibernate to generate DDL that expresses
      the constraint. With the appropriate event listener, you can execute the
      checking operation on inserts and updates done by Hibernate. Hibernate
      Validator is not limited to use with Hibernate. You can easily use it
      anywhere in your application.</a></p><p><a id="d0e4090">When checking instances at runtime, Hibernate Validator returns
      information about constraint violations in an array of
      <code class="classname">InvalidValue</code> s. Among other information, the
      <code class="classname">InvalidValue</code> contains an error description
      message that can embed the parameter values bundle with the annotation
      (eg. length limit), and message strings that may be externalized to a
      <code class="classname">ResourceBundle</code> .</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4110">4.2.2.&nbsp;Integration with Hibernate Annotations</a></h3></div></div></div><p><a id="d0e4110">If Hibernate Validator
      (<code class="filename">hibernate-validator.jar</code>) is available in the
      classpath, Hibernate Annotations will integrate in two ways:</a></p><div class="itemizedlist"><ul><li><p><a id="d0e4110">Constraints will be applied to the Data Definition Language.
          In other words, the database schema will reflect the constraints
          (provided that you use the hbm2ddl tool).</a></p></li><li><p><a id="d0e4110">Before an entity change is applied to the database (insert or
          update), the entity is validated. Validation errors, if any, will be
          carried over through an
          <code class="classname">InvalidStateException</code>.</a></p></li></ul></div><p><a id="d0e4110">For entities free of validation rules, the runtime performance
      cost is null.</a></p><p><a id="d0e4110">To disable constraint propagation to DDL, set up
      <code class="literal">hibernate.validator.apply_to_ddl</code> to false in the
      configuration file. Such a need is very uncommon and not
      recommended.</a></p><p><a id="d0e4110">To disable pre-entity change validation, set up
      <code class="literal">hibernate.validator.autoregister_listeners</code> to false
      in the configuration file. Such a need is very uncommon and not
      recommended.</a></p><p><a id="d0e4110">Check the Hibernate Validator reference documentation for more
      information.</a></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="d0e4142">4.3.&nbsp;Hibernate Search</a></h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4145">4.3.1.&nbsp;Description</a></h3></div></div></div><p><a id="d0e4145">Full text search engines like <span class="productname">Apache
      Lucene</span>â¢ are a very powerful technology to bring free
      text/efficient queries to applications. If suffers several mismatches
      when dealing with a object domain model (keeping the index up to date,
      mismatch between the index structure and the domain model, querying
      mismatch...) Hibernate Search indexes your domain model thanks to a few
      annotations, takes care of the database / index synchronization and
      brings you back regular managed objects from free text queries.
      Hibernate Search is using </a><a class="ulink" href="http://lucene.apache.org/">Apache
      Lucene</a> under the cover.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="d0e4156">4.3.2.&nbsp;Integration with Hibernate Annotations</a></h3></div></div></div><p><a id="d0e4156">Hibernate Search integrates with Hibernate Annotations
      transparently provided that hibernate-search.jar is present in the
      classpath. If you do not wish to automatically register Hibernate Search
      event listeners, you can set
      <code class="literal">hibernate.search.autoregister_listeners</code> to false.
      Such a need is very uncommon and not recommended.</a></p><p><a id="d0e4156">Check the Hibernate Search reference documentation for more
      information.</a></p></div></div></div></div><hr xmlns=""><a xmlns="" href=""><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright Â© 2004 Red Hat Inc. and the various authors</p></a></div></div></body><div id="cyeBlackMaskLayer" style="background-color: rgb(19, 19, 19); position: fixed; width: 1980px; height: 1080px; z-index: -2147483648;"></div><div id="cye-workaround-body" style="position: absolute; left: 0px; top: 0px; z-index: -2147483646; background: none 0% 0% / auto repeat-x scroll padding-box border-box rgb(192, 192, 192); height: 66465px; width: 1253px;"></div><div id="cye-workaround-body-image" style="position: absolute; left: 0px; top: 0px; z-index: -2147483645; background: url(&quot;images/org/hibernate/bkg_gradient.png&quot;) 0% 0% / auto repeat-x scroll padding-box border-box rgba(0, 0, 0, 0); height: 66465px; width: 1253px;"></div></html>