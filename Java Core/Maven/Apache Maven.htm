<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Apache Maven</title>
    <link rel="stylesheet" href="../../Guides/grey.css">
    <style type="text/css">

    </style>
</head>
<body>
<a href="https://www.ibm.com/developerworks/java/library/j-5things13/index.html">src1</a>
<a href="https://www.ibm.com/developerworks/java/library/j-5things16/index.html">src2</a>
<h2>Apache Maven</h2>
<div class="ibm-col-6-4">
            <p class="dw-article-series-head">5 things you didn't know about ...</p>
        <h1 id="ibm-pagetitle-h1" class="ibm-h1">Apache Maven</h1><p class="dw-article-subhead">Tips for managing the project life cycle with Maven</p>
       
        <p>Maven is an excellent build tool for Java™ developers, and you can
use it to manage the life cycle of your projects as well. As a life-cycle
management tool, Maven operates against phases rather than Ant-style build
"tasks." Maven handles all phases of the project life cycle, including
validation, code generation, compilation, testing, packaging, integration
testing, verification, installation, deployment, and project site creation
and deployment.</p><p>To understand the difference between Maven and a traditional build tool,
consider the process of building a JAR file and an EAR file. Using Ant,
you would need to define specific tasks to assemble each artifact. Maven,
on the other hand, does most of that work for you: you just tell it
whether the project is a JAR or EAR file, then instruct it to process the
"package" phase. Maven will find the required resources and construct the
files. </p><p>You'll find plenty of introductory tutorials for getting started with
Maven, including some listed in this article's <a href="#artrelatedtopics">Related topics</a> section. The five tips here are intended to help
you with what comes next: the programming scenarios that arise when using
Maven to manage the life cycle of your applications.</p><h2 id="N1006E" class="ibm-h2">1. Executable JAR files</h2><div class="dw-article-sidebar ibm-background-cool-white-20"><h5>About this series</h5><p>So you think you know about Java programming? The fact is, most
    developers scratch the surface of the Java platform, learning just
    enough to get the job done. In this ongoing series, Java technology sleuths dig beneath the core
    functionality of the Java platform, turning up tips and tricks that
    could help you solve even your stickiest programming challenges.</p></div><p>Building a JAR file with Maven is pretty easy: just define the project
packaging as "jar" and then execute the package life-cycle phase. But
defining an executable JAR file is more tricky. Doing this effectively
involves the following steps:</p><ol><li>Define a <code>main</code> class in your JAR's MANIFEST.MF file that
    defines the executable class. (MANIFEST.MF is the file that Maven
    generates when packaging your application.) </li><li>Find all of the libraries on which your project depends.</li><li>Include those libraries in your MANIFEST.MF file so that your
    application classes can find them.</li></ol><p>You can do all of this manually, or you can do it more efficiently with the
help of two Maven plug-ins: <code>maven-jar-plugin</code> and
<code>maven-dependency-plugin</code>.</p><h3 id="N1008E" class="ibm-h3">maven-jar-plugin</h3><p>The <code>maven-jar-plugin</code> does many things, but here we're
interested in using it to modify the contents of a default MANIFEST.MF
file. In the plug-ins section of your POM file, add the code shown in
Listing 1:</p><h5 id="listing1" class="ibm-h5">Listing 1. Using maven-jar-plugin to modify
    MANIFEST.MF</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_889544" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;org.apache.maven.plugins&lt;/</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;maven-jar-plugin&lt;/</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">archive</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">manifest</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">addClasspath</code><code class="htmlscript plain">&gt;true&lt;/</code><code class="htmlscript plain">addClasspath</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">classpathPrefix</code><code class="htmlscript plain">&gt;lib/&lt;/</code><code class="htmlscript plain">classpathPrefix</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">mainClass</code><code class="htmlscript plain">&gt;com.mypackage.MyClass&lt;/</code><code class="htmlscript plain">mainClass</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">manifest</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">archive</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div></span><p>All Maven plug-ins expose their configuration through a
<code>&lt;configuration&gt;</code> element. In this example, the
<code>maven-jar-plugin</code> modifies its <code>archive</code> attribute
and specifically the archive's <code>manifest</code> attribute, which
controls the contents of the MANIFEST.MF file. It includes three
elements:</p><ul class="ibm-bullet-list"><li><code>addClassPath</code>: Setting this element to <em>true</em> tells
    the <code>maven-jar-plugin</code> to add a <code>Class-Path</code>
    element to the MANIFEST.MF file, and to include all dependencies in
    that <code>Class-Path</code> element</li><li><code>classpathPrefix</code>: If you plan on including all of your
    dependencies in the same directory as the JAR you are building, then
    you can omit this element; otherwise, use <code>classpathPrefix</code>
    to specify the prefixes of all dependent JAR files. In Listing 1,
    <code>classpathPrefix</code> specifies that all dependencies should be
    located in a "<code>lib</code>" folder relative to the archive.</li><li><code>mainClass</code>: Use this element to define the name of the
    class to execute when the user executes the JAR file with a
    <code>java -jar</code> command.</li></ul><h3 id="N100D2" class="ibm-h3">maven-dependency-plugin</h3><p>Once you've configured the MANIFEST.MF file with these three elements, your
next step is to actually copy all of the dependencies to the
<code>lib</code> folder. For this, you use the
<code>maven-dependency-plugin</code>, as shown in Listing 2:</p><h5 id="listing2" class="ibm-h5">Listing 2. Using maven-dependency-plugin to copy
    dependencies to
lib</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_935250" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;org.apache.maven.plugins&lt;/</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;maven-dependency-plugin&lt;/</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;copy&lt;/</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">phase</code><code class="htmlscript plain">&gt;install&lt;/</code><code class="htmlscript plain">phase</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">goal</code><code class="htmlscript plain">&gt;copy-dependencies&lt;/</code><code class="htmlscript plain">goal</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">outputDirectory</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">${project.build.directory}/lib</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">outputDirectory</code><code class="htmlscript plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div></span><p>The <code>maven-dependency-plugin</code> has a
<code>copy-dependencies</code> goal that will copy your dependencies to
the directory of your choosing. In this example, I copied dependencies to
the <code>lib</code> directory under the <code>build</code> directory
(<code>project-home/target/lib</code>). </p><p>With your dependencies and modified MANIFEST.MF in place, you can launch
the application with a simple command:</p><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_291400" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">java -jar jarfilename.jar</code></div></div></td></tr></tbody></table></div></div></div></span><h2 id="N100FD" class="ibm-h2">2. Customizing MANIFEST.MF</h2><p>While the <code>maven-jar-plugin</code> allows you to modify common
portions of a <code>MANIFEST.MF</code> file, there are times when you need
a more customized MANIFEST.MF. The solution to this is two-fold:</p><ol><li>Define all of your custom configurations in a "template" MANIFEST.MF
    file.</li><li>Configure the <code>maven-jar-plugin</code> to use your MANIFEST.MF
    file and augment it with any Maven customizations.</li></ol><p>As an example, consider a JAR file that contains a Java agent. For a Java
agent to run, it needs to define a <code>Premain-Class</code> and
permissions. Listing 3 shows the contents of such a MANIFEST.MF file:</p><h5 id="listing3" class="ibm-h5">Listing 3. Premain-Class definition in a custom
    MANIFEST.MF
file</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_652710" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">Manifest-Version: 1.0</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">Premain-Class: com.geekcap.openapm.jvm.agent.Agent</code></div><div class="line number3 index2 alt2"><code class="htmlscript plain">Can-Redefine-Classes: true</code></div><div class="line number4 index3 alt1"><code class="htmlscript plain">Can-Retransform-Classes: true</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">Can-Set-Native-Method-Prefix: true</code></div></div></td></tr></tbody></table></div></div></div></span><p>In <a href="#listing3">Listing 3</a>, I've specified that the
<code>Premain-Class</code><code>com.geekcap.openapm.jvm.agent.Agent</code>
will be granted permission to redefine and retransform classes. Next, I
update the <code>maven-jar-plugin</code> to include the MANIFEST.MF file,
as shown in Listing 4:</p><h5 id="listing4" class="ibm-h5">Listing 4. Including
Premain-Class</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_980757" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;org.apache.maven.plugins&lt;/</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;maven-jar-plugin&lt;/</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">archive</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">manifestFile</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">src/main/resources/META-INF/MANIFEST.MF</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">manifestFile</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">manifest</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">addClasspath</code><code class="htmlscript plain">&gt;true&lt;/</code><code class="htmlscript plain">addClasspath</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">classpathPrefix</code><code class="htmlscript plain">&gt;lib/&lt;/</code><code class="htmlscript plain">classpathPrefix</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">mainClass</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">com.geekcap.openapm.ui.PerformanceAnalyzer</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">mainClass</code><code class="htmlscript plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">manifest</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">archive</code><code class="htmlscript plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div></span><div class="dw-article-sidebar ibm-background-cool-white-20"><h5>Maven 3</h5><p>Maven 2 has established its place as one of the most popular and
    well-used open source Java life-cycle management tools. Maven 3,
    promoted to alpha 5 in September 2010, brings some eagerly awaited
    changes to Maven. See the <a href="#artrelatedtopics">Related
        topics</a> section to find out what's new in Maven 3.</p></div><p>This is an interesting example because it both defines a
<code>Premain-Class</code> that allows the JAR file to work as a Java
agent and has a <code>mainClass</code> that allows it to run as an
executable JAR file. In this particular example, I've used
<code>OpenAPM</code> (a code tracing tool that I built) to define code
tracing that will be recorded by the Java agent and a user interface,
which will facilitate analysis of recorded traces. In short, the example
shows the power of combining an explicit manifest file with dynamic
modifications.</p><h2 id="N10149" class="ibm-h2">3. Dependency trees</h2><p>One of the most useful features of Maven is its support for dependency
management: you simply define the libraries your application depends on,
and Maven locates them (either in your local or a central repository),
downloads them, and uses them to compile your code.</p><p>On occasion, you might need to know the origin of a particular dependency
— such as if you were to find different and incompatible versions
of the same JAR file in your build. In this case, you would need to
prevent one version of the JAR file from being included in your build, but
first you would need to locate the dependency holding the JAR.</p><p>Locating dependencies turns out to be surprisingly easy once you know the
following command:</p><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_418394" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">mvn dependency:tree</code></div></div></td></tr></tbody></table></div></div></div></span><p>The <code>dependency:tree</code> argument displays all of your direct
dependencies and then shows all sub-dependencies (and their
sub-dependencies, and so on). For example, the Listing 5 is an excerpt
from a client library required by one of my dependencies:</p><h5 id="listing5" class="ibm-h5">Listing 5. A Maven dependency
tree</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_676842" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">[INFO] ------------------------------------------------------------------------</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">[INFO] Building Client library for communicating with the LDE</code></div><div class="line number3 index2 alt2"><code class="htmlscript plain">[INFO]&nbsp;&nbsp;&nbsp; task-segment: [dependency:tree]</code></div><div class="line number4 index3 alt1"><code class="htmlscript plain">[INFO] ------------------------------------------------------------------------</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">[INFO] [dependency:tree {execution: default-cli}]</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">[INFO] com.lmt.pos:sis-client:jar:2.1.14</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">[INFO] +- org.codehaus.woodstox:woodstox-core-lgpl:jar:4.0.7:compile</code></div><div class="line number8 index7 alt1"><code class="htmlscript plain">[INFO] |&nbsp; \- org.codehaus.woodstox:stax2-api:jar:3.0.1:compile</code></div><div class="line number9 index8 alt2"><code class="htmlscript plain">[INFO] +- org.easymock:easymockclassextension:jar:2.5.2:test</code></div><div class="line number10 index9 alt1"><code class="htmlscript plain">[INFO] |&nbsp; +- cglib:cglib-nodep:jar:2.2:test</code></div><div class="line number11 index10 alt2"><code class="htmlscript plain">[INFO] |&nbsp; \- org.objenesis:objenesis:jar:1.2:test</code></div></div></td></tr></tbody></table></div></div></div></span><p>You can see in <a href="#listing5">Listing 5</a> that the
<code>sis-client</code> project requires the
<code>woodstox-core-lgpl</code> and the
<code>easymockclassextension</code> libraries. The
<code>easymockclassextension</code> library, in turn, requires the
<code>cglib-nodep</code> library and the <code>objenesis</code> library.
If I were having problems with <code>objenesis</code>, such as two
versions, 1.2 and 1.3, then this dependency tree would show me that the
1.2 artifact was being imported indirectly by the
<code>easymockclassextension</code> library.</p><p>The <code>dependency:tree</code> argument has saved me many hours of
debugging a broken build; I hope it will do the same for you.</p><h2 id="N10189" class="ibm-h2">4. Building for different environments</h2><p>Most substantial projects have at least a core group of environments
consisting of tasks related to development, quality assurance (QA),
integration, and production. The challenge of managing all of those
environments is in configuring your build, which has to connect to the
correct database, execute the correct set of scripts, and deploy all the
right artifacts to each environment. Using Maven profiles lets you do all
this without having to build explicit instructions for each environment
individually.</p><p>The key is in combining environmental profiles with task-oriented ones. Each environmental profile defines its specific locations, scripts, and servers. So, in my pom.xml file, I would define the task-oriented build as shown in Listing 6:
            </p><h5 id="listing6" class="ibm-h5">Listing 6. A deployment build</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_828340" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">build</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">plugins</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;net.fpic&lt;/</code><code class="htmlscript plain">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;tomcat-deployer-plugin&lt;/</code><code class="htmlscript plain">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">version</code><code class="htmlscript plain">&gt;1.0-SNAPSHOT&lt;/</code><code class="htmlscript plain">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;pos&lt;/</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">phase</code><code class="htmlscript plain">&gt;install&lt;/</code><code class="htmlscript plain">phase</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">goal</code><code class="htmlscript plain">&gt;deploy&lt;/</code><code class="htmlscript plain">goal</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">host</code><code class="htmlscript plain">&gt;${deploymentManagerRestHost}&lt;/</code><code class="htmlscript plain">host</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">port</code><code class="htmlscript plain">&gt;${deploymentManagerRestPort}&lt;/</code><code class="htmlscript plain">port</code><code class="htmlscript plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">username</code><code class="htmlscript plain">&gt;${deploymentManagerRestUsername}&lt;/</code><code class="htmlscript plain">username</code><code class="htmlscript plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">password</code><code class="htmlscript plain">&gt;${deploymentManagerRestPassword}&lt;/</code><code class="htmlscript plain">password</code><code class="htmlscript plain">&gt;</code></div><div class="line number19 index18 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">artifactSource</code><code class="htmlscript plain">&gt;</code></div><div class="line number20 index19 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">address/target/addressservice.war</code></div><div class="line number21 index20 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">artifactSource</code><code class="htmlscript plain">&gt;</code></div><div class="line number22 index21 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number23 index22 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number24 index23 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number25 index24 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number26 index25 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">plugins</code><code class="htmlscript plain">&gt;</code></div><div class="line number27 index26 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">build</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div></span><p>         
This build executes the <code>tomcat-deployer-plugin</code>, which is configured to connect to a specific host, port, and to specific username and password credentials. All of this information is defined using variables, such as <code>${deploymentmanagerRestHost}</code>. These variables are defined in my profiles on a per-environment basis, as shown in Listing 7:          
            </p><h5 id="listing7" class="ibm-h5">Listing 7.
Environment profiles</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_40540" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">profiles</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">profile</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;dev&lt;/</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestHost</code><code class="htmlscript plain">&gt;10.50.50.52&lt;/</code><code class="htmlscript plain">deploymentManagerRestHost</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestPort</code><code class="htmlscript plain">&gt;58090&lt;/</code><code class="htmlscript plain">deploymentManagerRestPort</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestUsername</code><code class="htmlscript plain">&gt;myusername&lt;/</code><code class="htmlscript plain">deploymentManagerRestUsername</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestPassword</code><code class="htmlscript plain">&gt;mypassword&lt;/</code><code class="htmlscript plain">deploymentManagerRestPassword</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">profile</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">profile</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;qa&lt;/</code><code class="htmlscript plain">id</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestHost</code><code class="htmlscript plain">&gt;10.50.50.50&lt;/</code><code class="htmlscript plain">deploymentManagerRestHost</code><code class="htmlscript plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestPort</code><code class="htmlscript plain">&gt;58090&lt;/</code><code class="htmlscript plain">deploymentManagerRestPort</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestUsername</code><code class="htmlscript plain">&gt;myotherusername&lt;/</code><code class="htmlscript plain">deploymentManagerRestUsername</code><code class="htmlscript plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript plain">deploymentManagerRestPassword</code><code class="htmlscript plain">&gt;myotherpassword&lt;/</code><code class="htmlscript plain">deploymentManagerRestPassword</code><code class="htmlscript plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number19 index18 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">profile</code><code class="htmlscript plain">&gt;</code></div><div class="line number20 index19 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript plain">profiles</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div></span><h3 id="N101A8" class="ibm-h3">Deploying Maven profiles</h3><p>
In the profiles in <a href="#listing7">Listing 7</a>, I defined two profiles and activated them based on the value in the profile name. If the profile selected were <code>dev</code> then the development deployment information would be used. If the profile selected were <code>qa</code>, then the QA deployment information would be used, and so on.       
            </p><p>Here's the command to deploy to development:</p><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_27926" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">mvn -Pdev clean install</code></div></div></td></tr></tbody></table></div></div></div></span><p>The <code>–Pdev</code> flag tells Maven to activate the development configuration and passing <code>-Pqa</code> would activate the QA configuration.
</p><h2 id="N101C7" class="ibm-h2">5. Custom Maven plug-ins</h2><p>Maven puts dozens of prebuilt plug-ins at your disposal, but at some point
you might find yourself in need of a custom plug-in. Building a custom
Maven plug-in is straightforward:</p><ol><li>Create a new project with the POM packaging set to
    "<code>maven-plugin</code>."</li><li>Include an invocation of the <code>maven-plugin-plugin</code> that
    defines your exposed plug-in goals.</li><li>Create a Maven plug-in "<code>mojo</code>" class (a class that extends
    <code>AbstractMojo</code>).</li><li>Annotate the class to define goals and variables that will be exposed
    as configuration parameters. The annotation <code>@Mojo</code> is
    required, and controls how and when the mojo is executed.</li><li>Implement an <code>execute()</code> method that will be invoked when
    your plug-in is invoked.</li></ol><p>As an example, Listing 8 shows relevant portions of a custom plug-in
designed to deploy Tomcat:</p><h5 id="listing8" class="ibm-h5">Listing 8.
TomcatDeployerMojo.java</h5><span class="dw-code-nohighlight"><div class="ibm-syntax-container"><div><div id="highlighter_775449" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">package net.fpic.maven.plugins;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="htmlscript plain">import org.apache.maven.plugin.AbstractMojo;</code></div><div class="line number4 index3 alt1"><code class="htmlscript plain">import org.apache.maven.plugin.MojoExecutionException;</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">import org.apache.maven.plugins.annotations.LifecyclePhase;</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">import org.apache.maven.plugins.annotations.Mojo;</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">import org.apache.maven.plugins.annotations.Parameter;</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="htmlscript plain">/**</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;</code><code class="htmlscript plain">* Goal that deploys a web application to Tomcat</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;</code><code class="htmlscript plain">*/</code></div><div class="line number12 index11 alt1"><code class="htmlscript plain">@Mojo(name = "deploy", defaultPhase = LifecyclePhase.INSTALL)</code></div><div class="line number13 index12 alt2"><code class="htmlscript plain">public class TomcatDeployerMojo extends AbstractMojo {</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">/**</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* The host name or IP address of the deployment server</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">*/</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">@Parameter(alias = "host", property = "deploy.host", required = true)</code></div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">private String serverHost;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">/**</code></div><div class="line number21 index20 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* The port of the deployment server</code></div><div class="line number22 index21 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">*/</code></div><div class="line number23 index22 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">@Parameter(alias = "port", property = "deploy.port", defaultValue = "58020", required = true)</code></div><div class="line number24 index23 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">private String serverPort;</code></div><div class="line number25 index24 alt2">&nbsp;</div><div class="line number26 index25 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">/**</code></div><div class="line number27 index26 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* The username to connect to the deployment manager (if omitted then the plugin</code></div><div class="line number28 index27 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* attempts to deploy the application to the server without credentials)</code></div><div class="line number29 index28 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">*/</code></div><div class="line number30 index29 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">@Parameter(alias = "username", property = "deploy.username")</code></div><div class="line number31 index30 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">private String username;</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">/**</code></div><div class="line number34 index33 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* The password for the specified username</code></div><div class="line number35 index34 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">*/</code></div><div class="line number36 index35 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">@Parameter(alias = "password", property = "deploy.password")</code></div><div class="line number37 index36 alt2">&nbsp;</div><div class="line number38 index37 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">private String password;</code></div><div class="line number39 index38 alt2">&nbsp;</div><div class="line number40 index39 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">/**</code></div><div class="line number41 index40 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* The name of the source artifact to deploy, such as target/pos.war</code></div><div class="line number42 index41 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">*/</code></div><div class="line number43 index42 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">@Parameter(alias = "artifactSource", property = "deploy.artifactSource", required = true)</code></div><div class="line number44 index43 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">private String artifactSource;</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">/**</code></div><div class="line number47 index46 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* The destination name of the artifact to deploy, such as ROOT.war.</code></div><div class="line number48 index47 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* If not present then the</code></div><div class="line number49 index48 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">* artifact source name is used (without pathing information)</code></div><div class="line number50 index49 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">*/</code></div><div class="line number51 index50 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">@Parameter(alias = "artifactDestination", property = "deploy.artifactDestination")</code></div><div class="line number52 index51 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">private String artifactDestination;</code></div><div class="line number53 index52 alt2">&nbsp;</div><div class="line number54 index53 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">public void execute() throws MojoExecutionException {</code></div><div class="line number55 index54 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">getLog().info("Server Host: " + serverHost +</code></div><div class="line number56 index55 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">", Server Port: " + serverPort +</code></div><div class="line number57 index56 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">", Artifact Source: " + artifactSource +</code></div><div class="line number58 index57 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">", Artifact Destination: " + artifactDestination);</code></div><div class="line number59 index58 alt2">&nbsp;</div><div class="line number60 index59 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">// Validate our fields</code></div><div class="line number61 index60 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">if (serverHost == null) {</code></div><div class="line number62 index61 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">throw new MojoExecutionException(</code></div><div class="line number63 index62 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">"No deployment host specified, deployment is not possible");</code></div><div class="line number64 index63 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></div><div class="line number65 index64 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">if (artifactSource == null) {</code></div><div class="line number66 index65 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">throw new MojoExecutionException(</code></div><div class="line number67 index66 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">"No source artifact is specified, deployment is not possible");</code></div><div class="line number68 index67 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></div><div class="line number69 index68 alt2">&nbsp;</div><div class="line number70 index69 alt1"><code class="htmlscript plain">...</code></div><div class="line number71 index70 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">}</code></div><div class="line number72 index71 alt1"><code class="htmlscript plain">}</code></div></div></td></tr></tbody></table></div></div></div></span><p>         
At the class level, the <code>@Mojo</code> annotation value <code>name</code> specifies the goal that this MOJO executes and the <code>lifecyclePhase</code> specifies the phase in which the goal executes. Each exposed property has a <code>@Parameter</code> annotation that specifies the alias through which the parameter will be executed, in addition to an expression that maps to a system property containing the actual value. If the property has a <code>required=true</code>, value set then it is required. If it has a <code>defaultValue</code>, then that value will be used if one is not specified. In the <code>execute()</code> method, you can invoke <code>getLog()</code> to gain access to the Maven logger, which, depending on the logging level, will output the specified message to the standard output device. If the plug-in fails, throwing a <code>MojoExecutionException</code> will cause the build to fail.
            </p><h2 id="N10211" class="ibm-h2">Conclusion</h2><p>You can use Maven just for builds, but at its best Maven is a project
life-cycle management tool. This article has presented five lesser known
features that can help you become more effective at using Maven. See the
    <a href="#artrelatedtopics">Related topics</a> section to learn more
about Maven.</p><!--CMA ID: 548779--><!--Site ID: 1--><!--XSLT stylesheet used to transform this file: dw-document-html-8.0.xsl-->
        <!-- Article Quiz -->
        
        <!-- Article Resources -->
        <div class="ibm-alternate-rule"><hr></div><h4 id="artdownload" class="ibm-h4">Downloadable resources</h4><ul class="ibm-link-list"><li><a class="ibm-document-link" href="j-5things13-pdf.pdf">PDF of this content</a></li></ul><div class="ibm-alternate-rule"><hr></div><h4 id="artrelatedtopics" class="ibm-h4">Related topics</h4><ul><li>Develop and deploy your next app on the <a href="https://console.bluemix.net/?cm_sp=dw-bluemix-_-j-5things13-_-article">IBM Bluemix cloud
    platform</a>.</li><li>"<a href="http://www.ibm.com/developerworks/java/tutorials/j-mavenv2/">Introduction to Apache Maven 2</a>" (Sing Li, developerWorks,
    December 2006): Familiarize yourself with the fundamental skills
    required to work on projects built using Maven 2, starting with this
    developerWorks tutorial.</li><li>"<a href="http://www.informit.com/guides/content.aspx?g=java&amp;seqNum=511">Managing Java Build Lifecycles with Maven</a>" (Steven Haines,
    InformIT.com, July 2009): This tutorial describes the basis for Maven,
    the architecture behind it, and how to use it to manage the build life
    cycles of your Java projects.</li><li><a href="http://www.sonatype.com/books/mvnref-book/reference/public-book.html"><em>Maven: The Complete Reference, Edition 0.7</em></a> (Tim
    O'Brien, et al.; Sonatype 2010): This free online book is an excellent
    resource for learning Maven, including tips for using the forthcoming
    Maven 3. Publisher SonaType is a software vendor that develops one of
    the most popular Maven repository projects, Nexus.</li><li><a href="http://maven.apache.org/docs/3.0-alpha-5/release-notes.html">Maven 3 release notes</a>: Learn about changes to Maven in
    version 3, including improvements to its usability and
    performance.</li><li><a href="http://maven.apache.org/">Maven home page</a>:
    Download Maven and learn more about it from the Apache Software
    Foundation.</li></ul>
        </div>
<br><hr>
<div class="ibm-col-6-4">
            <p class="dw-article-series-head">5 things you didn't know about ...</p>
        <h1 id="ibm-pagetitle-h1" class="ibm-h1">Apache Maven plugins</h1><p class="dw-article-subhead">Tips for mastering modern Maven plugins</p>
        
        <h2 id="Do-you-know-Maven" class="ibm-h2">Do you know Maven?</h2><p> Maven is the leading dependency management and build tool for Java™
developers, and with good reason! It standardizes the software build
process by articulating a project’s constitution, deploying it as an
application, and sharing it with other projects.</p><div class="dw-article-sidebar ibm-background-cool-white-20"><p><strong>About this series</strong></p><p>So you think you know about Java programming? The fact is, most
    developers scratch the surface of the Java platform, learning just
    enough to get the job done. In this ongoing series, Java technology
    sleuths dig beneath the core functionality of the Java platform,
    turning up tips and tricks that could help you solve even your
    stickiest programming challenges.</p></div><p> Maven employs a robust set of plugins that provide all of its
functionality. In Maven, plugins have <em>goals</em>, which under the hood
are just Java methods. Goals perform build tasks such as compiling the
project, packaging it, and deploying it to a local or remote server. These
activities map perfectly to build lifecycle phases. </p><p> Maven comes with its build plugins packaged and ready to go, and defaults
are preconfigured. Convention-over-configuration ensures that
configuration is scaled to the complexity of the given task. Most build
tasks require very minimal configuration.</p><p>You also can customize the behavior of Maven plugins. It’s easy to
overwrite plugin defaults and define new values using Maven’s
<code>&lt;configuration&gt;</code> element. Without doubt the most
overwritten default values are the <a href="https://maven.apache.org/plugins/maven-compiler-plugin/">compiler plugin</a>’s <code>&lt;source&gt;</code> and
<code>&lt;target&gt;</code> values.</p><p> Need proof? How many times have you added the XML in Listing 1 to your POM
to set the correct JVM version?</p><h5 id="listing1" class="ibm-h5">Listing 1.  Java version configuration in
    the compiler plugin</h5><div class="ibm-syntax-container"><div><div id="highlighter_359613" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;org.apache.maven.plugins&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;maven-compiler-plugin&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;3.6.1&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">source</code><code class="htmlscript plain">&gt;1.8&lt;/</code><code class="htmlscript keyword">source</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">target</code><code class="htmlscript plain">&gt;1.8&lt;/</code><code class="htmlscript keyword">target</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><h2 id="Executing-the-Maven-lifecycle" class="ibm-h2">Executing the Maven
lifecycle</h2><p>Each plugin goal is mapped to a Maven <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html">lifecycle phase</a>. Issuing the
<code>mvn compile</code> command instructs the <code>mvn</code> utility to
call all the goals bound to the <code>compile</code> lifecycle phase. The
<code>compiler</code> plugin’s <code>compile</code> goal is bound to this
lifecycle phase.</p><p>The phase-to-goal relationship is one-to-many. Multiple plugin goals may be
bound to the same phase to form a collection of related tasks. Phases are
also hierarchical, meaning the execution of one phase causes the execution
of all its <a href="http://maven.apache.org/ref/3.5.0/maven-core/lifecycles.html">preceding phases</a>.</p><p>In this case, issuing the <code>mvn compile</code> command initiates the
<code>validate</code> phase (which is the first phase of Maven’s <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html">default build lifecycle</a>), calling all goals bound
to that phase.</p><p>The <a href="http://maven.apache.org/plugins/">Maven</a>
and <a href="https://code.google.com/archive/search?q=maven%20plugin">Google Code</a> websites maintain a list of Maven
plugins. These plugins provide a range of useful and time-saving
functionality that you can incorporate into your build process. I’ll
introduce some of the most useful ones I’ve found and show you how to make
the most of them. </p><h2 id="Digitally-sign-a-jar-or-war" class="ibm-h2">1. Digitally sign a JAR or WAR</h2><p>Click the button below to download the code for this example.
It contains a simple application and a POM file with a configured
<code>Jarsigner</code> plugin.</p><p class="ibm-button-link"><a class="ibm-btn-pri dw-article-btn-pri" href="https://github.com/atheedom/MavenSampler/tree/jarsigner" onclick="segmentEvent('https://github.com/atheedom/MavenSampler/tree/jarsigner'); return false;">Get the code</a></p><p> Digitally signing a JAR or WAR is an important task, especially if you
want to distribute your application. Luckily, the Java platform provides
an archive-signing utility called <a href="http://docs.oracle.com/javase/8/docs/technotes/tools/windows/jarsigner.html">jarsigner</a>. It’s a command-line tool that signs an
archive by passing it the location of the archive, along with various
parameters, such as the keystore containing your cryptographic keys.</p><p>You can find <code>jarsigner</code> in the
<code>&lt;%JAVA_HOME%&gt;/bin directory</code> of your JDK installation.
Listing 2 shows how to sign a JAR using this utility.</p><h5 id="listing2" class="ibm-h5">Listing 2. Signing an archive using the
    jarsigner utility</h5><div class="ibm-syntax-container"><div><div id="highlighter_919653" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">jarsigner </code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-keystore /path/to/keystore.jks </code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-storepass &lt;</code><code class="htmlscript keyword">password</code><code class="htmlscript plain">&gt; </code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-keypass &lt;</code><code class="htmlscript keyword">key</code> <code class="htmlscript plain">password&gt; </code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">YourArchive.jar </code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">alias</code></div></div></td></tr></tbody></table></div></div></div><p>Out of the box, <code>jarsigner</code> is an easy-to-use command-line tool.
But wouldn't it be nice to automate the signing process, and have the
archive signed during the <code>package</code> phase of the build cycle?
Well, you can do this thanks to the <a href="http://maven.apache.org/plugins/maven-jarsigner-plugin/">Maven Jarsigner plugin</a>, which wraps the
<code>jarsigner</code> utility. All you need to do is bind the plugin’s
<code>sign</code> goal to your build’s <code>package</code> phase.</p><p>To get started you need a keystore. If you don't already have one, you can
create it with the Java platform’s <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/keytool.html">keytool</a> utility, found in the
<code>&lt;%JAVA_HOME%&gt;/bin</code> directory of your JDK installation. </p><h3 id="Creating-a-keystore" class="ibm-h3">Creating a keystore</h3><p>To create a keystore, navigate to the location where you want it and
execute the command in Listing 3. Be sure to replace <code>KeyAlias</code>
with an appropriate value such as your domain name. The <a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/keytool.html">official Oracle documentation</a> details further
configuration options the tool accepts.</p><h5 id="listing3" class="ibm-h5">Listing 3. Creating a keystore for the
    jarsigner utility</h5><div class="ibm-syntax-container"><div><div id="highlighter_703100" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">keytool -genkey -alias &lt;</code><code class="htmlscript keyword">KeyAlias</code><code class="htmlscript plain">&gt; -keyalg RSA -keystore keystore.jks -keysize 2048</code></div></div></td></tr></tbody></table></div></div></div><p>The process of creating a keystore requires you to answer a series of
questions about yourself and your organization, plus supply a secure
password. You will need this password when you configure the Maven
Jarsigner plugin, which you’ll do next.</p><h3 id="Add-Jarsigner-to-build" class="ibm-h3">Add Jarsigner to your
build process</h3><p>Now you’ll add the Maven Jarsigner plugin to your build lifecycle, then
configure it to digitally sign a JAR produced during the
<code>package</code> phase. It makes sense to hook into this phase because
the JAR has already been constructed and stored in your project’s default
output directory, which is usually the <code>target</code> directory. In
the <code>&lt;plugins&gt;</code> section of your POM file, add the code shown
in Listing 4.</p><h5 id="listing4" class="ibm-h5">Listing 4. Adding the Jarsigner
    plugin</h5><div class="ibm-syntax-container"><div><div id="highlighter_277364" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;org.apache.maven.plugins&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;maven-jarsigner-plugin&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;1.4&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p> You want the JAR to be signed after it has been built, so you need to
connect the signing process (which is wrapped in the <code>sign</code>
goal) to the <code>package</code> lifecycle phase. To do this, add the
code in Listing 5 to the plugin.</p><h5 id="listing5" class="ibm-h5">Listing 5. Connecting the sign goal to the package
    phase</h5><div class="ibm-syntax-container"><div><div id="highlighter_929066" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">id</code><code class="htmlscript plain">&gt;sign&lt;/</code><code class="htmlscript keyword">id</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;package&lt;/</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;sign&lt;/</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>The <code>sign</code> goal needs some configuration details to be able to
digitally sign the JAR. So between <code>&lt;configuration&gt;</code>
elements you should add the keystore location, the alias for the
credentials you want to use, the store password, and the password for the
credentials, as shown in Listing 6.</p><h5 id="listing6" class="ibm-h5">Listing 6. Specifying security credential </h5><div class="ibm-syntax-container"><div><div id="highlighter_566751" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">keystore</code><code class="htmlscript plain">&gt;/location/of/keystore.jks&lt;/</code><code class="htmlscript keyword">keystore</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">alias</code><code class="htmlscript plain">&gt;KeyAlias&lt;/</code><code class="htmlscript keyword">alias</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">storepass</code><code class="htmlscript plain">&gt;password&lt;/</code><code class="htmlscript keyword">storepass</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">keypass</code><code class="htmlscript plain">&gt;password&lt;/</code><code class="htmlscript keyword">keypass</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>This is the minimum configuration required to get the JAR-signing feature
working. Note that the plugin provides a handsome range of additional <a href="http://maven.apache.org/plugins/maven-jarsigner-plugin/sign-mojo.html">configuration options</a> to choose from.</p><p>The final step is to build the JAR and verify that it has been correctly
signed. From the command line, execute the <code>package</code> goal, like
so: <code>mvn clean package</code>. In the console output, you’ll see the
JAR building and then being signed. Figure 1 shows what this might look
like.</p><h5 id="fig1" class="ibm-h5">Figure 1. Output showing archive
    signed</h5><img src="./pics/5things-mavenplugins-fig1.png" class="ibm-downsize" alt="Output showing archive signed" height="193" width="809"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show('N10156');return false;" href="#N10156">View image at full size</a></p><p>The JAR will be built into the <code>target</code> output directory, and
this is where the Jarsigner plugin expects to find it. The plugin will
sign the JAR with the credentials you’ve given, then it will add two
additional files to the <code>META-INF</code> directory: a signature file
with an <code>.SF</code> extension and a signature block file with an
<code>.RSA</code> extension.</p><p>You now have a digitally signed JAR ready for distribution.</p><h3 id="Verify-digital-signing" class="ibm-h3">Verify digital
signing</h3><p>Before distributing the JAR, let’s verify that it has been properly signed.
You can do this with the Maven Jarsigner’s <code>verify</code> goal, or
via the command-line using the <code>jarsigner</code> tool. In Listing 7
I’ve used the command-line tool and passed it the archive file I want to
verify. </p><h5 id="listing7" class="ibm-h5">Listing 7. Using the jarsigner utility to
    verify a signed JAR</h5><div class="ibm-syntax-container"><div><div id="highlighter_10253" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">jarsigner -verify target/YourJavaArchive.jar</code></div></div></td></tr></tbody></table></div></div></div><p>If successful, you will receive the message: <code>jar verified</code>.</p><h3 id="Signing-WAR-files" class="ibm-h3">Signing WAR files</h3><p>Signing a JAR is not the only trick Jarsigner has up its sleeve. The plugin
can sign any Java archive file, including WAR files. To see how this
works, change the POM’s packaging type from JAR to WAR, add the <a href="https://maven.apache.org/plugins/maven-war-plugin/">Maven WAR plugin</a> (as shown in Listing 8), and
execute the command: <code>mvn clean package</code>.</p><h5 id="listing8" class="ibm-h5">Listing 8. Adding the Maven WAR
    plugin</h5><div class="ibm-syntax-container"><div><div id="highlighter_755444" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;org.apache.maven.plugins&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;maven-war-plugin&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;3.1.0&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>Check the <code>target</code> directory and you will find the WAR file has
been signed.</p><h3 id="Signing-multiple-archives" class="ibm-h3">Signing multiple archives</h3><p>If you have more than one archive to sign, Jarsigner can handle that
situation, too. The code in Listing 9 specifies the location of the JARs to sign as
<code>target/all</code>, and all JARs in this directory will be
signed.</p><h5 id="listing9" class="ibm-h5">Listing 9. Specifying an archive directory</h5><div class="ibm-syntax-container"><div><div id="highlighter_850018" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">archiveDirectory</code><code class="htmlscript plain">&gt;target/all&lt;/</code><code class="htmlscript keyword">archiveDirectory</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>If you need more fine-grained control over the archives to be signed, you
can use wildcards to explicitly include and exclude files, as shown in
Listing 10.</p><h5 id="listing10" class="ibm-h5">Listing 10. Including and excludingselected archives</h5><div class="ibm-syntax-container"><div><div id="highlighter_423307" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">includes</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">include</code><code class="htmlscript plain">&gt;*1.0.jar&lt;/</code><code class="htmlscript keyword">include</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">includes</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">excludes</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">exclude</code><code class="htmlscript plain">&gt;*SNAPSHOT.jar&lt;/</code><code class="htmlscript keyword">exclude</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">excludes</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><h2 id="Deploy-a-secured-web-app" class="ibm-h2">2. Deploy a secured web
app with Maven Cargo</h2><p>Click the button below to download the code for this example. It contains a
simple web application and a POM file with a configured Cargo plugin.</p><p class="ibm-button-link"><a class="ibm-btn-pri dw-article-btn-pri" href="https://github.com/atheedom/MavenSampler/tree/cargo-liberty-profile" onclick="segmentEvent('https://github.com/atheedom/MavenSampler/tree/cargo-liberty-profile'); return false;">Get the code</a></p><p>The <a href="https://codehaus-cargo.github.io/cargo/Maven2+plugin.html">Cargo plugin</a> from Codehaus is a wrapper for the
Cargo API. The API is designed for configuring, starting, stopping, and
deploying applications to a range of <a href="https://codehaus-cargo.github.io/cargo/Containers.html">supported containers</a>, as well as parsing,
creating, and merging Java EE modules. </p><p>One particularly interesting feature is Cargo’s ability to specify server
properties in a container-agnostic way. Such properties include ports,
remote security credentials, JVM arguments, and—most relevant to
our interest—the login details for users of the application you
want to deploy. The plugin supports <a href="https://codehaus-cargo.github.io/cargo/Container.html">14</a> of the most popular servers, right up to the
latest edition of each.</p><p>The Cargo plugin works best hooked into the <code>package</code> phase of
the Maven lifecycle. It can also be executed independently by referencing
the <code>run</code> goal directly: <code>mvn cargo:run</code>.
Independent execution assumes the project has already been packaged and is
ready for deployment.</p><p>Let's start with hooking Cargo’s <code>run</code> goal into the
<code>package</code> phase, as shown in Listing 11.</p><h5 id="listing11" class="ibm-h5">Listing 11. Hooking Cargo’s run goal to
    the package phase</h5><div class="ibm-syntax-container"><div><div id="highlighter_602997" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;org.codehaus.cargo&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;cargo-maven2-plugin&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;1.6.4&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;package&lt;/</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;run&lt;/</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>With the Maven integration done, you now need to configure the container
where you want Cargo to deploy the application. Cargo supports a variety
of container scenarios, including deploying to a local or remote server
that is already running (which includes starting up the server if
required). Alternatively, Cargo can be configured to download, install,
deploy, and start any of the 14 servers it supports.</p><p>For this example I will use <a href="https://developer.ibm.com/wasdev/downloads/">IBM®
    WebSphere® Liberty</a> which I have already downloaded and extracted
into a directory called <code>servers</code>.</p><p>The <a href="https://codehaus-cargo.github.io/cargo/WebSphere+Liberty.html">container configuration</a> expects at least the
container ID and the home location of the installed server. Listing 12
shows the configuration of a Liberty server located in my
<code>servers/wlp</code> directory.</p><h5 id="listing12" class="ibm-h5">Listing 12. Container
    configuration</h5><div class="ibm-syntax-container"><div><div id="highlighter_691890" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">container</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">containerId</code><code class="htmlscript plain">&gt;liberty&lt;/</code><code class="htmlscript keyword">containerId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">home</code><code class="htmlscript plain">&gt;\path\to\servers\wlp&lt;/</code><code class="htmlscript keyword">home</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">container</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><h3 id="Download-the-container-ZIP" class="ibm-h3">Download the container
ZIP</h3><p>Another option is to specify the URL of the Liberty ZIP on the
IBM website, in which case the Cargo plugin will download and install the
server. Listing 13 shows what this would look like.</p><h5 id="listing13" class="ibm-h5">Listing 13. Installing the container
    from the web</h5><div class="ibm-syntax-container"><div><div id="highlighter_752435" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">container</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">containerId</code><code class="htmlscript plain">&gt;liberty&lt;/</code><code class="htmlscript keyword">containerId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">zipUrlInstaller</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">url</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">https://public.dhe.ibm.com/ibmdl/export/pub/</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">software/websphere/wasdev/downloads/wlp/17.0.0.2/</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">wlp-webProfile7-17.0.0.2.zip</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">url</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">downloadDir</code><code class="htmlscript plain">&gt;/path/to/downloadDir&lt;/</code><code class="htmlscript keyword">downloadDir</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">extractDir</code><code class="htmlscript plain">&gt;/path/to/extractDir&lt;/</code><code class="htmlscript keyword">extractDir</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">zipUrlInstaller</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">container</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>The first time you execute the <code>run</code> goal, the ZIP file is
downloaded and extracted. On subsequent executions Maven will detect that
the file has already been downloaded and installed, and will skip that
task.</p><p>You now have a bare-bones configuration, which you can test by deploying
the application into your server. Kickoff the process by calling the
<code>package</code> phase (<code>mvn package</code>). The application
will be compiled, packaged, and deployed into the server, and can be
reached at the URL:
<code>http://localhost:8080/{artifactid}/index.html</code>.</p><h3 id="Customize-the-context-root" class="ibm-h3">Customize the context
root</h3><p>By default the <code>artifactid</code> is used to name the context root of
the web application. In some cases you will need to specify a custom
context root. In Listing 14 I’ve defined the context root as
<code>home</code>. </p><h5 id="listing14" class="ibm-h5">Listing 14. Customizing the context
    root</h5><div class="ibm-syntax-container"><div><div id="highlighter_797454" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">deployables</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">deployable</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">context</code><code class="htmlscript plain">&gt;home&lt;/</code><code class="htmlscript keyword">context</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">deployable</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">deployables</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>When the application is deployed, the web application can be reached at:
<code>localhost:8080/home/index.html</code>.</p><h3 id="Specify-user-logins" class="ibm-h3">Specify user logins</h3><p>You now have a pretty robust deployment process that downloads and installs
a server and deploys your application into a custom context root. But this
is just the beginning of what the Cargo plugin can do.</p><p>Cargo really comes into its own when we start defining <a href="https://codehaus-cargo.github.io/cargo/Configuration+properties.html">configuration properties</a>. As I mentioned before,
these are properties of the container such as port, protocol, and most
interestingly, user login details.</p><p>Let’s add a user to an example application and force login to the site. For
simplicity, we will use the basic authentication method, which requires
very minimal configuration in the app’s <code>web.xml</code> file. Listing
15 shows the specification of the <code>user-role</code> and a restriction
to the <code>WelcomeServlet</code> web resource.</p><h5 id="listing15" class="ibm-h5">Listing 15. Declaring the
    user-role</h5><div class="ibm-syntax-container"><div><div id="highlighter_311529" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">web-app</code> <code class="htmlscript color1">version</code><code class="htmlscript plain">=</code><code class="htmlscript string">"3.1"</code><code class="htmlscript plain">...&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">security-constraint</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">web-resource-collection</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">web-resource-name</code><code class="htmlscript plain">&gt;Welcome Servlet&lt;/</code><code class="htmlscript keyword">web-resource-name</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">url-pattern</code><code class="htmlscript plain">&gt;/WelcomeServlet/*&lt;/</code><code class="htmlscript keyword">url-pattern</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">http-method</code><code class="htmlscript plain">&gt;GET&lt;/</code><code class="htmlscript keyword">http-method</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">web-resource-collection</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">auth-constraint</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">role-name</code><code class="htmlscript plain">&gt;user-role&lt;/</code><code class="htmlscript keyword">role-name</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">auth-constraint</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">security-constraint</code><code class="htmlscript plain">&gt;</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">login-config</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">auth-method</code><code class="htmlscript plain">&gt;BASIC&lt;/</code><code class="htmlscript keyword">auth-method</code><code class="htmlscript plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">realm-name</code><code class="htmlscript plain">&gt;file&lt;/</code><code class="htmlscript keyword">realm-name</code><code class="htmlscript plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">login-config</code><code class="htmlscript plain">&gt;</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">security-role</code><code class="htmlscript plain">&gt;</code></div><div class="line number21 index20 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">role-name</code><code class="htmlscript plain">&gt;user-role&lt;/</code><code class="htmlscript keyword">role-name</code><code class="htmlscript plain">&gt;</code></div><div class="line number22 index21 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">security-role</code><code class="htmlscript plain">&gt;</code></div><div class="line number23 index22 alt2">&nbsp;</div><div class="line number24 index23 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">web-app</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>You can configure the Cargo plugin to create a user for the
<code>user-role</code>, which is done on-the-fly at deployment time.
Listing 16 show a username and password being defined for the
<code>user-role</code>. The username is <code>user</code> and the password
is <code>user123!</code>.</p><h5 id="listing16" class="ibm-h5">Listing 16. Defining a username and
    password</h5><div class="ibm-syntax-container"><div><div id="highlighter_499105" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">cargo.servlet.users</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">user:user1234!:user-role</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">cargo.servlet.users</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>The format for the <code>&lt;cargo.servlet.users&gt;</code> property is
<code>username:password:role</code>. By separating the set with the pipe
symbol, you can declare multiple users for the same and different roles
within a single property:</p><div class="ibm-syntax-container"><div><div id="highlighter_982793" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">username1:password1:role11,...,role1N|username2:password2:role21,...,role2N|...</code></div></div></td></tr></tbody></table></div></div></div><p>With the username and password assigned to the user role, you are now ready
to package and deploy the application. With just one
command—<code>mvn clean package</code>—your web application
will be compiled, packaged, and deployed to the Liberty
container. The server will also be started.</p><p>If you navigate to the URL
<code>http://localhost:8080/home/WelcomeServlet</code> you will be
presented with a login box, as shown in Figure 2. Enter the username and
password configured in the Cargo plugin and click <strong>Log In</strong>
to enter the application.</p><h5 id="fig2" class="ibm-h5">Figure 2. The login challenge</h5><img src="./pics/5things-mavenplugins-fig2.png" class="ibm-downsize" alt="The login challenge" height="302" width="451"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show('N10294');return false;" href="#N10294">View image at full size</a></p><h2 id="Install-a-custom-JAR-in-your-local-repository" class="ibm-h2">3.
Install a custom JAR in your local repository</h2><p>The traditional way to include JARs in your project is to create a
directory in your project and ensure that it is on the classpath. With
Maven you don't need to do this. Instead of requiring that you co-locate
JARs with your project, Maven stores them in an isolated local repository.
Your project must then specify a dependency on those JARs.</p><p>The local repository is populated with dependencies downloaded from the <a href="https://search.maven.org/" target="_blank">central Maven
    repository</a>. This is the Maven mothership and contains thousands of
popular and commonly used JARs. But what if the JAR you want to use is not
in Maven central? You could, of course, rely on the traditional solution
and include your JAR directly in your project, but then you would not
benefit from Maven’s dependency management. </p><p>Instead, you can use the <code>maven install plugin</code> to install the
JAR into your local Maven repository. First, you’ll need to <a href="http://maven.apache.org/plugins/maven-install-plugin/">download the plugin</a>, then you can execute its <a href="http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html">install-file</a> goal. This example is a little
different from the previous ones because you will not hook the goal to a
Maven lifecycle phase. Instead, you’ll specify the goal in the Maven
command-line tool.</p><p>The <code>install-file</code> goal requires five parameters that specify
the location of the JAR file, the <code>group</code> and
<code>artifactid</code>, its version number, and the package type. Listing
17 shows the structure of the Maven command.</p><h5 id="listing17" class="ibm-h5">Listing 17. Installing a JAR in the
    local Maven repository</h5><div class="ibm-syntax-container"><div><div id="highlighter_748801" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">mvn install:install-file </code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-Dfile=PATH/TO/YOUR-JAR.jar </code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-DgroupId=GROUP-ID </code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-DartifactId=ARTIFACT-ID </code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-Dversion=VERSION </code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">-Dpackaging=jar</code></div></div></td></tr></tbody></table></div></div></div><p>For the JAR you wish to install, you will need to specify values for the
shown parameters. These can be anything you wish. Once executed, you can
see for yourself that the new file is stored in your local Maven
repository. Navigate to the repository directory
<code>/.m2/repository</code> and find the folder with the name
<code>GROUP-ID</code>. If the <code>groupId</code> value is a reverse
domain name such as <code>com.readlearncode</code>, simply search for the
<code>com</code> directory then navigate to the <code>readlearncode</code>
directory. Here is where you will find a folder with the version number of
the artifact and the JAR installed inside. The location of the JAR may
look something like this:
<code>/.m2/repository/com/readlearncode/4.0/MyJar.jar</code>.</p><p>Your JAR is now available to all your projects. You can add it as a
dependency to your POM in the usual way, as shown in Listing 18.</p><h5 id="listing18" class="ibm-h5">Listing 18. Specifying your JAR as a
    dependency</h5><div class="ibm-syntax-container"><div><div id="highlighter_586011" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">dependency</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;GROUP-ID&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;ARTIFACT-ID&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;VERSION&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">dependency</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><h2 id="maven-repository" class="ibm-h2">4. Create a GitHub-based Maven
repository</h2><p>Click the button below to download the code for this example. It contains a simple
    application and a POM file with the <code>site-maven-plugin</code>
    configured.</p><p class="ibm-button-link"><a class="ibm-btn-pri dw-article-btn-pri" href="https://github.com/atheedom/MavenSampler/tree/github-maven-repo" onclick="segmentEvent('https://github.com/atheedom/MavenSampler/tree/github-maven-repo'); return false;">Get the code</a></p><p>There are many reasons to host a Maven repository on GitHub, including
licensing issues, privacy, and cost of commercial hosting. Regardless of
why you choose to host a GitHub-based Maven repository, setting one up is
easy.</p><p>To start, create a branch in an existing GitHub repository and install your
project’s artifacts directly into the branch. This will bind to the
<code>deploy</code> phase of Maven’s lifecycle, so that when the project
is deployed the remote repository is automatically refreshed. </p><h3 id="Add-GitHub-credentials" class="ibm-h3">Add GitHub
credentials</h3><p>After you’ve created the Maven branch in your GitHub repository, you need
to add your GitHub repository credentials to Maven’s
<code>settings.xml</code> file. This file is usually found in the
<code>.m2</code> directory. Between <code>settings.xml</code>’s
<code>&lt;servers&gt;</code> elements, you need to define a new server and
specify your username and password. Listing 19 demonstrates how this might
look (note that I’ve named my new server <code>github</code>).</p><h5 id="listing19" class="ibm-h5">Listing 19. Configuring a github repo as
    a server</h5><div class="ibm-syntax-container"><div><div id="highlighter_978299" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">servers</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">server</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">id</code><code class="htmlscript plain">&gt;github&lt;/</code><code class="htmlscript keyword">id</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">username</code><code class="htmlscript plain">&gt;USERNAME_OR_EMAIL&lt;/</code><code class="htmlscript keyword">username</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">password</code><code class="htmlscript plain">&gt;PASSWORD&lt;/</code><code class="htmlscript keyword">password</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">server</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">servers</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><h3 id="Two-Factor-Authentication" class="ibm-h3">Two-Factor
Authentication</h3><p>If you have two-factor authentication enabled you’ll have to create a <a href="https://github.com/settings/tokens" target="_blank">Personal
    Access Token</a> via your <strong>GitHub Settings</strong>. Copy and
paste the token directly to the <code>&lt;password&gt;</code> elements. For
extra security, passwords can be encrypted by following the instructions
on the <a href="https://maven.apache.org/guides/mini/guide-encryption.html">Maven website</a>.</p><h3 id="Maven-site-plugin" class="ibm-h3">Maven site plugin</h3><p>In your Maven POM you will be using GitHub’s <a href="https://github.github.com/maven-plugins/site-plugin/">site-maven-plugin</a>. The first thing you need to do
is set a base directory from which to commit files. Start by creating a
staging repository and locating it in the project's <code>target</code>
directory, as shown in Listing 20. For this example I have called mine
<code>repo-stage</code>.</p><p>Next, because you want to hook this plugin to the <code>deploy</code>
phase, you have to specify the repository location in the
<code>maven-deploy-plugin</code>’s
<code>&lt;altDeploymentRepository&gt;</code>. The code snippet in Listing 20
shows how this is done.</p><h5 id="listing20" class="ibm-h5">Listing 20. Specifying the alternative
    local repository</h5><div class="ibm-syntax-container"><div><div id="highlighter_723650" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;maven-deploy-plugin&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;2.8.2&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">altDeploymentRepository</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">Repo.stage::default::file://</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">${project.build.directory}/repo-stage</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">altDeploymentRepository</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>Finally, you need to configure the <code>site-maven-plugin</code> and hook
it into the <code>deploy</code> phase. To do this, pass the plugin the
<code>id</code> of the GitHub server you created earlier. You also need to
pass it the repository name and owner, the branch where you are committing
project artifacts, and a comment for the commit. You also need to switch
off Jekyll, so that it doesn’t think it has to generate GitHub pages.</p><p>Listing 21 shows a complete configuration of the
<code>site-maven-plugin</code>. Note that the repository name is
<code>dependency</code> (if the branch doesn’t exist GitHub will create
it).</p><h5 id="listing21" class="ibm-h5">Listing 21. Configuring the site
    plugin</h5><div class="ibm-syntax-container"><div><div id="highlighter_996563" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;com.github.github&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;site-maven-plugin&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;0.12&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript comments">&lt;!-- Github settings --&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">server</code><code class="htmlscript plain">&gt;github&lt;/</code><code class="htmlscript keyword">server</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">repositoryName</code><code class="htmlscript plain">&gt;MavenSampler&lt;/</code><code class="htmlscript keyword">repositoryName</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">repositoryOwner</code><code class="htmlscript plain">&gt;atheedom&lt;/</code><code class="htmlscript keyword">repositoryOwner</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">branch</code><code class="htmlscript plain">&gt;refs/heads/dependency&lt;/</code><code class="htmlscript keyword">branch</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">message</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">Artifacts for</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">${project.name}/${project.artifactId}/${project.version}</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">message</code><code class="htmlscript plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">noJekyll</code><code class="htmlscript plain">&gt;true&lt;/</code><code class="htmlscript keyword">noJekyll</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript comments">&lt;!-- Deployment values --&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">outputDirectory</code><code class="htmlscript plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">${project.build.directory}/repo-stage</code></div><div class="line number19 index18 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">outputDirectory</code><code class="htmlscript plain">&gt;</code></div><div class="line number20 index19 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">includes</code><code class="htmlscript plain">&gt;</code></div><div class="line number21 index20 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">include</code><code class="htmlscript plain">&gt;**/*&lt;/</code><code class="htmlscript keyword">include</code><code class="htmlscript plain">&gt;</code></div><div class="line number22 index21 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">includes</code><code class="htmlscript plain">&gt;</code></div><div class="line number23 index22 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number24 index23 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number25 index24 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number26 index25 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;deploy&lt;/</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;</code></div><div class="line number27 index26 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number28 index27 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;site&lt;/</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;</code></div><div class="line number29 index28 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number30 index29 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number31 index30 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number32 index31 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>All that's left to do is to is run the command
<code>mvn clean deploy</code>. In the console, you’ll see the plugin
uploading the repository files to your GitHub account, creating the
commit, and pushing it to the dependency branch. The console output should
look something like Figure 3.</p><h5 id="fig3" class="ibm-h5">Figure 3. Console output of a successful
    commit</h5><img src="./pics/5things-mavenplugins-fig3.png" class="ibm-downsize" alt="Console output of successful commit" height="307" width="850"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show('N10371');return false;" href="#N10371">View image at full size</a></p><p>To verify that everything is working as it should, visit your GitHub
repository and select the <code>dependency</code> branch. You should see
all your project’s artifacts, as shown in Figure 4.</p><h5 id="fig4" class="ibm-h5">Figure 4. Snapshot of the Maven repository in
    GitHub</h5><img src="./pics/5things-mavenplugins-fig4.png" class="ibm-downsize" alt="Snapshot of the Maven repository in GitHub" height="364" width="850"><p class="ibm-ind-link ibm-hide"><a class="ibm-popup-link" onclick="IBMCore.common.widget.overlay.show('N10380');return false;" href="#N10380">View image at full size</a></p><p>Once you’ve confirmed that your artifacts are safely committed to your
GitHub Maven repository, you will want to share the new repository with
others who wish to rely on your project. </p><h3 id="GitHub-as-repository" class="ibm-h3">Add GitHub as repository</h3><p>To specify your GitHub Maven repository as a remote repository for their
own projects, subscribers will need to declare the repository in their
POM, as shown in Listing 22. Then you’ll specify your project’s artifacts
in the normal way, as shown in Listing 23.</p><h5 id="listing22" class="ibm-h5">Listing 22. Specifying GitHub as a
    remote repository</h5><div class="ibm-syntax-container"><div><div id="highlighter_933545" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">repositories</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">repository</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">id</code><code class="htmlscript plain">&gt;PROJECT_NAME-dependency&lt;/</code><code class="htmlscript keyword">id</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">url</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">https://raw.github.com/</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">GITHUB_USERNAME/PROJECT_NAME/dependency</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">url</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">snapshots</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">enabled</code><code class="htmlscript plain">&gt;true&lt;/</code><code class="htmlscript keyword">enabled</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">updatePolicy</code><code class="htmlscript plain">&gt;always&lt;/</code><code class="htmlscript keyword">updatePolicy</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">snapshots</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">repository</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">repositories</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><h5 id="listing23" class="ibm-h5">Listing 23. Project dependency</h5><div class="ibm-syntax-container"><div><div id="highlighter_451568" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">dependency</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;com.readlearncode&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;maven-sampler&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;1.0&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">dependency</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>Now you have a poor-man's public Maven repository into which to deploy your
dependencies and share them with the world.</p><h2 id="More-timesaving-tips-and-tricks" class="ibm-h2">5. More
timesaving tips and tricks</h2><p>Apache Maven is so widely used that finding tips and tricks that are
unknown is like prospecting for gold. So I’ve decided to conclude with a
collection of tidbits that I have found extremely useful. Perhaps among
them you will find a few nuggets that will save you time and
frustration.</p><h3 id="remove-unused-dependencies" class="ibm-h3">A ‘Roomba’ for unused
dependencies</h3><p>Developing is fun and exciting, especially when you get to play with new
APIs and technology. Maven makes it quick and easy to get into something
new, too: all you have to do is copy and paste the dependency into your
POM file and you’re off. As developers we sometimes get carried away with
enthusiasm, however, and forget to remove unused dependencies; or we’re
just too lazy to do it. Over time, this bad habit can bloat your POM and
slow down deployments.</p><p>So my first tip is the Maven equivalent of the robotic vacuum cleaner, <a href="http://www.irobot.com/For-the-Home/Vacuuming/Roomba.aspx">Roomba</a>. Simply run the command in Listing 24 and
Maven will analyze your project’s code for unused dependencies and
identify them.</p><h5 id="listing24" class="ibm-h5">Listing 24. Identify unused
    dependencies</h5><div class="ibm-syntax-container"><div><div id="highlighter_303214" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">dependency:analyze</code></div></div></td></tr></tbody></table></div></div></div><h3 id="Purge-the-local-repository" class="ibm-h3">Purge the local
repository</h3><p>From time to time you will need to purge your Maven
directory—perhaps due to corruption, or if your IDE is indexing
really slowly. Whatever the reason, you can remove all the gunk by
executing the code in Listing 25.</p><h5 id="listing25" class="ibm-h5">Listing 25. Purging the local
    repository</h5><div class="ibm-syntax-container"><div><div id="highlighter_105152" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">mvn dependency:purge-local-repository</code></div></div></td></tr></tbody></table></div></div></div><p>This will purge and then automatically download all the dependencies for
your current project. Your project will feel reborn and ready to
out-perform itself again.</p><h3 id="Timestamp-it" class="ibm-h3">Timestamp it!</h3><p>Adding a timestamp to your build can be very useful. Maven 2 introduced the
build variable <code>maven.build.timestamp</code>, which denotes the start
of the build. You can use this variable anywhere in your POM with the
variable <code>${maven.build.timestamp}</code>.</p><p>The timestamp is formatted using the Java <a href="http://java.sun.com/javase/6/docs/api/java/text/SimpleDateFormat.html">SimpleDateFormat</a> class and declared with the
property <code>&lt;maven.build.timestamp.format&gt;</code> property. Listing
26 shows an example of how to do this.</p><h5 id="listing26" class="ibm-h5">Listing 26. Timestamp format</h5><div class="ibm-syntax-container"><div><div id="highlighter_424261" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">properties</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">maven.build.timestamp.format</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">yyyy-MM-dd'T'HH:mm:ss'Z'</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">maven.build.timestamp.format</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">properties</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><h3 id="Echo-properties" class="ibm-h3">Echo properties</h3><p>Have you ever wanted to know a Maven property value? Instead of guessing
you can be sure with the <a href="http://maven.apache.org/plugins/maven-antrun-plugin/">maven-antrun-plugin</a>. This neat little tool echos
any property you pass it to the console.</p><p>In Listing 27, <code>antrun</code>’s <code>run</code> goal is hooked into
Maven’s <code>validate</code> phase (the first default lifecycle phase)
and uses the <code>&lt;echo&gt;</code> element in the configuration section
to output property values.</p><h5 id="listing27" class="ibm-h5">Listing 27. Echo a property to the
    console</h5><div class="ibm-syntax-container"><div><div id="highlighter_268643" class="syntaxhighlighter  htmlscript"><table border="0" cellpadding="0" cellspacing="0" role="none"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;org.apache.maven.plugins&lt;/</code><code class="htmlscript keyword">groupId</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;maven-antrun-plugin&lt;/</code><code class="htmlscript keyword">artifactId</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;1.1&lt;/</code><code class="htmlscript keyword">version</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;validate&lt;/</code><code class="htmlscript keyword">phase</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;run&lt;/</code><code class="htmlscript keyword">goal</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">goals</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">tasks</code><code class="htmlscript plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">echo</code><code class="htmlscript plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">settings.localRepository = ${settings.localRepository}</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">echo</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">echo</code><code class="htmlscript plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">project.build.directory = ${project.build.directory}</code></div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">echo</code><code class="htmlscript plain">&gt;</code></div><div class="line number19 index18 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">tasks</code><code class="htmlscript plain">&gt;</code></div><div class="line number20 index19 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">configuration</code><code class="htmlscript plain">&gt;</code></div><div class="line number21 index20 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">execution</code><code class="htmlscript plain">&gt;</code></div><div class="line number22 index21 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">executions</code><code class="htmlscript plain">&gt;</code></div><div class="line number23 index22 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">plugin</code><code class="htmlscript plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>Now you can simply use <code>mvn validate</code> to execute the
<code>validate</code> phase and see the property value output to the
console.</p><h2 id="Conclusion" class="ibm-h2">Conclusion</h2><p>Maven is far more than just a build tool, thanks to the plugins that
simplify and automate a vast range of development tasks. In this article
I've presented a handful of plugins and offered tips for using them for a
more effective and productive development lifecycle. For even more about
Maven and its project lifecycle, see "<a href="https://www.ibm.com/developerworks/library/j-5things13/index.html">5 things you didn't know about ... Apache Maven</a>,"
which I've recently updated for Maven 3.</p><!--CMA ID: 1049453--><!--Site ID: 1--><!--XSLT stylesheet used to transform this file: dw-document-html-8.0.xsl-->
        <!-- Article Quiz -->
        
        <!-- Article Resources -->
        <div class="ibm-alternate-rule"><hr></div><h4 id="artdownload" class="ibm-h4">Downloadable resources</h4><ul class="ibm-link-list"><li><a class="ibm-document-link" href="j-5things16-pdf.pdf">PDF of this content</a></li></ul><div class="ibm-alternate-rule"><hr></div><h4 id="artrelatedtopics" class="ibm-h4">Related topics</h4><ul class="ibm-plain-list"><li><a href="https://github.com/atheedom/MavenSampler/">Get the complete code for this article</a></li><li><a href="https://www.ibm.com/developerworks/library/j-5things13/index.html">5 things you didn't know about … Apache Maven</a></li><li><a href="http://maven.apache.org/docs/3.0-alpha-5/release-notes.html?cm_mc_uid=50630059264114845954442&amp;cm_mc_sid_50200000=1503945884">Maven 3 release notes</a></li></ul>
       </div>
</body>
</html>